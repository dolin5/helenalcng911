(function(){(this||window).webpackJsonp.registerAbsMids({"esri/core/libs/gl-matrix-2/mat4":878,"esri/geometry/support/quantizationUtils":884,"esri/core/libs/gl-matrix-2/math/mat4":888,"esri/core/libs/gl-matrix-2/factories/mat3f64":897,"esri/core/libs/gl-matrix-2/vec3f32":934,"esri/views/3d/support/projectionUtils":994,"esri/core/libs/gl-matrix-2/quat":1049,"esri/core/libs/gl-matrix-2/math/vec4":1050,"esri/core/libs/gl-matrix-2/quatf32":1051,"esri/views/3d/layers/i3s/I3SBinaryReader":1055,"esri/core/libs/gl-matrix-2/factories/vec3f32":1110,"esri/core/libs/gl-matrix-2/factories/quatf64":1223,"esri/views/3d/layers/i3s/LEPCC":1224,"esri/views/3d/support/earthUtils":1225,"esri/core/libs/gl-matrix-2/math/quat":1842,"esri/core/libs/gl-matrix-2/factories/quatf32":1843,"esri/views/3d/webgl-engine/lib/BufferVectorMath":1845})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{1049:function(t,e,n){var r,a;r=[n.dj.c(t.i),e,n(1842)],void 0===(a=function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.quat=n}.apply(null,r))||(t.exports=a)},1050:function(t,e,n){var r,a;r=[n.dj.c(t.i),e,n(76)],void 0===(a=function(t,e,n){function r(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function a(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function o(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function i(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2],o=e[3]-t[3];return Math.sqrt(n*n+r*r+a*a+o*o)}function u(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2],o=e[3]-t[3];return n*n+r*r+a*a+o*o}function c(t){var e=t[0],n=t[1],r=t[2],a=t[3];return Math.sqrt(e*e+n*n+r*r+a*a)}function s(t){var e=t[0],n=t[1],r=t[2],a=t[3];return e*e+n*n+r*r+a*a}Object.defineProperty(e,"__esModule",{value:!0}),e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},e.set=function(t,e,n,r,a){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},e.subtract=r,e.multiply=a,e.divide=o,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t},e.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t},e.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t},e.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},e.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t},e.distance=i,e.squaredDistance=u,e.length=c,e.squaredLength=s,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},e.normalize=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=n*n+r*r+a*a+o*o;return i>0&&(i=1/Math.sqrt(i),t[0]=n*i,t[1]=r*i,t[2]=a*i,t[3]=o*i),t},e.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},e.lerp=function(t,e,n,r){var a=e[0],o=e[1],i=e[2],u=e[3];return t[0]=a+r*(n[0]-a),t[1]=o+r*(n[1]-o),t[2]=i+r*(n[2]-i),t[3]=u+r*(n[3]-u),t},e.random=function(t,e){var r,a,o,i,u,c;e=e||1;do{u=(r=2*n.RANDOM()-1)*r+(a=2*n.RANDOM()-1)*a}while(u>=1);do{c=(o=2*n.RANDOM()-1)*o+(i=2*n.RANDOM()-1)*i}while(c>=1);var s=Math.sqrt((1-u)/c);return t[0]=e*r,t[1]=e*a,t[2]=e*o*s,t[3]=e*i*s,t},e.transformMat4=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3];return t[0]=n[0]*r+n[4]*a+n[8]*o+n[12]*i,t[1]=n[1]*r+n[5]*a+n[9]*o+n[13]*i,t[2]=n[2]*r+n[6]*a+n[10]*o+n[14]*i,t[3]=n[3]*r+n[7]*a+n[11]*o+n[15]*i,t},e.transformQuat=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=n[0],u=n[1],c=n[2],s=n[3],l=s*r+u*o-c*a,f=s*a+c*r-i*o,d=s*o+i*a-u*r,h=-i*r-u*a-c*o;return t[0]=l*s+h*-i+f*-c-d*-u,t[1]=f*s+h*-u+d*-i-l*-c,t[2]=d*s+h*-c+l*-u-f*-i,t[3]=e[3],t},e.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},e.equals=function(t,e){var r=t[0],a=t[1],o=t[2],i=t[3],u=e[0],c=e[1],s=e[2],l=e[3];return Math.abs(r-u)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(a-c)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(o-s)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(s))&&Math.abs(i-l)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(l))},e.sub=r,e.mul=a,e.div=o,e.dist=i,e.sqrDist=u,e.len=c,e.sqrLen=s}.apply(null,r))||(t.exports=a)},1051:function(t,e,n){var r,a;r=[n.dj.c(t.i),e,n(1843)],void 0===(a=function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.quatf32=n}.apply(null,r))||(t.exports=a)},1055:function(t,e,n){var r,a;r=[n.dj.c(t.i),e,n(11),n(5),n(9),n(1224)],void 0===(a=function(t,e,n,r,a,o){function i(t,e,r){for(var a="",o=0;o<r;){var i=t[e+o];if(i<128)a+=String.fromCharCode(i),o++;else if(i>=192&&i<224){if(o+1>=r)throw new n("utf8-decode-error","UTF-8 Decode failed. Two byte character was truncated.");var u=(31&i)<<6|63&t[e+o+1];a+=String.fromCharCode(u),o+=2}else if(i>=224&&i<240){if(o+2>=r)throw new n("utf8-decode-error","UTF-8 Decode failed. Multi byte character was truncated.");u=(15&i)<<12|(63&t[e+o+1])<<6|63&t[e+o+2];a+=String.fromCharCode(u),o+=3}else{if(!(i>=240&&i<248))throw new n("utf8-decode-error","UTF-8 Decode failed. Invalid multi byte sequence.");if(o+3>=r)throw new n("utf8-decode-error","UTF-8 Decode failed. Multi byte character was truncated.");if((u=(7&i)<<18|(63&t[e+o+1])<<12|(63&t[e+o+2])<<6|63&t[e+o+3])>=65536){var c=55296+(u-65536>>10),s=56320+(1023&u);a+=String.fromCharCode(c,s)}else a+=String.fromCharCode(u);o+=4}}return a}function u(t,n){for(var r={byteOffset:0,byteCount:0,fields:Object.create(null)},a=0,o=0;o<n.length;o++){var i=n[o],u=i.valueType||i.type,c=e.valueType2ArrayBufferReader[u];r.fields[i.property]=c(t,a),a+=e.valueType2TypedArrayClassMap[u].BYTES_PER_ELEMENT}return r.byteCount=a,r}function c(t,e,r){var a,o,u=[],c=0;for(o=0;o<t;o+=1){if((a=e[o])>0){if(u.push(i(r,c,a-1)),0!==r[c+a-1])throw new n("string-array-error","Invalid string array: missing null termination.")}else u.push(null);c+=a}return u}function s(t,n){return new(0,e.valueType2TypedArrayClassMap[n.valueType])(t,n.byteOffset,n.count*n.valuesPerElement)}function l(t,e){return new Uint8Array(t,e.byteOffset,e.byteCount)}function f(t,e,a){for(var o=null!=e.header?u(t,e.header):{byteOffset:0,byteCount:0,fields:{count:a}},i={header:o,byteOffset:o.byteCount,byteCount:0,entries:Object.create(null)},c=o.byteCount,s=0;s<e.ordering.length;s++){var l=e.ordering[s],f=r.clone(e[l]);if(f.count=o.fields.count,"String"===f.valueType){if(f.byteOffset=c,f.byteCount=o.fields[l+"ByteCount"],"UTF-8"!==f.encoding)throw new n("unsupported-encoding","Unsupported String encoding.",{encoding:f.encoding})}else{if(!h(f.valueType))throw new n("unsupported-value-type","Unsupported binary valueType",{valueType:f.valueType});var d=v(f.valueType);c+=c%d!=0?d-c%d:0,f.byteOffset=c,f.byteCount=d*f.valuesPerElement*f.count}c+=f.byteCount,i.entries[l]=f}return i.byteCount=c-i.byteOffset,i}function d(t,e,r){if(e!==t&&M.error("Invalid "+r+" buffer size\n expected: "+t+", actual: "+e+")"),e<t)throw new n("buffer-too-small","Binary buffer is too small",{expectedSize:t,actualSize:e})}function h(t){return e.valueType2TypedArrayClassMap.hasOwnProperty(t)}function v(t){return h(t)?e.valueType2TypedArrayClassMap[t].BYTES_PER_ELEMENT:0}Object.defineProperty(e,"__esModule",{value:!0});var M=a.getLogger("esri.views.3d.layers.i3s.I3SBinaryReader");e.readHeader=u,e.readStringArray=c,e.createTypedView=s,e.createRawView=l,e.createAttributeDataIndex=f,e.createGeometryIndexFromDefinition=function(t,e,n){for(var r={header:{byteOffset:0,byteCount:t.offset,fields:{}},byteOffset:t.offset,byteCount:0,vertexAttributes:{},featureAttributes:{}},a=t.offset,o=function(t,e,n,r){var o="UInt64"===e.type?8:v(e.type),i={byteOffset:a,byteCount:o*e.component*n,count:n,valueType:e.type,valuesPerElement:e.component};a+=i.byteCount,r[t]=i},i=0,u=p;i<u.length;i++){var c=u[i];t[c[0]]&&o(c[1],t[c[0]],e,r.vertexAttributes)}for(var s=0,l=m;s<l.length;s++){var f=l[s];t[f[0]]&&o(f[1],t[f[0]],n,r.featureAttributes)}return r};var p=[["position","position"],["normal","normal"],["uv0","uv0"],["uv1","uv1"],["color","color"],["uvRegion","region"]],m=[["featureId","id"],["faceRange","faceRange"]];e.createGeometryIndexFromSchema=function(t,e){for(var n=u(t,e&&e.header),a=n.byteCount,o={header:n,byteOffset:n.byteCount,byteCount:0,vertexAttributes:r.clone(e.vertexAttributes)},i=o.vertexAttributes,c=n.fields,s=null!=c.vertexCount?c.vertexCount:c.count,l=0;l<e.ordering.length;l++){var f=e.ordering[l];null!=i[f]&&(i[f].byteOffset=a,i[f].count=s,a+=v(i[f].valueType)*i[f].valuesPerElement*s)}var h=c.faceCount;if(e.faces&&h){o.faces=r.clone(e.faces);var M=o.faces;for(l=0;l<e.ordering.length;l++){var p=e.ordering[l];null!=M[p]&&(M[p].byteOffset=a,M[p].count=h,a+=v(M[p].valueType)*M[p].valuesPerElement*h)}}var m=c.featureCount;if(e.featureAttributes&&e.featureAttributeOrder&&m){o.featureAttributes=r.clone(e.featureAttributes);var y=o.featureAttributes;for(l=0;l<e.featureAttributeOrder.length;l++){var b=e.featureAttributeOrder[l];y[b].byteOffset=a,y[b].count=m;var g=v(y[b].valueType);"UInt64"===y[b].valueType&&(g=8),a+=g*y[b].valuesPerElement*m}}return d(a,t.byteLength,"geometry"),o.byteCount=a-o.byteOffset,o},e.readBinaryAttribute=function(t,e,r){if("lepcc-rgb"===t.encoding)return o.decodeRGB(e);if("lepcc-intensity"===t.encoding)return o.decodeIntensity(e);if(null!=t.encoding&&""!==t.encoding)throw new n("unknown-attribute-storage-info-encoding","Unknown Attribute Storage Info Encoding");t["attributeByteCounts "]&&!t.attributeByteCounts&&(M.warn("Warning: Trailing space in 'attributeByteCounts '."),t.attributeByteCounts=t["attributeByteCounts "]),"ObjectIds"===t.ordering[0]&&t.hasOwnProperty("objectIds")&&(M.warn("Warning: Case error in objectIds"),t.ordering[0]="objectIds");var a=f(e,t,r);d(a.byteOffset+a.byteCount,e.byteLength,"attribute");var i=a.entries.attributeValues||a.entries.objectIds;if(i){if("String"===i.valueType){var u=a.entries.attributeByteCounts,h=s(e,u),v=l(e,i);return c(u.count,h,v)}return s(e,i)}throw new n("bad-attribute-storage-info","Bad attributeStorageInfo specification.")},e.valueType2TypedArrayClassMap={Float32:Float32Array,Float64:Float64Array,UInt8:Uint8Array,Int8:Int8Array,UInt16:Uint16Array,Int16:Int16Array,UInt32:Uint32Array,Int32:Int32Array},e.valueType2ArrayBufferReader={Float32:function(t,e){return new DataView(t,0).getFloat32(e,!0)},Float64:function(t,e){return new DataView(t,0).getFloat64(e,!0)},UInt8:function(t,e){return new DataView(t,0).getUint8(e)},Int8:function(t,e){return new DataView(t,0).getInt8(e)},UInt16:function(t,e){return new DataView(t,0).getUint16(e,!0)},Int16:function(t,e){return new DataView(t,0).getInt16(e,!0)},UInt32:function(t,e){return new DataView(t,0).getUint32(e,!0)},Int32:function(t,e){return new DataView(t,0).getInt32(e,!0)}},e.isValueType=h,e.getBytesPerValue=v}.apply(null,r))||(t.exports=a)},1110:function(t,e,n){var r,a;r=[n.dj.c(t.i),e],void 0===(a=function(t,e){function n(){return new Float32Array(3)}function r(t,e,n){var r=new Float32Array(3);return r[0]=t,r[1]=e,r[2]=n,r}function a(){return n()}function o(){return r(1,1,1)}function i(){return r(1,0,0)}function u(){return r(0,1,0)}function c(){return r(0,0,1)}Object.defineProperty(e,"__esModule",{value:!0}),e.create=n,e.clone=function(t){var e=new Float32Array(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},e.fromValues=r,e.createView=function(t,e){return new Float32Array(t,e,3)},e.zeros=a,e.ones=o,e.unitX=i,e.unitY=u,e.unitZ=c,e.ZEROS=a(),e.ONES=o(),e.UNIT_X=i(),e.UNIT_Y=u(),e.UNIT_Z=c()}.apply(null,r))||(t.exports=a)},1223:function(t,e,n){var r,a;r=[n.dj.c(t.i),e],void 0===(a=function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.create=function(){return[0,0,0,1]},e.clone=function(t){return[t[0],t[1],t[2],t[3]]},e.fromValues=function(t,e,n,r){return[t,e,n,r]},e.createView=function(t,e){return new Float64Array(t,e,4)}}.apply(null,r))||(t.exports=a)},1224:function(t,e,n){var r,a;r=[n.dj.c(t.i),e,n(11)],void 0===(a=function(t,e,n){function r(t,e,n){return{identifier:String.fromCharCode.apply(null,new Uint8Array(t,n+l.identifierOffset,l.identifierLength)),version:e.getUint16(n+l.versionOffset,s),checksum:e.getUint32(n+l.checksumOffset,s)}}function a(t,e){return{sizeLo:t.getUint32(e+f.sizeLo,s),sizeHi:t.getUint32(e+f.sizeHi,s),minX:t.getFloat64(e+f.minX,s),minY:t.getFloat64(e+f.minY,s),minZ:t.getFloat64(e+f.minZ,s),maxX:t.getFloat64(e+f.maxX,s),maxY:t.getFloat64(e+f.maxY,s),maxZ:t.getFloat64(e+f.maxZ,s),errorX:t.getFloat64(e+f.errorX,s),errorY:t.getFloat64(e+f.errorY,s),errorZ:t.getFloat64(e+f.errorZ,s),count:t.getUint32(e+f.count,s),reserved:t.getUint32(e+f.reserved,s)}}function o(t,e,n){var r=[];e=i(t,e,r);for(var a=[],o=0;o<r.length;o++){a.length=0,e=i(t,e,a);for(var u=0;u<a.length;u++)n.push(a[u]+r[o])}return e}function i(t,e,r){var a=new DataView(t,e),o=a.getUint8(0),i=31&o,u=!!(32&o),c=(192&o)>>6,l=0;if(0===c)l=a.getUint32(1,s),e+=5;else if(1===c)l=a.getUint16(1,s),e+=3;else{if(2!==c)throw new n("lepcc-decode-error","Bad count type");l=a.getUint8(1),e+=2}if(u)throw new n("lepcc-decode-error","LUT not implemented");for(var f=Math.ceil(l*i/8),d=new Uint8Array(t,e,f),h=0,v=0,M=0,p=-1>>>32-i,m=0;m<l;m++){for(;v<i;)h|=d[M]<<v,v+=8,M+=1;r[m]=h&p,h>>>=i,(v-=i)+i>32&&(h|=d[M-1]>>8-v)}return e+M}function u(t,e){return{sizeLo:t.getUint32(e+d.sizeLo,s),sizeHi:t.getUint32(e+d.sizeHi,s),count:t.getUint32(e+d.count,s),colorMapCount:t.getUint16(e+d.colorMapCount,s),lookupMethod:t.getUint8(e+d.lookupMethod),compressionMethod:t.getUint8(e+d.compressionMethod)}}function c(t,e){return{sizeLo:t.getUint32(e+h.sizeLo,s),sizeHi:t.getUint32(e+h.sizeHi,s),count:t.getUint32(e+h.count,s),scaleFactor:t.getUint16(e+h.scaleFactor,s),bitsPerPoint:t.getUint8(e+h.bitsPerPoint),reserved:t.getUint8(e+h.reserved)}}Object.defineProperty(e,"__esModule",{value:!0});var s=!0,l={identifierOffset:0,identifierLength:10,versionOffset:10,checksumOffset:12,byteCount:16},f={sizeLo:0,sizeHi:4,minX:8,minY:16,minZ:24,maxX:32,maxY:40,maxZ:48,errorX:56,errorY:64,errorZ:72,count:80,reserved:84,byteCount:88};e.decodeXYZ=function(t){var e=new DataView(t,0),i=0,u=r(t,e,i),c=u.identifier,s=u.version;if(i+=l.byteCount,"LEPCC     "!==c)throw new n("lepcc-decode-error","Bad identifier");if(s>1)throw new n("lepcc-decode-error","Unknown version");var d=a(e,i);if(i+=f.byteCount,d.sizeHi*Math.pow(2,32)+d.sizeLo!==t.byteLength)throw new n("lepcc-decode-error","Bad size");var h=new Float64Array(3*d.count),v=[],M=[],p=[],m=[];if(i=o(t,i,v),i=o(t,i,M),i=o(t,i,p),(i=o(t,i,m))!==t.byteLength)throw new n("lepcc-decode-error","Bad length");for(var y=0,b=0,g=0;g<v.length;g++){b+=v[g];for(var w=0,x=0;x<M[g];x++){w+=p[y];var I=m[y];h[3*y]=Math.min(d.maxX,d.minX+2*d.errorX*w),h[3*y+1]=Math.min(d.maxY,d.minY+2*d.errorY*b),h[3*y+2]=Math.min(d.maxZ,d.minZ+2*d.errorZ*I),y++}}return{errorX:d.errorX,errorY:d.errorY,errorZ:d.errorZ,result:h}};var d={sizeLo:0,sizeHi:4,count:8,colorMapCount:12,lookupMethod:14,compressionMethod:15,byteCount:16};e.decodeRGB=function(t){var e=new DataView(t,0),a=0,o=r(t,e,a),i=o.identifier,c=o.version;if(a+=l.byteCount,"ClusterRGB"!==i)throw new n("lepcc-decode-error","Bad identifier");if(c>1)throw new n("lepcc-decode-error","Unknown version");var s=u(e,a);if(a+=d.byteCount,s.sizeHi*Math.pow(2,32)+s.sizeLo!==t.byteLength)throw new n("lepcc-decode-error","Bad size");if((2===s.lookupMethod||1===s.lookupMethod)&&0===s.compressionMethod){if(3*s.colorMapCount+s.count+a!==t.byteLength||s.colorMapCount>256)throw new n("lepcc-decode-error","Bad count");for(var f=new Uint8Array(t,a,3*s.colorMapCount),h=new Uint8Array(t,a+3*s.colorMapCount,s.count),v=new Uint8Array(3*s.count),M=0;M<s.count;M++){var p=h[M];v[3*M]=f[3*p],v[3*M+1]=f[3*p+1],v[3*M+2]=f[3*p+2]}return v}if(0===s.lookupMethod&&0===s.compressionMethod){if(3*s.count+a!==t.byteLength||0!==s.colorMapCount)throw new n("lepcc-decode-error","Bad count");return new Uint8Array(t,a).slice()}if(s.lookupMethod<=2&&1===s.compressionMethod){if(a+3!==t.byteLength||1!==s.colorMapCount)throw new n("lepcc-decode-error","Bad count");var m=e.getUint8(a),y=e.getUint8(a+1),b=e.getUint8(a+2);for(v=new Uint8Array(3*s.count),M=0;M<s.count;M++)v[3*M]=m,v[3*M+1]=y,v[3*M+2]=b;return v}throw new n("lepcc-decode-error","Bad method "+s.lookupMethod+","+s.compressionMethod)};var h={sizeLo:0,sizeHi:4,count:8,scaleFactor:12,bitsPerPoint:14,reserved:15,byteCount:16};e.decodeIntensity=function(t){var e=new DataView(t,0),a=0,o=r(t,e,a),u=o.identifier,s=o.version;if(a+=l.byteCount,"Intensity "!==u)throw new n("lepcc-decode-error","Bad identifier");if(s>1)throw new n("lepcc-decode-error","Unknown version");var f=c(e,a);if(a+=h.byteCount,f.sizeHi*Math.pow(2,32)+f.sizeLo!==t.byteLength)throw new n("lepcc-decode-error","Bad size");var d=new Uint16Array(f.count);if(8===f.bitsPerPoint){if(f.count+a!==t.byteLength)throw new n("lepcc-decode-error","Bad size");for(var v=new Uint8Array(t,a,f.count),M=0;M<f.count;M++)d[M]=v[M]*f.scaleFactor}else if(16===f.bitsPerPoint){if(2*f.count+a!==t.byteLength)throw new n("lepcc-decode-error","Bad size");for(v=new Uint16Array(t,a,f.count),M=0;M<f.count;M++)d[M]=v[M]*f.scaleFactor}else{if(i(t,a,v=[])!==t.byteLength)throw new n("lepcc-decode-error","Bad size");for(M=0;M<f.count;M++)d[M]=v[M]*f.scaleFactor}return d}}.apply(null,r))||(t.exports=a)},1225:function(t,e,n){var r,a;r=[n.dj.c(t.i),e,n(66),n(133),n(169),n(273),n(38),n(994)],void 0===(a=function(t,e,n,r,a,o,i,u){function c(t,r,a,o){var u,c;t instanceof i&&r instanceof i&&(a=r.longitude,o=r.latitude,c=t.latitude,u=t.longitude);var s=n.deg2rad(c),l=n.deg2rad(o),f=s-l,d=n.deg2rad(u)-n.deg2rad(a),h=Math.sin(f/2),v=Math.sin(d/2),M=2*n.asinClamped(Math.sqrt(h*h+Math.cos(s)*Math.cos(l)*v*v))*e.earthRadius;return Math.round(1e4*M)/1e4}function s(t,r,a){var o=a/e.earthRadius,i=n.deg2rad(r),u=Math.sin(o/2),c=Math.cos(i),s=2*n.asinClamped(Math.sqrt(u*u/(c*c)));return n.rad2deg(s)}function l(t,r,a){return n.rad2deg(a/e.earthRadius)}function f(t,e){var n=t/15;return e||(n=Math.round(n)),n}Object.defineProperty(e,"__esModule",{value:!0}),e.earthRadius=r.wgs84Radius,e.halfEarthRadius=e.earthRadius/2,e.halfEarthCircumference=Math.PI*e.earthRadius,e.earthCircumference=2*e.halfEarthCircumference,e.metersPerDegree=e.halfEarthCircumference/180,e.getGreatCircleDistance=c,e.getGreatCircleSpanAt=function(t,e,n){var r=e.spatialReference,a=new i(e.x,t.y,r),o=new i(n.x,t.y,r),u=new i(t.x,e.y,r),s=new i(t.x,n.y,r);return{lon:c(a,o),lat:c(u,s)}},e.getLonDeltaForDistance=s,e.getLatDeltaForDistance=l,e.getLatLonDeltaForDistance=function(t,e,n){return{lat:l(0,0,n),lon:s(0,e,n)}},e.getMaxCameraAltitude=function(t){var r=t/2,a=n.deg2rad(r);return(1-Math.sin(a))*e.earthRadius/Math.sin(a)},e.getViewExtentDistance=function(t,r){var a=n.deg2rad(r/2),o=(t+e.earthRadius)*Math.cos(a)-Math.sqrt(Math.pow(Math.cos(a)*(t+e.earthRadius),2)-t*t-2*t*e.earthRadius);return 2*n.acosClamped((Math.pow(t+e.earthRadius,2)+Math.pow(e.earthRadius,2)-Math.pow(o,2))/(2*(t+e.earthRadius)*e.earthRadius))*e.earthRadius},e.computeCartesianDistance=function(t,e){var n=u.wgs84ComparableLonLatToECEF(d,t.longitude,t.latitude,t.z||0),r=u.wgs84ComparableLonLatToECEF(h,e.longitude,e.latitude,e.z||0),a=[r[0]-n[0],r[1]-n[1],r[2]-n[2]];return Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2])},e.longitudeToTimezone=f,e.positionToTimezone=function(t,e){e||(e={hours:0,minutes:0,seconds:0}),e.hours=f(t[0],!0);var n=e.hours%1;e.hours-=n,e.minutes=60*n;var r=e.minutes%1;return e.minutes-=r,e.seconds=Math.round(60*r),e},e.distanceToIdealHorizon=function(t,n){n=n||e.earthRadius;var r=a.vec3.dot(t,t),o=n*n;return Math.sqrt(Math.abs(r-o))};var d=o.vec3f64.create(),h=o.vec3f64.create()}.apply(null,r))||(t.exports=a)},1842:function(t,e,n){var r,a;r=[n.dj.c(t.i),e,n(897),n(1223),n(180),n(76),n(328),n(1050)],void 0===(a=function(t,e,n,r,a,o,i,u){function c(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function s(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=n[0],c=n[1],s=n[2],l=n[3];return t[0]=r*l+i*u+a*s-o*c,t[1]=a*l+i*c+o*u-r*s,t[2]=o*l+i*s+r*c-a*u,t[3]=i*l-r*u-a*c-o*s,t}function l(t,e,n,r){var a,i,u,c,s,l=e[0],f=e[1],d=e[2],h=e[3],v=n[0],M=n[1],p=n[2],m=n[3];return(i=l*v+f*M+d*p+h*m)<0&&(i=-i,v=-v,M=-M,p=-p,m=-m),1-i>o.EPSILON?(a=Math.acos(i),u=Math.sin(a),c=Math.sin((1-r)*a)/u,s=Math.sin(r*a)/u):(c=1-r,s=r),t[0]=c*l+s*v,t[1]=c*f+s*M,t[2]=c*d+s*p,t[3]=c*h+s*m,t}function f(t,e){var n,r=e[0]+e[4]+e[8];if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var a=0;e[4]>e[0]&&(a=1),e[8]>e[3*a+a]&&(a=2);var o=(a+1)%3,i=(a+2)%3;n=Math.sqrt(e[3*a+a]-e[3*o+o]-e[3*i+i]+1),t[a]=.5*n,n=.5/n,t[3]=(e[3*o+i]-e[3*i+o])*n,t[o]=(e[3*o+a]+e[3*a+o])*n,t[i]=(e[3*i+a]+e[3*a+i])*n}return t}Object.defineProperty(e,"__esModule",{value:!0}),e.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},e.setAxisAngle=c,e.getAxisAngle=function(t,e){var n=2*Math.acos(e[3]),r=Math.sin(n/2);return r>o.EPSILON?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n},e.multiply=s,e.rotateX=function(t,e,n){n*=.5;var r=e[0],a=e[1],o=e[2],i=e[3],u=Math.sin(n),c=Math.cos(n);return t[0]=r*c+i*u,t[1]=a*c+o*u,t[2]=o*c-a*u,t[3]=i*c-r*u,t},e.rotateY=function(t,e,n){n*=.5;var r=e[0],a=e[1],o=e[2],i=e[3],u=Math.sin(n),c=Math.cos(n);return t[0]=r*c-o*u,t[1]=a*c+i*u,t[2]=o*c+r*u,t[3]=i*c-a*u,t},e.rotateZ=function(t,e,n){n*=.5;var r=e[0],a=e[1],o=e[2],i=e[3],u=Math.sin(n),c=Math.cos(n);return t[0]=r*c+a*u,t[1]=a*c-r*u,t[2]=o*c+i*u,t[3]=i*c-o*u,t},e.calculateW=function(t,e){var n=e[0],r=e[1],a=e[2];return t[0]=n,t[1]=r,t[2]=a,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-a*a)),t},e.slerp=l,e.random=function(t){var e=o.RANDOM(),n=o.RANDOM(),r=o.RANDOM(),a=Math.sqrt(1-e),i=Math.sqrt(e);return t[0]=a*Math.sin(2*Math.PI*n),t[1]=a*Math.cos(2*Math.PI*n),t[2]=i*Math.sin(2*Math.PI*r),t[3]=i*Math.cos(2*Math.PI*r),t},e.invert=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=n*n+r*r+a*a+o*o,u=i?1/i:0;return t[0]=-n*u,t[1]=-r*u,t[2]=-a*u,t[3]=o*u,t},e.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},e.fromMat3=f,e.fromEuler=function(t,e,n,r){var a=.5*Math.PI/180;e*=a,n*=a,r*=a;var o=Math.sin(e),i=Math.cos(e),u=Math.sin(n),c=Math.cos(n),s=Math.sin(r),l=Math.cos(r);return t[0]=o*c*l-i*u*s,t[1]=i*u*l+o*c*s,t[2]=i*c*s-o*u*l,t[3]=i*c*l+o*u*s,t},e.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},e.copy=u.copy,e.set=u.set,e.add=u.add,e.mul=s,e.scale=u.scale,e.dot=u.dot,e.lerp=u.lerp,e.length=u.length,e.len=e.length,e.squaredLength=u.squaredLength,e.sqrLen=e.squaredLength,e.normalize=u.normalize,e.exactEquals=u.exactEquals,e.equals=u.equals,e.rotationTo=function(t,n,r){var a=i.dot(n,r);return a<-.999999?(i.cross(d,h,n),i.len(d)<1e-6&&i.cross(d,v,n),i.normalize(d,d),c(t,d,Math.PI),t):a>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(i.cross(d,n,r),t[0]=d[0],t[1]=d[1],t[2]=d[2],t[3]=1+a,e.normalize(t,t))};var d=a.create(),h=a.fromValues(1,0,0),v=a.fromValues(0,1,0);e.sqlerp=function(t,e,n,r,a,o){return l(M,e,a,o),l(p,n,r,o),l(t,M,p,2*o*(1-o)),t};var M=r.create(),p=r.create();e.setAxes=function(t,n,r,a){var o=m;return o[0]=r[0],o[3]=r[1],o[6]=r[2],o[1]=a[0],o[4]=a[1],o[7]=a[2],o[2]=-n[0],o[5]=-n[1],o[8]=-n[2],e.normalize(t,f(t,o))};var m=n.create()}.apply(null,r))||(t.exports=a)},1843:function(t,e,n){var r,a;r=[n.dj.c(t.i),e],void 0===(a=function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.create=function(){var t=new Float32Array(4);return t[3]=1,t},e.clone=function(t){var e=new Float32Array(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},e.fromValues=function(t,e,n,r){var a=new Float32Array(4);return a[0]=t,a[1]=e,a[2]=n,a[3]=r,a},e.createView=function(t,e){return new Float32Array(t,e,4)}}.apply(null,r))||(t.exports=a)},1845:function(t,e,n){var r,a;r=[n.dj.c(t.i),e],void 0===(a=function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.length=function(t,e){var n=t[e],r=t[e+1],a=t[e+2];return Math.sqrt(n*n+r*r+a*a)},t.normalize=function(t,e){var n=t[e],r=t[e+1],a=t[e+2],o=1/Math.sqrt(n*n+r*r+a*a);t[e]*=o,t[e+1]*=o,t[e+2]*=o},t.scale=function(t,e,n){t[e]*=n,t[e+1]*=n,t[e+2]*=n},t.add=function(t,e,n,r,a,o){void 0===o&&(o=e),(a=a||t)[o]=t[e]+n[r],a[o+1]=t[e+1]+n[r+1],a[o+2]=t[e+2]+n[r+2]},t.subtract=function(t,e,n,r,a,o){void 0===o&&(o=e),(a=a||t)[o]=t[e]-n[r],a[o+1]=t[e+1]-n[r+1],a[o+2]=t[e+2]-n[r+2]}}(e.Vec3Compact||(e.Vec3Compact={}))}.apply(null,r))||(t.exports=a)},878:function(t,e,n){var r,a;r=[n.dj.c(t.i),e,n(888)],void 0===(a=function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.mat4=n}.apply(null,r))||(t.exports=a)},884:function(t,e,n){var r,a;r=[n.dj.c(t.i),e,n(55)],void 0===(a=function(t,e,n){function r(t){return t&&"upperLeft"===t.originPosition}function a(t,e){var n=t.scale,r=t.translate;return Math.round((e-r[0])/n[0])}function o(t,e){var n=t.scale,r=t.translate;return Math.round((r[1]-e)/n[1])}function i(t,e,n){for(var r,i,u,c,s=[],l=0;l<n.length;l++){var f=n[l];l>0?(u=a(t,f[0]),c=o(t,f[1]),u===r&&c===i||(s.push(e(f,u-r,c-i)),r=u,i=c)):(r=a(t,f[0]),i=o(t,f[1]),s.push(e(f,r,i)))}return s.length>0?s:null}function u(t,e,n,r){return i(t,n?r?C:R:r?R:P,e)}function c(t,e,n,r){for(var a=[],o=n?r?C:R:r?R:P,u=0;u<e.length;u++){var c=i(t,o,e[u]);c&&c.length>=3&&a.push(c)}return a.length?a:null}function s(t,e,n,r){for(var a=[],o=n?r?C:R:r?R:P,u=0;u<e.length;u++){var c=i(t,o,e[u]);c&&c.length>=2&&a.push(c)}return a.length?a:null}function l(t,e){var n=t.scale,r=t.translate;return e*n[0]+r[0]}function f(t,e){var n=t.scale;return t.translate[1]-e*n[1]}function d(t,e,n){var r=new Array(n.length);if(!n.length)return r;var a=t.scale,o=a[0],i=a[1],u=l(t,n[0][0]),c=f(t,n[0][1]);r[0]=e(n[0],u,c);for(var s=1;s<n.length;s++){var d=n[s];u+=d[0]*o,c-=d[1]*i,r[s]=e(d,u,c)}return r}function h(t,e,n){for(var r=new Array(n.length),a=0;a<n.length;a++)r[a]=d(t,e,n[a]);return r}function v(t,e,n,r){return d(t,n?r?C:R:r?R:P,e)}function M(t,e,n,r){return h(t,n?r?C:R:r?R:P,e)}function p(t,e,n,r){return h(t,n?r?C:R:r?R:P,e)}function m(t,e,n){for(var r=n[0],a=r[0],o=r[1],i=Math.min(a,e[0]),u=Math.min(o,e[1]),c=Math.max(a,e[2]),s=Math.max(o,e[3]),l=1;l<n.length;l++){var f=n[l],d=f[0],h=f[1];a+=d,o+=h,d<0&&(i=Math.min(i,a)),d>0&&(c=Math.max(c,a)),h<0?u=Math.min(u,o):h>0&&(s=Math.max(s,o))}return t[0]=i,t[1]=u,t[2]=c,t[3]=s,t}function y(t,e){if(!e.length)return null;t[0]=t[1]=Number.POSITIVE_INFINITY,t[2]=t[3]=Number.NEGATIVE_INFINITY;for(var n=0;n<e.length;n++)m(t,t,e[n]);return t}function b(t,e,n,r,i){return e.xmin=a(t,n.xmin),e.ymin=o(t,n.ymin),e.xmax=a(t,n.xmax),e.ymax=o(t,n.ymax),e!==n&&(r&&(e.zmin=n.zmin,e.zmax=n.zmax),i&&(e.mmin=n.mmin,e.mmax=n.mmax)),e}function g(t,e,n,r,a){return e.points=u(t,n.points,r,a),e}function w(t,e,n,r,i){return e.x=a(t,n.x),e.y=o(t,n.y),e!==n&&(r&&(e.z=n.z),i&&(e.m=n.m)),e}function x(t,e,n,r,a){var o=c(t,n.rings,r,a);return o?(e.rings=o,e):null}function I(t,e,n,r,a){var o=s(t,n.paths,r,a);return o?(e.paths=o,e):null}Object.defineProperty(e,"__esModule",{value:!0});var P=function(t,e,n){return[e,n]},R=function(t,e,n){return[e,n,t[2]]},C=function(t,e,n){return[e,n,t[2],t[3]]};e.toQuantizationTransform=function(t){return t?{originPosition:"upperLeft",scale:[t.tolerance,t.tolerance],translate:[t.extent.xmin,t.extent.ymax]}:null},e.equals=function(t,e){return t===e||null==t&&null==e||null!=t&&null!=e&&(r(t)?(n=t.translate[0],a=t.translate[1],o=t.scale[0]):(n=t.extent.xmin,a=t.extent.ymax,o=t.tolerance),r(e)?(i=e.translate[0],u=e.translate[1],c=e.scale[0]):(i=e.extent.xmin,u=e.extent.ymax,c=e.tolerance),n===i&&a===u&&o===c);var n,a,o,i,u,c},e.quantizeX=a,e.quantizeY=o,e.quantizeBounds=function(t,e,n){return e[0]=a(t,n[0]),e[3]=o(t,n[1]),e[2]=a(t,n[2]),e[1]=o(t,n[3]),e},e.quantizePoints=u,e.quantizeRings=c,e.quantizePaths=s,e.hydrateX=l,e.hydrateY=f,e.hydrateCoordsArray=d,e.hydrateCoordsArrayArray=h,e.hydrateBounds=function(t,e,n){return n?(e[0]=l(t,n[0]),e[1]=f(t,n[3]),e[2]=l(t,n[2]),e[3]=f(t,n[1]),e):[l(t,e[0]),f(t,e[3]),l(t,e[2]),f(t,e[1])]},e.hydratePoints=v,e.hydratePaths=M,e.hydrateRings=p,e.getQuantizedBoundsCoordsArray=m,e.getQuantizedBoundsCoordsArrayArray=y,e.getQuantizedBoundsPoints=function(t){var e=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return m(e,e,t)},e.getQuantizedBoundsPaths=function(t){return y([0,0,0,0],t)},e.getQuantizedBoundsRings=function(t){return y([0,0,0,0],t)},e.quantizeExtent=b,e.quantizeMultipoint=g,e.quantizePoint=w,e.quantizePolygon=x,e.quantizePolyline=I,e.quantizeGeometry=function(t,e){return t&&e?n.isPoint(e)?w(t,{},e,!1,!1):n.isPolyline(e)?I(t,{},e,!1,!1):n.isPolygon(e)?x(t,{},e,!1,!1):n.isMultipoint(e)?g(t,{},e,!1,!1):n.isExtent(e)?b(t,{},e,!1,!1):null:null},e.hydrateExtent=function(t,e,n,r,a){return e.xmin=l(t,n.xmin),e.ymin=f(t,n.ymin),e.xmax=l(t,n.xmax),e.ymax=f(t,n.ymax),e!==n&&(r&&(e.zmin=n.zmin,e.zmax=n.zmax),a&&(e.mmin=n.mmin,e.mmax=n.mmax)),e},e.hydrateMultipoint=function(t,e,n,r,a){return e.points=v(t,n.points,r,a),e},e.hydratePoint=function(t,e,n,r,a){return e.x=l(t,n.x),e.y=f(t,n.y),e!==n&&(r&&(e.z=n.z),a&&(e.m=n.m)),e},e.hydratePolygon=function(t,e,n,r,a){return e.rings=p(t,n.rings,r,a),e},e.hydratePolyline=function(t,e,n,r,a){return e.paths=M(t,n.paths,r,a),e}}.apply(null,r))||(t.exports=a)},888:function(t,e,n){var r,a;r=[n.dj.c(t.i),e,n(180),n(76)],void 0===(a=function(t,e,n,r){function a(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function o(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],c=e[5],s=e[6],l=e[7],f=e[8],d=e[9],h=e[10],v=e[11],M=e[12],p=e[13],m=e[14],y=e[15],b=n[0],g=n[1],w=n[2],x=n[3];return t[0]=b*r+g*u+w*f+x*M,t[1]=b*a+g*c+w*d+x*p,t[2]=b*o+g*s+w*h+x*m,t[3]=b*i+g*l+w*v+x*y,b=n[4],g=n[5],w=n[6],x=n[7],t[4]=b*r+g*u+w*f+x*M,t[5]=b*a+g*c+w*d+x*p,t[6]=b*o+g*s+w*h+x*m,t[7]=b*i+g*l+w*v+x*y,b=n[8],g=n[9],w=n[10],x=n[11],t[8]=b*r+g*u+w*f+x*M,t[9]=b*a+g*c+w*d+x*p,t[10]=b*o+g*s+w*h+x*m,t[11]=b*i+g*l+w*v+x*y,b=n[12],g=n[13],w=n[14],x=n[15],t[12]=b*r+g*u+w*f+x*M,t[13]=b*a+g*c+w*d+x*p,t[14]=b*o+g*s+w*h+x*m,t[15]=b*i+g*l+w*v+x*y,t}function i(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=r+r,c=a+a,s=o+o,l=r*u,f=r*c,d=r*s,h=a*c,v=a*s,M=o*s,p=i*u,m=i*c,y=i*s;return t[0]=1-(h+M),t[1]=f+y,t[2]=d-m,t[3]=0,t[4]=f-y,t[5]=1-(l+M),t[6]=v+p,t[7]=0,t[8]=d+m,t[9]=v-p,t[10]=1-(l+h),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function u(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}Object.defineProperty(e,"__esModule",{value:!0}),e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.set=function(t,e,n,r,a,o,i,u,c,s,l,f,d,h,v,M,p){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t[4]=o,t[5]=i,t[6]=u,t[7]=c,t[8]=s,t[9]=l,t[10]=f,t[11]=d,t[12]=h,t[13]=v,t[14]=M,t[15]=p,t},e.identity=a,e.transpose=function(t,e){if(t===e){var n=e[1],r=e[2],a=e[3],o=e[6],i=e[7],u=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=a,t[13]=i,t[14]=u}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},e.invert=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=e[4],u=e[5],c=e[6],s=e[7],l=e[8],f=e[9],d=e[10],h=e[11],v=e[12],M=e[13],p=e[14],m=e[15],y=n*u-r*i,b=n*c-a*i,g=n*s-o*i,w=r*c-a*u,x=r*s-o*u,I=a*s-o*c,P=l*M-f*v,R=l*p-d*v,C=l*m-h*v,T=f*p-d*M,O=f*m-h*M,A=d*m-h*p,E=y*A-b*O+g*T+w*C-x*R+I*P;return E?(E=1/E,t[0]=(u*A-c*O+s*T)*E,t[1]=(a*O-r*A-o*T)*E,t[2]=(M*I-p*x+m*w)*E,t[3]=(d*x-f*I-h*w)*E,t[4]=(c*C-i*A-s*R)*E,t[5]=(n*A-a*C+o*R)*E,t[6]=(p*g-v*I-m*b)*E,t[7]=(l*I-d*g+h*b)*E,t[8]=(i*O-u*C+s*P)*E,t[9]=(r*C-n*O-o*P)*E,t[10]=(v*x-M*g+m*y)*E,t[11]=(f*g-l*x-h*y)*E,t[12]=(u*R-i*T-c*P)*E,t[13]=(n*T-r*R+a*P)*E,t[14]=(M*b-v*w-p*y)*E,t[15]=(l*w-f*b+d*y)*E,t):null},e.adjoint=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=e[4],u=e[5],c=e[6],s=e[7],l=e[8],f=e[9],d=e[10],h=e[11],v=e[12],M=e[13],p=e[14],m=e[15];return t[0]=u*(d*m-h*p)-f*(c*m-s*p)+M*(c*h-s*d),t[1]=-(r*(d*m-h*p)-f*(a*m-o*p)+M*(a*h-o*d)),t[2]=r*(c*m-s*p)-u*(a*m-o*p)+M*(a*s-o*c),t[3]=-(r*(c*h-s*d)-u*(a*h-o*d)+f*(a*s-o*c)),t[4]=-(i*(d*m-h*p)-l*(c*m-s*p)+v*(c*h-s*d)),t[5]=n*(d*m-h*p)-l*(a*m-o*p)+v*(a*h-o*d),t[6]=-(n*(c*m-s*p)-i*(a*m-o*p)+v*(a*s-o*c)),t[7]=n*(c*h-s*d)-i*(a*h-o*d)+l*(a*s-o*c),t[8]=i*(f*m-h*M)-l*(u*m-s*M)+v*(u*h-s*f),t[9]=-(n*(f*m-h*M)-l*(r*m-o*M)+v*(r*h-o*f)),t[10]=n*(u*m-s*M)-i*(r*m-o*M)+v*(r*s-o*u),t[11]=-(n*(u*h-s*f)-i*(r*h-o*f)+l*(r*s-o*u)),t[12]=-(i*(f*p-d*M)-l*(u*p-c*M)+v*(u*d-c*f)),t[13]=n*(f*p-d*M)-l*(r*p-a*M)+v*(r*d-a*f),t[14]=-(n*(u*p-c*M)-i*(r*p-a*M)+v*(r*c-a*u)),t[15]=n*(u*d-c*f)-i*(r*d-a*f)+l*(r*c-a*u),t},e.determinant=function(t){var e=t[0],n=t[1],r=t[2],a=t[3],o=t[4],i=t[5],u=t[6],c=t[7],s=t[8],l=t[9],f=t[10],d=t[11],h=t[12],v=t[13],M=t[14],p=t[15];return(e*i-n*o)*(f*p-d*M)-(e*u-r*o)*(l*p-d*v)+(e*c-a*o)*(l*M-f*v)+(n*u-r*i)*(s*p-d*h)-(n*c-a*i)*(s*M-f*h)+(r*c-a*u)*(s*v-l*h)},e.multiply=o,e.translate=function(t,e,n){var r=n[0],a=n[1],o=n[2],i=void 0,u=void 0,c=void 0,s=void 0,l=void 0,f=void 0,d=void 0,h=void 0,v=void 0,M=void 0,p=void 0,m=void 0;return e===t?(t[12]=e[0]*r+e[4]*a+e[8]*o+e[12],t[13]=e[1]*r+e[5]*a+e[9]*o+e[13],t[14]=e[2]*r+e[6]*a+e[10]*o+e[14],t[15]=e[3]*r+e[7]*a+e[11]*o+e[15]):(i=e[0],u=e[1],c=e[2],s=e[3],l=e[4],f=e[5],d=e[6],h=e[7],v=e[8],M=e[9],p=e[10],m=e[11],t[0]=i,t[1]=u,t[2]=c,t[3]=s,t[4]=l,t[5]=f,t[6]=d,t[7]=h,t[8]=v,t[9]=M,t[10]=p,t[11]=m,t[12]=i*r+l*a+v*o+e[12],t[13]=u*r+f*a+M*o+e[13],t[14]=c*r+d*a+p*o+e[14],t[15]=s*r+h*a+m*o+e[15]),t},e.scale=function(t,e,n){var r=n[0],a=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*a,t[5]=e[5]*a,t[6]=e[6]*a,t[7]=e[7]*a,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.rotate=function(t,e,n,a){var o=a[0],i=a[1],u=a[2],c=Math.sqrt(o*o+i*i+u*u),s=void 0,l=void 0,f=void 0,d=void 0,h=void 0,v=void 0,M=void 0,p=void 0,m=void 0,y=void 0,b=void 0,g=void 0,w=void 0,x=void 0,I=void 0,P=void 0,R=void 0,C=void 0,T=void 0,O=void 0,A=void 0,E=void 0,z=void 0,S=void 0;return c<r.EPSILON?null:(o*=c=1/c,i*=c,u*=c,s=Math.sin(n),f=1-(l=Math.cos(n)),d=e[0],h=e[1],v=e[2],M=e[3],p=e[4],m=e[5],y=e[6],b=e[7],g=e[8],w=e[9],x=e[10],I=e[11],P=o*o*f+l,R=i*o*f+u*s,C=u*o*f-i*s,T=o*i*f-u*s,O=i*i*f+l,A=u*i*f+o*s,E=o*u*f+i*s,z=i*u*f-o*s,S=u*u*f+l,t[0]=d*P+p*R+g*C,t[1]=h*P+m*R+w*C,t[2]=v*P+y*R+x*C,t[3]=M*P+b*R+I*C,t[4]=d*T+p*O+g*A,t[5]=h*T+m*O+w*A,t[6]=v*T+y*O+x*A,t[7]=M*T+b*O+I*A,t[8]=d*E+p*z+g*S,t[9]=h*E+m*z+w*S,t[10]=v*E+y*z+x*S,t[11]=M*E+b*z+I*S,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},e.rotateX=function(t,e,n){var r=Math.sin(n),a=Math.cos(n),o=e[4],i=e[5],u=e[6],c=e[7],s=e[8],l=e[9],f=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*a+s*r,t[5]=i*a+l*r,t[6]=u*a+f*r,t[7]=c*a+d*r,t[8]=s*a-o*r,t[9]=l*a-i*r,t[10]=f*a-u*r,t[11]=d*a-c*r,t},e.rotateY=function(t,e,n){var r=Math.sin(n),a=Math.cos(n),o=e[0],i=e[1],u=e[2],c=e[3],s=e[8],l=e[9],f=e[10],d=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*a-s*r,t[1]=i*a-l*r,t[2]=u*a-f*r,t[3]=c*a-d*r,t[8]=o*r+s*a,t[9]=i*r+l*a,t[10]=u*r+f*a,t[11]=c*r+d*a,t},e.rotateZ=function(t,e,n){var r=Math.sin(n),a=Math.cos(n),o=e[0],i=e[1],u=e[2],c=e[3],s=e[4],l=e[5],f=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*a+s*r,t[1]=i*a+l*r,t[2]=u*a+f*r,t[3]=c*a+d*r,t[4]=s*a-o*r,t[5]=l*a-i*r,t[6]=f*a-u*r,t[7]=d*a-c*r,t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromRotation=function(t,e,n){var a=n[0],o=n[1],i=n[2],u=Math.sqrt(a*a+o*o+i*i),c=void 0,s=void 0,l=void 0;return u<r.EPSILON?null:(a*=u=1/u,o*=u,i*=u,c=Math.sin(e),l=1-(s=Math.cos(e)),t[0]=a*a*l+s,t[1]=o*a*l+i*c,t[2]=i*a*l-o*c,t[3]=0,t[4]=a*o*l-i*c,t[5]=o*o*l+s,t[6]=i*o*l+a*c,t[7]=0,t[8]=a*i*l+o*c,t[9]=o*i*l-a*c,t[10]=i*i*l+s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},e.fromXRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromYRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromZRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromRotationTranslation=i,e.fromQuat2=function(t,e){var n=c,r=-e[0],a=-e[1],o=-e[2],u=e[3],s=e[4],l=e[5],f=e[6],d=e[7],h=r*r+a*a+o*o+u*u;return h>0?(n[0]=2*(s*u+d*r+l*o-f*a)/h,n[1]=2*(l*u+d*a+f*r-s*o)/h,n[2]=2*(f*u+d*o+s*a-l*r)/h):(n[0]=2*(s*u+d*r+l*o-f*a),n[1]=2*(l*u+d*a+f*r-s*o),n[2]=2*(f*u+d*o+s*a-l*r)),i(t,e,n),t};var c=n.create();e.getTranslation=function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},e.getScaling=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[4],i=e[5],u=e[6],c=e[8],s=e[9],l=e[10];return t[0]=Math.sqrt(n*n+r*r+a*a),t[1]=Math.sqrt(o*o+i*i+u*u),t[2]=Math.sqrt(c*c+s*s+l*l),t},e.getRotation=function(t,e){var n=e[0]+e[5]+e[10],r=0;return n>0?(r=2*Math.sqrt(n+1),t[3]=.25*r,t[0]=(e[6]-e[9])/r,t[1]=(e[8]-e[2])/r,t[2]=(e[1]-e[4])/r):e[0]>e[5]&&e[0]>e[10]?(r=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/r,t[0]=.25*r,t[1]=(e[1]+e[4])/r,t[2]=(e[8]+e[2])/r):e[5]>e[10]?(r=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/r,t[0]=(e[1]+e[4])/r,t[1]=.25*r,t[2]=(e[6]+e[9])/r):(r=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/r,t[0]=(e[8]+e[2])/r,t[1]=(e[6]+e[9])/r,t[2]=.25*r),t},e.fromRotationTranslationScale=function(t,e,n,r){var a=e[0],o=e[1],i=e[2],u=e[3],c=a+a,s=o+o,l=i+i,f=a*c,d=a*s,h=a*l,v=o*s,M=o*l,p=i*l,m=u*c,y=u*s,b=u*l,g=r[0],w=r[1],x=r[2];return t[0]=(1-(v+p))*g,t[1]=(d+b)*g,t[2]=(h-y)*g,t[3]=0,t[4]=(d-b)*w,t[5]=(1-(f+p))*w,t[6]=(M+m)*w,t[7]=0,t[8]=(h+y)*x,t[9]=(M-m)*x,t[10]=(1-(f+v))*x,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},e.fromRotationTranslationScaleOrigin=function(t,e,n,r,a){var o=e[0],i=e[1],u=e[2],c=e[3],s=o+o,l=i+i,f=u+u,d=o*s,h=o*l,v=o*f,M=i*l,p=i*f,m=u*f,y=c*s,b=c*l,g=c*f,w=r[0],x=r[1],I=r[2],P=a[0],R=a[1],C=a[2],T=(1-(M+m))*w,O=(h+g)*w,A=(v-b)*w,E=(h-g)*x,z=(1-(d+m))*x,S=(p+y)*x,L=(v+b)*I,U=(p-y)*I,q=(1-(d+M))*I;return t[0]=T,t[1]=O,t[2]=A,t[3]=0,t[4]=E,t[5]=z,t[6]=S,t[7]=0,t[8]=L,t[9]=U,t[10]=q,t[11]=0,t[12]=n[0]+P-(T*P+E*R+L*C),t[13]=n[1]+R-(O*P+z*R+U*C),t[14]=n[2]+C-(A*P+S*R+q*C),t[15]=1,t},e.fromQuat=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=n+n,u=r+r,c=a+a,s=n*i,l=r*i,f=r*u,d=a*i,h=a*u,v=a*c,M=o*i,p=o*u,m=o*c;return t[0]=1-f-v,t[1]=l+m,t[2]=d-p,t[3]=0,t[4]=l-m,t[5]=1-s-v,t[6]=h+M,t[7]=0,t[8]=d+p,t[9]=h-M,t[10]=1-s-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.frustum=function(t,e,n,r,a,o,i){var u=1/(n-e),c=1/(a-r),s=1/(o-i);return t[0]=2*o*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*c,t[6]=0,t[7]=0,t[8]=(n+e)*u,t[9]=(a+r)*c,t[10]=(i+o)*s,t[11]=-1,t[12]=0,t[13]=0,t[14]=i*o*2*s,t[15]=0,t},e.perspective=function(t,e,n,r,a){var o=1/Math.tan(e/2),i=void 0;return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=a&&a!==1/0?(i=1/(r-a),t[10]=(a+r)*i,t[14]=2*a*r*i):(t[10]=-1,t[14]=-2*r),t},e.perspectiveFromFieldOfView=function(t,e,n,r){var a=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),i=Math.tan(e.leftDegrees*Math.PI/180),u=Math.tan(e.rightDegrees*Math.PI/180),c=2/(i+u),s=2/(a+o);return t[0]=c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=-(i-u)*c*.5,t[9]=(a-o)*s*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t},e.ortho=function(t,e,n,r,a,o,i){var u=1/(e-n),c=1/(r-a),s=1/(o-i);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*s,t[11]=0,t[12]=(e+n)*u,t[13]=(a+r)*c,t[14]=(i+o)*s,t[15]=1,t},e.lookAt=function(t,e,n,o){var i=void 0,u=void 0,c=void 0,s=void 0,l=void 0,f=void 0,d=void 0,h=void 0,v=void 0,M=void 0,p=e[0],m=e[1],y=e[2],b=o[0],g=o[1],w=o[2],x=n[0],I=n[1],P=n[2];return Math.abs(p-x)<r.EPSILON&&Math.abs(m-I)<r.EPSILON&&Math.abs(y-P)<r.EPSILON?a(t):(d=p-x,h=m-I,v=y-P,i=g*(v*=M=1/Math.sqrt(d*d+h*h+v*v))-w*(h*=M),u=w*(d*=M)-b*v,c=b*h-g*d,(M=Math.sqrt(i*i+u*u+c*c))?(i*=M=1/M,u*=M,c*=M):(i=0,u=0,c=0),s=h*c-v*u,l=v*i-d*c,f=d*u-h*i,(M=Math.sqrt(s*s+l*l+f*f))?(s*=M=1/M,l*=M,f*=M):(s=0,l=0,f=0),t[0]=i,t[1]=s,t[2]=d,t[3]=0,t[4]=u,t[5]=l,t[6]=h,t[7]=0,t[8]=c,t[9]=f,t[10]=v,t[11]=0,t[12]=-(i*p+u*m+c*y),t[13]=-(s*p+l*m+f*y),t[14]=-(d*p+h*m+v*y),t[15]=1,t)},e.targetTo=function(t,e,n,r){var a=e[0],o=e[1],i=e[2],u=r[0],c=r[1],s=r[2],l=a-n[0],f=o-n[1],d=i-n[2],h=l*l+f*f+d*d;h>0&&(l*=h=1/Math.sqrt(h),f*=h,d*=h);var v=c*d-s*f,M=s*l-u*d,p=u*f-c*l;return(h=v*v+M*M+p*p)>0&&(v*=h=1/Math.sqrt(h),M*=h,p*=h),t[0]=v,t[1]=M,t[2]=p,t[3]=0,t[4]=f*p-d*M,t[5]=d*v-l*p,t[6]=l*M-f*v,t[7]=0,t[8]=l,t[9]=f,t[10]=d,t[11]=0,t[12]=a,t[13]=o,t[14]=i,t[15]=1,t},e.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t},e.subtract=u,e.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t},e.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},e.equals=function(t,e){var n=t[0],a=t[1],o=t[2],i=t[3],u=t[4],c=t[5],s=t[6],l=t[7],f=t[8],d=t[9],h=t[10],v=t[11],M=t[12],p=t[13],m=t[14],y=t[15],b=e[0],g=e[1],w=e[2],x=e[3],I=e[4],P=e[5],R=e[6],C=e[7],T=e[8],O=e[9],A=e[10],E=e[11],z=e[12],S=e[13],L=e[14],U=e[15];return Math.abs(n-b)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(a-g)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(o-w)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(w))&&Math.abs(i-x)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(u-I)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(I))&&Math.abs(c-P)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(P))&&Math.abs(s-R)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(R))&&Math.abs(l-C)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(C))&&Math.abs(f-T)<=r.EPSILON*Math.max(1,Math.abs(f),Math.abs(T))&&Math.abs(d-O)<=r.EPSILON*Math.max(1,Math.abs(d),Math.abs(O))&&Math.abs(h-A)<=r.EPSILON*Math.max(1,Math.abs(h),Math.abs(A))&&Math.abs(v-E)<=r.EPSILON*Math.max(1,Math.abs(v),Math.abs(E))&&Math.abs(M-z)<=r.EPSILON*Math.max(1,Math.abs(M),Math.abs(z))&&Math.abs(p-S)<=r.EPSILON*Math.max(1,Math.abs(p),Math.abs(S))&&Math.abs(m-L)<=r.EPSILON*Math.max(1,Math.abs(m),Math.abs(L))&&Math.abs(y-U)<=r.EPSILON*Math.max(1,Math.abs(y),Math.abs(U))},e.mul=o,e.sub=u}.apply(null,r))||(t.exports=a)},897:function(t,e,n){var r,a;r=[n.dj.c(t.i),e],void 0===(a=function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.create=function(){return[1,0,0,0,1,0,0,0,1]},e.clone=function(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]},e.fromValues=function(t,e,n,r,a,o,i,u,c){return[t,e,n,r,a,o,i,u,c]},e.createView=function(t,e){return new Float64Array(t,e,9)}}.apply(null,r))||(t.exports=a)},934:function(t,e,n){var r,a;r=[n.dj.c(t.i),e,n(1110)],void 0===(a=function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.vec3f32=n}.apply(null,r))||(t.exports=a)},994:function(t,e,n){var r,a;r=[n.dj.c(t.i),e,n(66),n(16),n(78),n(878),n(169),n(273),n(38),n(26),n(168),n(974),n(1225),n(1845)],void 0===(a=function(t,e,n,r,a,o,i,u,c,s,l,f,d,h){function v(t,e,n,r){return 2===t.length?(G[0]=t[0],G[1]=t[1],G[2]=0,t=G):t===n&&(i.vec3.copy(G,t),t=G),M(t,e,0,n,r,0,1)}function M(t,e,n,a,o,i,u){void 0===u&&(u=1);var c=C(e,o,_);if(r.isNone(c))return!1;if(c===m){if(t===a&&n===i)return!0;for(var s=n+3*u,l=n,f=i;l<s;l++,f++)a[f]=t[l];return!0}var d=n+3*u;for(l=n,f=i;l<d;l+=3,f+=3)c(t,l,a,f);return!0}function p(t,n){return n.spatialReference===t?n.spatialReferenceId:(n.spatialReference=t,"metersPerUnit"in n&&(n.metersPerUnit=a.getMetersPerUnitForSR(t,1)),t.wkt===e.SphericalECEFSpatialReference.wkt?n.spatialReferenceId=1:t.isWGS84?n.spatialReferenceId=2:t.isWebMercator?n.spatialReferenceId=3:t.wkt===e.WGS84ECEFSpatialReference.wkt?n.spatialReferenceId=4:4490===t.wkid?n.spatialReferenceId=5:n.spatialReferenceId=0)}function m(t,e,n,r){n[r++]=t[e++],n[r++]=t[e++],n[r]=t[e]}function y(t,e,n,r){n[r++]=V*(t[e++]/d.earthRadius),n[r++]=V*(Math.PI/2-2*Math.atan(Math.exp(-1*t[e++]/d.earthRadius))),n[r]=t[e]}function b(t,e,r,a){var o=.4999999*Math.PI,i=n.clamp(D*t[e+1],-o,o),u=Math.sin(i);r[a++]=D*t[e]*d.earthRadius,r[a++]=d.halfEarthRadius*Math.log((1+u)/(1-u)),r[a]=t[e+2]}function g(t,e,n){var a=p(e,F),o=N[a][6];return!r.isNone(o)&&(o(t,0,G,0),n!==G&&(n[0]=G[0],n[1]=G[1],n.length>2&&(n[2]=G[2])),!0)}function w(t,e){return G[0]=t.x,G[1]=t.y,G[2]=t.hasZ?t.z:0,g(G,t.spatialReference,e)}function x(t,e,n,r){var a=d.earthRadius+t[e+2],o=D*t[e+1],i=D*t[e],u=Math.cos(o);n[r++]=Math.cos(i)*u*a,n[r++]=Math.sin(i)*u*a,n[r]=Math.sin(o)*a}function I(t,e,r,a){var o=h.Vec3Compact.length(t,e),i=n.asinClamped(t[e+2]/(0===o?1:o)),u=Math.cos(i)*o,c=(t[e+1]>0?1:-1)*n.acosClamped(t[e]/(0===u?1:u));r[a++]=V*c,r[a++]=V*i,r[a]=o-d.earthRadius}function P(t,e,n,r){var a=Y,o=D*t[e],i=D*t[e+1],u=t[e+2],c=Math.sin(i),s=Math.cos(i),l=a.a/Math.sqrt(1-a.e2*c*c);n[r++]=(l+u)*s*Math.cos(o),n[r++]=(l+u)*s*Math.sin(o),n[r++]=(l*(1-a.e2)+u)*c}function R(t,e,n,r){var a,o,i,u,c,s,l,f,d,h,v,M,p,m,y,b,g,w,x,I,P,R=Y,C=t[e],T=t[e+1],O=t[e+2];a=Math.abs(O),o=C*C+T*T,i=Math.sqrt(o),u=o+O*O,c=Math.sqrt(u),I=Math.atan2(T,C),s=O*O/u,l=o/u,m=R.a2/c,y=R.a3-R.a4/c,l>.3?(f=a/c*(1+l*(R.a1+m+s*y)/c),x=Math.asin(f),h=f*f,d=Math.sqrt(1-h)):(d=i/c*(1-s*(R.a5-m-l*y)/c),x=Math.acos(d),h=1-d*d,f=Math.sqrt(h)),v=1-R.e2*h,M=R.a/Math.sqrt(v),x+=w=(b=d*(y=a-(p=R.a6*M)*f)-f*(m=i-M*d))/(p/v+(g=d*m+f*y)),P=g+b*w/2,O<0&&(x=-x),n[r++]=V*I,n[r++]=V*x,n[r]=P}function C(t,e,n){return T(t,e,n).projector}function T(t,e,n){if(n.source.spatialReference===t&&n.dest.spatialReference===e)return n;var r=p(t,n.source),a=p(e,n.dest);return 0===r&&0===a?t.equals(e)?n.projector=m:n.projector=null:n.projector=N[r][a],n}var O,A,E,z,S,L,U,q;Object.defineProperty(e,"__esModule",{value:!0}),e.SphericalECEFSpatialReference=new s({wkt:'GEOCCS["Spherical geocentric",\n  DATUM["Not specified",\n    SPHEROID["Sphere",\' + earthUtils.earthRadius + \',0]],\n  PRIMEM["Greenwich",0.0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",EAST],\n  AXIS["Geocentric Z",NORTH]\n]'}),e.WGS84ECEFSpatialReference=new s({wkt:'GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",6378137,298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]'}),e.canProject=function(t,e){return!!C(t,e,_)},e.vectorToVector=v,e.pointToPoint=function(t,e,n,r){void 0===n&&(n=e.spatialReference),void 0===r&&(r=0),G[0]=t.x,G[1]=t.y;var a=t.z;return G[2]=void 0!==a?a:r,!!M(G,t.spatialReference,0,G,n,0,1)&&(e.x=G[0],e.y=G[1],e.spatialReference=n,void 0!==a?(e.z=G[2],e.hasZ=!0):(e.z=void 0,e.hasZ=!1),!0)},e.pointToVector=function(t,e,n,r){void 0===r&&(r=0),G[0]=t.x,G[1]=t.y;var a=t.z;return G[2]=void 0!==a?a:r,M(G,t.spatialReference,0,e,n,0,1)},e.vectorToPoint=function(t,e,n,r){var a;return n instanceof c?(a=n,r=r||a.spatialReference):f.isPoint(n)?((a=n).hasZ=!0,r=r||a.spatialReference):a=new c({spatialReference:r=n}),M(t,e,0,G,r,0,1)?(a.x=G[0],a.y=G[1],a.z=G[2],a.spatialReference=r,a):null},e.xyzToVector=function(t,e,n,r,a,o){return G[0]=t,G[1]=e,G[2]=n,M(G,r,0,a,o,0,1)},e.bufferToBuffer=M,e.computeLinearTransformation=function(t,e,n,a){var i=p(t,F),u=p(a,j);if(i===u&&1!==u&&(0!==i||t.equals(a)))return o.mat4.identity(n),o.mat4.translate(n,n,e),!0;if(1===u){var c=N[i][6],s=N[6][u];if(r.isNone(c)||r.isNone(s))return!1;c(e,0,X,0),s(X,0,k,0);var l=D*X[0],f=D*X[1],d=Math.sin(l),h=Math.cos(l),v=Math.sin(f),M=Math.cos(f),m=n;return m[0]=-d,m[4]=-v*h,m[8]=M*h,m[12]=k[0],m[1]=h,m[5]=-v*d,m[9]=M*d,m[13]=k[1],m[2]=0,m[6]=M,m[10]=v,m[14]=k[2],m[3]=0,m[7]=0,m[11]=0,m[15]=1,!0}if(3===u&&(2===i||1===i)){c=N[i][6];var y=N[6][3];if(r.isNone(c)||r.isNone(y))return!1;c(e,0,X,0);var b=D*X[1];y(X,0,k,0),o.mat4.identity(n),o.mat4.translate(n,n,k);var g=1/Math.cos(b);return o.mat4.scale(n,n,[g,g,1]),!0}return!1},e.transformDirection=function(t,e,n,r,a){i.vec3.copy(H,t),i.vec3.add(Z,t,e),v(H,n,H,a),v(Z,n,Z,a),i.vec3.subtract(r,Z,H),i.vec3.normalize(r,r)},e.mbsToMbs=function(t,e,n,a){var o=T(e,a,B);if(o.projector===m)return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],!0;if(r.isNone(o.projector))return!1;var i=o.source,u=o.dest;if(3===u.spatialReferenceId){var c=N[i.spatialReferenceId][2];if(r.isNone(c))return!1;c(t,0,X,0);var s=Math.abs(D*X[1])+Math.asin(t[3]/(d.earthRadius+t[2]));if(b(X,0,n,0),s>.9999*Math.PI)n[3]=Number.MAX_VALUE;else{var l=1/Math.cos(s);n[3]=l*t[3]}return!0}return o.projector(t,0,n,0),n[3]=t[3]*i.metersPerUnit/u.metersPerUnit,!0},e.extentToBoundingBox=function(t,e,n){if(null==t)return!1;var r=!0;return G[0]=null!=t.xmin?t.xmin:0,G[1]=null!=t.ymin?t.ymin:0,G[2]=null!=t.zmin?t.zmin:0,r=r&&M(G,t.spatialReference,0,e,n,0,1),G[0]=null!=t.xmax?t.xmax:0,G[1]=null!=t.ymax?t.ymax:0,G[2]=null!=t.zmax?t.zmax:0,r=r&&M(G,t.spatialReference,0,e,n,3,1),null==t.xmin&&(e[0]=-1/0),null==t.ymin&&(e[1]=-1/0),null==t.zmin&&(e[2]=-1/0),null==t.xmax&&(e[3]=1/0),null==t.ymax&&(e[4]=1/0),null==t.zmax&&(e[5]=1/0),r},e.extentToBoundingRect=function(t,e,n){if(null==t)return!1;var r=!0;return G[0]=null!=t.xmin?t.xmin:0,G[1]=null!=t.ymin?t.ymin:0,G[2]=null!=t.zmin?t.zmin:0,r=r&&M(G,t.spatialReference,0,G,n,0,1),e[0]=G[0],e[1]=G[1],G[0]=null!=t.xmax?t.xmax:0,G[1]=null!=t.ymax?t.ymax:0,G[2]=null!=t.zmax?t.zmax:0,r=r&&M(G,t.spatialReference,0,G,n,0,1),e[2]=G[0],e[3]=G[1],null==t.xmin&&(e[0]=-1/0),null==t.ymin&&(e[1]=-1/0),null==t.xmax&&(e[2]=1/0),null==t.ymax&&(e[3]=1/0),r},e.boundingRectToBoundingRect=function(t,e,n,r){if(null==t)return!1;if(e.equals(r))return l.set(n,t),!0;var a=!0;return G[0]=t[0],G[1]=t[1],G[2]=0,a=a&&M(G,e,0,G,r,0,1),n[0]=G[0],n[1]=G[1],G[0]=t[2],G[1]=t[3],G[2]=0,a=a&&M(G,e,0,G,r,0,1),n[2]=G[0],n[3]=G[1],a},function(t){t.x2lon=function(t){return t/d.earthRadius},t.y2lat=function(t){return Math.PI/2-2*Math.atan(Math.exp(-1*t/d.earthRadius))},t.lon2x=function(t){return t*d.earthRadius},t.lat2y=function(t){var e=Math.sin(t);return d.earthRadius/2*Math.log((1+e)/(1-e))}}(e.webMercator||(e.webMercator={})),e.canProjectToWGS84ComparableLonLat=function(t){var e=p(t,F);return!!N[e][6]},e.vectorToWGS84ComparableLonLat=g,e.pointToWGS84ComparableLonLat=w,e.pointToWGS84ComparableLonLatPoint=function(t,e){var n=p(e.spatialReference,j);return!r.isNone(N[6][n])&&!!w(t,G)&&(e.x=G[0],e.y=G[1],e.z=G[2],!0)},e.wgs84ComparableLonLatToECEF=function(t,e,n,r){void 0===r&&(r=0);var a=d.earthRadius+r,o=Math.cos(n);t[0]=Math.cos(e)*o*a,t[1]=Math.sin(e)*o*a,t[2]=Math.sin(n)*a};var N=((O={})[2]=((A={})[5]=null,A[6]=m,A[1]=x,A[0]=null,A[3]=b,A[2]=m,A[4]=P,A),O[5]=((E={})[5]=m,E[6]=m,E[1]=x,E[0]=null,E[3]=null,E[2]=null,E[4]=P,E),O[3]=((z={})[5]=null,z[6]=y,z[1]=function(t,e,n,r){y(t,e,n,r),x(n,r,n,r)},z[0]=null,z[3]=m,z[2]=y,z[4]=function(t,e,n,r){y(t,e,n,r),P(n,r,n,r)},z),O[4]=((S={})[5]=R,S[6]=R,S[1]=function(t,e,n,r){R(t,e,n,r),x(n,r,n,r)},S[0]=null,S[3]=function(t,e,n,r){R(t,e,n,r),b(n,r,n,r)},S[2]=R,S[4]=m,S),O[1]=((L={})[5]=I,L[6]=I,L[1]=m,L[0]=null,L[3]=function(t,e,n,r){I(t,e,n,r),b(n,r,n,r)},L[2]=I,L[4]=function(t,e,n,r){I(t,e,n,r),P(n,r,n,r)},L),O[0]=((U={})[5]=null,U[6]=null,U[1]=null,U[0]=m,U[3]=null,U[2]=null,U[4]=null,U),O[6]=((q={})[5]=null,q[6]=m,q[1]=x,q[0]=null,q[3]=null,q[2]=m,q[4]=P,q),O),F={spatialReference:null,spatialReferenceId:0},j={spatialReference:null,spatialReferenceId:0},_={source:{spatialReference:null,spatialReferenceId:0},dest:{spatialReference:null,spatialReferenceId:0},projector:m},B={source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:m},D=n.deg2rad(1),V=n.rad2deg(1),Y={a:6378137,e2:.006694379990137799,a1:42697.67270715754,a2:1823091254.6075456,a3:142.91722289812412,a4:4557728136.518864,a5:42840.589930055656,a6:.9933056200098622},G=u.vec3f64.create(),X=u.vec3f64.create(),k=u.vec3f64.create(),H=u.vec3f64.create(),Z=u.vec3f64.create()}.apply(null,r))||(t.exports=a)}}]);