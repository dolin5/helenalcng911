(function(){(this||window).webpackJsonp.registerAbsMids({"esri/views/2d/layers/FeatureLayerView2D":850,"esri/core/libs/gl-matrix-2/mat4":879,"esri/core/libs/gl-matrix-2/math/mat4":889,"esri/views/layers/support/FeatureFilter":967,"esri/views/layers/support/FeatureEffect":1021,"esri/views/layers/support/popupUtils":1022,"esri/views/2d/layers/features/support/rendererUtils":1060,"esri/views/2d/layers/features/tileRenderers":1125,"esri/views/2d/layers/support/FeatureLayerProxy":1126,"esri/views/2d/layers/support/util":1127,"esri/views/layers/FeatureLayerView":1128,"esri/views/layers/support/ParsedFeatureEffect":1129,"esri/views/layers/support/cssFilterParser":1130,"esri/views/layers/support/Transition":1131})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{1021:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(0),r(1),r(3),r(9),r(16),r(2),r(967),r(1129),r(1131)],void 0===(n=function(e,t,r,i,n,o,a,s,u,l,c){var p=o.getLogger("esri.views.layers.support.FeatureEffect");return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.filter=null,t.includedEffect=null,t.excludedEffect=null,t.excludedLabelsVisible=!1,t}var n;return i(t,e),n=t,Object.defineProperty(t.prototype,"insideEffect",{get:function(){return p.warn("insideEffect is a temporary interface that will be removed. Use includedEffect instead"),this.includedEffect},set:function(e){p.warn("insideEffect is a temporary interface that will be removed. Use includedEffect instead"),this.includedEffect=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outsideEffect",{get:function(){return p.warn("outsideEffect is a temporary interface that will be removed. Use excludedEffect instead"),this.excludedEffect},set:function(e){p.warn("outsideEffect is a temporary interface that will be removed. Use excludedEffect instead"),this.excludedEffect=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parsedIncludedEffect",{get:function(){return a.isSome(this.includedEffect)?"string"==typeof this.includedEffect?l.fromString(this.includedEffect):new c({from:l.fromString(this.includedEffect.from),to:l.fromString(this.includedEffect.to),duration:this.includedEffect.duration}):null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parsedExcludedEffect",{get:function(){return a.isSome(this.excludedEffect)?"string"==typeof this.excludedEffect?l.fromString(this.excludedEffect):new c({from:l.fromString(this.excludedEffect.from),to:l.fromString(this.excludedEffect.to),duration:this.excludedEffect.duration}):null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderingHash",{get:function(){return this.excludedLabelsVisible+"-"+this.includedEffect+"-"+this.excludedEffect},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"done",{get:function(){return(!a.isSome(this.parsedIncludedEffect)||this.parsedIncludedEffect.done)&&(!a.isSome(this.parsedExcludedEffect)||this.parsedExcludedEffect.done)},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new n({filter:this.filter&&this.filter.clone(),includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})},r([s.property({type:u,json:{write:!0}})],t.prototype,"filter",void 0),r([s.property({type:String,json:{write:!0}})],t.prototype,"includedEffect",void 0),r([s.property({type:String,json:{write:!0}})],t.prototype,"excludedEffect",void 0),r([s.property({type:Boolean,json:{write:!0}})],t.prototype,"excludedLabelsVisible",void 0),r([s.property({dependsOn:["includedEffect"]})],t.prototype,"parsedIncludedEffect",null),r([s.property({dependsOn:["excludedEffect"]})],t.prototype,"parsedExcludedEffect",null),r([s.property({dependsOn:["includedEffect","excludedEffect"]})],t.prototype,"renderingHash",null),n=r([s.subclass("esri.views.layers.support.FeatureEffect")],t)}(s.declared(n.JSONSupport))}.apply(null,i))||(e.exports=n)},1022:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(6),r(8),r(81),r(16),r(35)],void 0===(n=function(e,t,r,i,n,o,a){Object.defineProperty(t,"__esModule",{value:!0}),t.getRequiredFields=function(e,t){return void 0===t&&(t=e.popupTemplate),i(this,void 0,void 0,(function(){var i,s,u,l,c,p,h,d,f,y,v;return r(this,(function(r){switch(r.label){case 0:return o.isSome(t)?[4,t.getRequiredFields(e.fields)]:[2,[]];case 1:return i=r.sent(),s=t.lastEditInfoEnabled,u=e.objectIdField,l=e.typeIdField,n.includes(i,"*")?[2,["*"]]:(p=a.fixFields,h=[e.fields],f=(d=i).concat,y=[[l]],(v=s)?[4,a.getFeatureEditFields(e)]:[3,3]);case 2:v=r.sent(),r.label=3;case 3:return(c=p.apply(void 0,h.concat([f.apply(d,y.concat([v||null]))])))&&u&&a.hasField(e.fields,u)&&-1===c.indexOf(u)&&c.push(u),[2,c]}}))}))},t.getFetchPopupTemplate=function(e,t){return e.popupTemplate?e.popupTemplate:o.isSome(t)&&t.defaultPopupTemplateEnabled&&o.isSome(e.defaultPopupTemplate)?e.defaultPopupTemplate:null}}.apply(null,i))||(e.exports=n)},1060:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(9),r(19),r(826)],void 0===(n=function(e,t,r,i,n){function o(e){return e.stops=function(e,t){return t.length<=u?t:(l.warn("Found "+t.length+" Visual Variable stops, but MapView only supports "+u+". Displayed stops will be simplified."),t.length>2*u?function(e,t){for(var r=t[0],n=t.slice(1),o=n.pop(),u=n[0].value,l=n[n.length-1].value,c=(l-u)/s,p=[],h=u;h<l;h+=c){for(var d=0;h>=n[d].value;)d++;var f=n[d],y=t[d-1],v=h-y.value,g=f.value===y.value?1:v/(f.value-y.value);if("color"===e){var m=n[d],b=t[d-1],_=m.color.clone();_.r=a(b.color.r,_.r,g),_.g=a(b.color.g,_.g,g),_.b=a(b.color.b,_.b,g),_.a=a(b.color.a,_.a,g),p.push({value:h,color:_,label:m.label})}else if("size"===e){var w=n[d],x=t[d-1],S=i.toPt(w.size),M=a(i.toPt(x.size),S,g);p.push({value:h,size:M,label:w.label})}else{var F=n[d],E=a(t[d-1].opacity,F.opacity,g);p.push({value:h,opacity:E,label:F.label})}}return[r].concat(p,[o])}(e,t):function(e){for(var t=e[0],r=e.slice(1),i=r.pop();r.length>s;){for(var n=0,o=0,a=1;a<r.length;a++){var u=r[a-1],l=r[a],c=Math.abs(l.value-u.value);c>o&&(o=c,n=a)}r.splice(n,1)}return[t].concat(r,[i])}(t))}(e.type,e.stops),e}function a(e,t,r){return(1-r)*e+r*t}Object.defineProperty(t,"__esModule",{value:!0});var s=n.definitions.WEBGL_MAX_INNER_STOPS,u=n.definitions.WEBGL_MAX_STOPS,l=r.getLogger("esri.renderers.visualVariables.support.utils");t.simplifyVVRenderer=function(e){if(!("visualVariables"in e&&e.visualVariables&&e.visualVariables.length))return e;var t=e.clone(),r=t.visualVariables.map((function(e){return function(e){return("size"===e.type||"color"===e.type||"opacity"===e.type)&&null!=e.stops}(e)?o(e):e}));return t.visualVariables=r,t}}.apply(null,i))||(e.exports=n)},1125:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(303),r(4)],void 0===(n=function(e,t,i,n){Object.defineProperty(t,"__esModule",{value:!0}),t.createOrReuseTileRenderer=function(e,t,o){if(!t)return n.resolve(null);switch(t.type){case"class-breaks":case"simple":case"unique-value":case"dot-density":case"dictionary":return n.create((function(e){i((function(){return r.e(68).then(function(){var t=[r(1429)];e.apply(null,t)}.bind(this)).catch(r.oe)}))})).then((function(e){return e.default})).then((function(e){return new e(o)}));case"heatmap":return n.create((function(e){i((function(){return r.e(81).then(function(){var t=[r(1430)];e.apply(null,t)}.bind(this)).catch(r.oe)}))})).then((function(e){return e.default})).then((function(e){return new e(o)}))}return n.resolve(null)}}.apply(null,i))||(e.exports=n)},1126:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(1),r(0),r(7),r(6),r(8),r(91),r(4),r(284),r(181),r(2),r.dj.m(e)],void 0===(n=function(e,t,r,i,n,o,a,s,u,l,c,p,h){Object.defineProperty(t,"__esModule",{value:!0});var d=function(t){function n(e){var r=t.call(this,e)||this;return r._startupResolver=u.createResolver(),r.isReady=!1,r}return r(n,t),n.prototype.initialize=function(){this._controller=u.createAbortController(),this.addResolvingPromise(this._startWorker(this._controller.signal))},n.prototype.destroy=function(){this._connection.close(),this._controller.abort()},Object.defineProperty(n.prototype,"tileRenderer",{set:function(e){this.client.tileRenderer=e},enumerable:!0,configurable:!0}),n.prototype.startup=function(e,t,r){return a(this,void 0,void 0,(function(){var i,n,a,s;return o(this,(function(o){switch(o.label){case 0:return i=this._controller.signal,n=function(e){return Array.isArray(e)}(r.source)?{transferList:r.source,signal:i}:void 0,a=e.tileInfo.toJSON(),s={service:r,config:t,tileInfo:a},[4,this._connection.invoke("startup",s,n)];case 1:return o.sent(),this._startupResolver.resolve(),this._set("isReady",!0),[2]}}))}))},n.prototype.update=function(e,t){return a(this,void 0,void 0,(function(){var r;return o(this,(function(i){switch(i.label){case 0:return r={config:e,options:t},[4,this._startupResolver.promise];case 1:return i.sent(),[2,this._connection.invoke("update",r)]}}))}))},n.prototype.setHighlight=function(e){return a(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,this._startupResolver.promise];case 1:return t.sent(),[2,this._connection.invoke("controller.setHighlight",e)]}}))}))},n.prototype.refresh=function(){return a(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,this._startupResolver.promise];case 1:return e.sent(),[2,this._connection.invoke("controller.refresh")]}}))}))},n.prototype.redraw=function(){return a(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,this._startupResolver.promise];case 1:return e.sent(),[2,this._connection.invoke("controller.redraw")]}}))}))},n.prototype.setViewState=function(e){return a(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,this._startupResolver.promise];case 1:return t.sent(),[2,this._connection.invoke("setViewState",e.toJSON())]}}))}))},n.prototype.queryFeatures=function(e,t){return a(this,void 0,void 0,(function(){return o(this,(function(r){switch(r.label){case 0:return[4,this._startupResolver.promise];case 1:return r.sent(),[2,this._connection.invoke("controller.queryFeatures",e.toJSON(),t)]}}))}))},n.prototype.queryObjectIds=function(e,t){return a(this,void 0,void 0,(function(){return o(this,(function(r){switch(r.label){case 0:return[4,this._startupResolver.promise];case 1:return r.sent(),[2,this._connection.invoke("controller.queryObjectIds",e.toJSON(),t)]}}))}))},n.prototype.queryFeatureCount=function(e,t){return a(this,void 0,void 0,(function(){return o(this,(function(r){switch(r.label){case 0:return[4,this._startupResolver.promise];case 1:return r.sent(),[2,this._connection.invoke("controller.queryFeatureCount",e.toJSON(),t)]}}))}))},n.prototype.queryExtent=function(e,t){return a(this,void 0,void 0,(function(){return o(this,(function(r){return[2,this._connection.invoke("controller.queryExtent",e.toJSON(),t)]}))}))},n.prototype.queryLatestObservations=function(e,t){return a(this,void 0,void 0,(function(){return o(this,(function(r){switch(r.label){case 0:return[4,this._startupResolver.promise];case 1:return r.sent(),[2,this._connection.invoke("controller.queryLatestObservations",e.toJSON(),t)]}}))}))},n.prototype.getObjectId=function(e){return a(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,this._startupResolver.promise];case 1:return t.sent(),[2,this._connection.invoke("controller.getObjectId",e)]}}))}))},n.prototype.getLocalId=function(e){return a(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,this._startupResolver.promise];case 1:return t.sent(),[2,this._connection.invoke("controller.getLocalId",e)]}}))}))},n.prototype.mapValidLocalIds=function(e){return a(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,this._startupResolver.promise];case 1:return t.sent(),[2,this._connection.invoke("controller.mapValidLocalIds",e)]}}))}))},n.prototype.onEdits=function(e){return a(this,void 0,void 0,(function(){var t,r,i;return o(this,(function(n){switch(n.label){case 0:return[4,this._startupResolver.promise];case 1:return n.sent(),t=e.addedFeatures,r=e.deletedFeatures,i=e.updatedFeatures,[2,this._connection.invoke("controller.onEdits",{addedFeatures:t,deletedFeatures:r,updatedFeatures:i})]}}))}))},n.prototype.enableEvent=function(e,t){return a(this,void 0,void 0,(function(){return o(this,(function(r){switch(r.label){case 0:return[4,this._startupResolver.promise];case 1:return r.sent(),[2,this._connection.invoke("controller.enableEvent",{name:e,value:t})]}}))}))},n.prototype._startWorker=function(t){return a(this,void 0,void 0,(function(){var r,i;return o(this,(function(n){switch(n.label){case 0:return r=l.getAbsMid("../features/Pipeline",e,h),[4,c.open(r,{client:this.client,strategy:"dedicated",signal:t})];case 1:return i=n.sent(),this._connection=i,[2]}}))}))},i([p.property()],n.prototype,"isReady",void 0),i([p.property()],n.prototype,"client",void 0),i([p.property()],n.prototype,"tileRenderer",null),i([p.subclass("esri.views.2d.layers.support.FeatureLayerProxy")],n)}(p.declared(s.EsriPromise));t.default=d}.apply(null,i))||(e.exports=n)},1127:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(12)],void 0===(n=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var i=new r.default({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});t.toJSONGeometryType=function(e){return i.toJSON(e)}}.apply(null,i))||(e.exports=n)},1128:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(1),r(0),r(7),r(6),r(8),r(11),r(56),r(9),r(16),r(4),r(14),r(2),r(35),r(129),r(92),r(272),r(1021),r(967),r(1022)],void 0===(n=function(e,t,r,i,n,o,a,s,u,l,c,p,h,d,f,y,v,g,m,b,_){Object.defineProperty(t,"__esModule",{value:!0});var w=l.getLogger("esri.views.layers.FeatureLayerView");t.FeatureLayerView=function(e){return function(e){function t(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=e.apply(this,t)||this;return i._updatingRequiredFieldsPromise=null,i.effect=null,i.filter=null,i.layer=null,i.requiredFields=null,i.view=null,i}return r(t,e),t.prototype.initialize=function(){var e=this;h.init(this,["layer.renderer","layer.labelingInfo","layer.elevationInfo.featureExpressionInfo","filter","effect","layer.timeInfo","timeExtent"],(function(){return e._handleRequiredFieldsChange()}),!0)},Object.defineProperty(t.prototype,"availableFields",{get:function(){var e=this,t=e.layer,r=e.layer.fields,i=e.requiredFields;return"outFields"in t&&t.outFields?f.fixFields(r,f.unpackFieldNames(r,t.outFields).concat(i)):f.fixFields(r,i)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maximumNumberOfFeatures",{get:function(){return 0},set:function(e){w.error("#maximumNumberOfFeatures=","Setting maximum number of features is not supported")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maximumNumberOfFeaturesExceeded",{get:function(){return!1},enumerable:!0,configurable:!0}),t.prototype.highlight=function(e,t){return void 0===t&&(t={}),this.inherited(arguments)},t.prototype.createQuery=function(){var e={outFields:["*"],returnGeometry:!0,outSpatialReference:this.view.spatialReference},t=c.isSome(this.filter)?this.filter.createQuery(e):new g(e);return this.timeExtent&&(t.timeExtent=t.timeExtent?t.timeExtent.intersection(this.timeExtent):this.timeExtent.clone()),t},t.prototype.queryFeatures=function(e,t){return this.inherited(arguments)},t.prototype.queryObjectIds=function(e,t){return this.inherited(arguments)},t.prototype.queryFeatureCount=function(e,t){return this.inherited(arguments)},t.prototype.queryExtent=function(e,t){return this.inherited(arguments)},t.prototype._loadArcadeModules=function(e){if(e.get("expressionInfos.length"))return v.loadArcade()},t.prototype._handleRequiredFieldsChange=function(){var e=this,t=this._updateRequiredFields();this._set("_updatingRequiredFieldsPromise",t),t.then((function(){e._updatingRequiredFieldsPromise===t&&e._set("_updatingRequiredFieldsPromise",null)}))},t.prototype._updateRequiredFields=function(){return a(this,void 0,void 0,(function(){var e,t,r,i,n,a,s,l,h,d,y,v,g;return o(this,(function(o){switch(o.label){case 0:return this.layer&&this.view?(e="3d"===this.view.type,r=(t=this).layer,i=t.layer,n=i.fields,a=i.objectIdField,s=i.renderer,l=new Set,[4,p.eachAlways([s?s.collectRequiredFields(l,n):null,f.collectLabelingFields(l,r),e?f.collectElevationFields(l,r):null,c.isSome(this.filter)?f.collectFilterFields(l,r,this.filter):null,this.effect?f.collectFilterFields(l,r,this.effect.filter):null])]):[2];case 1:for(h=o.sent(),r.timeInfo&&this.timeExtent&&f.collectFields(l,r.fields,[r.timeInfo.startField,r.timeInfo.endField]),d=0,y=h;d<y.length;d++)(v=y[d]).error&&w.error(v.error);return f.collectField(l,n,a),g=u.valuesOfSet(l).sort(),this._set("requiredFields",g),[2]}}))}))},t.prototype.validateFetchPopupFeatures=function(e){var t=this.layer;return this.layer.popupEnabled?_.getFetchPopupTemplate(this.layer,e)?void 0:new s("featurelayerview:fetchPopupFeatures","Layer does not define a popup template",{layer:t}):new s("featurelayerview:fetchPopupFeatures","Popups are disabled",{layer:t})},t.prototype.fetchClientPopupFeatures=function(e){return a(this,void 0,void 0,(function(){var t,r,i,n,a,s,u,l,h,d,y,v;return o(this,(function(o){switch(o.label){case 0:return(t=c.isSome(e)?e.clientGraphics:null)&&0!==t.length?(r=[],i=[],n=this.layer,a=_.getFetchPopupTemplate(n,e),c.isSome(a)?[4,this._loadArcadeModules(a)]:[2,p.resolve([])]):[2,p.resolve([])];case 1:return s=o.sent(),u=s&&s.arcadeUtils.hasGeometryOperations(a),[4,this.createPopupQuery(e)];case 2:for(l=o.sent(),h=f.unpackFieldNames(n.fields,l.outFields),d=0,y=t;d<y.length;d++)v=y[d],u||!f.featureHasFields(h,v)?i.push(v):r.push(v);return 0===i.length?[2,p.resolve(r)]:(l.objectIds=i.map((function(e){return e.attributes[n.objectIdField]})),[2,n.queryFeatures(l).then((function(e){return r.concat(e.features)})).catch((function(){return i}))])}}))}))},t.prototype.createPopupQuery=function(e){return a(this,void 0,void 0,(function(){var t,r,i;return o(this,(function(n){switch(n.label){case 0:return t=this.layer,(r=t.createQuery()).returnGeometry=!0,r.returnZ=!0,r.returnM=!0,i=r,[4,_.getRequiredFields(this.layer,_.getFetchPopupTemplate(this.layer,e))];case 1:return i.outFields=n.sent(),r.outSpatialReference=this.view.spatialReference,[2,r]}}))}))},i([d.property()],t.prototype,"_updatingRequiredFieldsPromise",void 0),i([d.property({readOnly:!0,dependsOn:["layer.outFields?","requiredFields"]})],t.prototype,"availableFields",null),i([d.property({type:m})],t.prototype,"effect",void 0),i([d.property({type:b})],t.prototype,"filter",void 0),i([d.property(y.combinedViewLayerTimeExtentProperty)],t.prototype,"timeExtent",void 0),i([d.property()],t.prototype,"layer",void 0),i([d.property({type:Number})],t.prototype,"maximumNumberOfFeatures",null),i([d.property({readOnly:!0,type:Boolean})],t.prototype,"maximumNumberOfFeaturesExceeded",null),i([d.property({readOnly:!0})],t.prototype,"requiredFields",void 0),i([d.property()],t.prototype,"view",void 0),i([d.subclass("esri.views.layers.FeatureLayerView")],t)}(d.declared(e))}}.apply(null,i))||(e.exports=n)},1129:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(0),r(1),r(7),r(11),r(3),r(9),r(16),r(2),r(879),r(931),r(1130)],void 0===(n=function(e,t,r,i,n,o,a,s,u,l,c,p,h){var d=s.getLogger("esri.views.layers.support.ParsedFeatureEffect"),f={grayscale:function(e){var t=1-e.amount,r=p.mat4f32.fromValues(.2126+.7874*t,.7152-.7152*t,.0722-.0722*t,0,.2126-.2126*t,.7152+.2848*t,.0722-.0722*t,0,.2126-.2126*t,.7152-.7152*t,.0722+.9278*t,0,0,0,0,1);return c.mat4.transpose(r,r)},sepia:function(e){var t=1-e.amount,r=p.mat4f32.fromValues(.393+.607*t,.769-.769*t,.189-.189*t,0,.349-.349*t,.686+.314*t,.168-.168*t,0,.272-.272*t,.534-.534*t,.131+.869*t,0,0,0,0,1);return c.mat4.transpose(r,r)},saturate:function(e){var t=e.amount,r=p.mat4f32.fromValues(.213+.787*t,.715-.715*t,.072-.072*t,0,.213-.213*t,.715+.285*t,.072-.072*t,0,.213-.213*t,.715-.715*t,.072+.928*t,0,0,0,0,1);return c.mat4.transpose(r,r)},"hue-rotate":function(e){var t=Math.sin(e.angle*Math.PI/180),r=Math.cos(e.angle*Math.PI/180),i=p.mat4f32.fromValues(.213+.787*r-.213*t,.715-.715*r-.715*t,.072-.072*r+.928*t,0,.213-.213*r+.143*t,.715+.285*r+.14*t,.072-.072*r-.283*t,0,.213-.213*r-.787*t,.715-.715*r+.715*t,.072+.928*r+.072*t,0,0,0,0,1);return c.mat4.transpose(i,i)},invert:function(e){var t=1-2*e.amount,r=e.amount,i=p.mat4f32.fromValues(t,0,0,r,0,t,0,r,0,0,t,r,0,0,0,1);return c.mat4.transpose(i,i)},brightness:function(e){var t=e.amount,r=p.mat4f32.fromValues(t,0,0,0,0,t,0,0,0,0,t,0,0,0,0,1);return c.mat4.transpose(r,r)},contrast:function(e){var t=e.amount,r=p.mat4f32.fromValues(t,0,0,.5-.5*t,0,t,0,.5-.5*t,0,0,t,.5-.5*t,0,0,0,1);return c.mat4.transpose(r,r)}};return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.customTransforms=null,t.done=!0,t}var a;return i(t,e),a=t,t.fromString=function(e){var t=[],r=null;try{for(var i=0,n=h.parse(e);i<n.length;i++){var s=n[i];"opacity"===s.type?r=s:t.push(s)}}catch(e){d.error(new o("invalid-type","Encountered an error when parsing css",e))}return new a({transforms:t,opacity:r})},t.prototype.getOpacity=function(){return u.isSome(this.opacity)?this.opacity.amount:1},t.prototype.getColorMatrix=function(){var e=this;return(this.transforms||[]).map((function(e){return n({},e)})).reverse().reduce((function(t,r){return c.mat4.multiply(t,t,e._getFactory(r)(r))}),p.mat4f32.create())},t.prototype.clone=function(){return new a({transforms:this.transforms&&this.transforms.map((function(e){return n({},e)})),customTransforms:this.customTransforms&&this.customTransforms.map((function(e){return n({},e)}))})},t.prototype._getFactory=function(e){var t=f[e.type];if(!t){if(this.customTransforms)for(var r=0,i=this.customTransforms;r<i.length;r++){var n=function(t){if(t.type===e.type){var r=p.mat4f32.fromValues.apply(p.mat4f32,t.matrix),i=c.mat4.transpose(r,r);return{value:function(e){return i}}}}(i[r]);if("object"==typeof n)return n.value}return d.error("invalid-type","No effect "+e.type+" exists"),function(e){return p.mat4f32.create()}}return t},r([l.property()],t.prototype,"opacity",void 0),r([l.property()],t.prototype,"transforms",void 0),r([l.property()],t.prototype,"customTransforms",void 0),a=r([l.subclass("esri.views.layers.support.ParsedFeatureEffect")],t)}(l.declared(a.JSONSupport))}.apply(null,i))||(e.exports=n)},1130:function(e,t,r){var i;void 0===(i=function(){"use strict";function e(t,r,i,n){this.message=t,this.expected=r,this.found=i,this.location=n,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}return function(e,t){function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r}(e,Error),e.buildMessage=function(e,t){function r(e){return e.charCodeAt(0).toString(16).toUpperCase()}function i(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+r(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+r(e)}))}function n(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+r(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+r(e)}))}function o(e){return a[e.type](e)}var a={literal:function(e){return'"'+i(e.text)+'"'},class:function(e){var t,r="";for(t=0;t<e.parts.length;t++)r+=e.parts[t]instanceof Array?n(e.parts[t][0])+"-"+n(e.parts[t][1]):n(e.parts[t]);return"["+(e.inverted?"^":"")+r+"]"},any:function(e){return"any character"},end:function(e){return"end of input"},other:function(e){return e.description}};return"Expected "+function(e){var t,r,i=new Array(e.length);for(t=0;t<e.length;t++)i[t]=o(e[t]);if(i.sort(),i.length>0){for(t=1,r=1;t<i.length;t++)i[t-1]!==i[t]&&(i[r]=i[t],r++);i.length=r}switch(i.length){case 1:return i[0];case 2:return i[0]+" or "+i[1];default:return i.slice(0,-1).join(", ")+", or "+i[i.length-1]}}(e)+" but "+function(e){return e?'"'+i(e)+'"':"end of input"}(t)+" found."},{SyntaxError:e,parse:function(t,r){function i(){return t.substring(Ht,Ut)}function n(e,t){return{type:"literal",text:e,ignoreCase:t}}function o(e,t,r){return{type:"class",parts:e,inverted:t,ignoreCase:r}}function a(e){return{type:"other",description:e}}function s(e){var r,i=Jt[e];if(i)return i;for(r=e-1;!Jt[r];)r--;for(i={line:(i=Jt[r]).line,column:i.column};r<e;)10===t.charCodeAt(r)?(i.line++,i.column=1):i.column++,r++;return Jt[e]=i,i}function u(e,t){var r=s(e),i=s(t);return{start:{offset:e,line:r.line,column:r.column},end:{offset:t,line:i.line,column:i.column}}}function l(e){Ut<Dt||(Ut>Dt&&(Dt=Ut,Gt=[]),Gt.push(e))}function c(t,r){return new e(t,null,null,r)}function p(){var e;return(e=function(){var e,r,i;return Qt++,e=Ut,(r=_())!==x?(t.substr(Ut,4)===E?(i=E,Ut+=4):(i=x,0===Qt&&l(R)),i!==x&&_()!==x?(Ht=e,r=O(),e=r):(Ut=e,e=x)):(Ut=e,e=x),Qt--,e===x&&(r=x,0===Qt&&l(F)),e}())===x&&(e=function(){var e,t;if(e=[],(t=h())!==x)for(;t!==x;)e.push(t),t=h();else e=x;return e}()),e}function h(){var e;return(e=function(){var e,r,i,n,o;return Qt++,e=Ut,(r=_())!==x?(t.substr(Ut,5)===P?(i=P,Ut+=5):(i=x,0===Qt&&l(C)),i!==x&&_()!==x&&(n=g())!==x&&_()!==x?(41===t.charCodeAt(Ut)?(o=A,Ut++):(o=x,0===Qt&&l(j)),o!==x&&_()!==x?(Ht=e,r=q(n),e=r):(Ut=e,e=x)):(Ut=e,e=x)):(Ut=e,e=x),Qt--,e===x&&(r=x,0===Qt&&l(I)),e}())===x&&(e=function(){var e,r,i,n,o;return Qt++,e=Ut,(r=_())!==x?(t.substr(Ut,11)===N?(i=N,Ut+=11):(i=x,0===Qt&&l(k)),i!==x&&_()!==x&&(n=d())!==x&&_()!==x?(41===t.charCodeAt(Ut)?(o=A,Ut++):(o=x,0===Qt&&l(j)),o!==x&&_()!==x?(Ht=e,r=L(n),e=r):(Ut=e,e=x)):(Ut=e,e=x)):(Ut=e,e=x),Qt--,e===x&&(r=x,0===Qt&&l(T)),e}())===x&&(e=function(){var e,r,i,n,o;return Qt++,e=Ut,(r=_())!==x?(t.substr(Ut,9)===U?(i=U,Ut+=9):(i=x,0===Qt&&l(H)),i!==x&&_()!==x&&(n=d())!==x&&_()!==x?(41===t.charCodeAt(Ut)?(o=A,Ut++):(o=x,0===Qt&&l(j)),o!==x&&_()!==x?(Ht=e,r=J(n),e=r):(Ut=e,e=x)):(Ut=e,e=x)):(Ut=e,e=x),Qt--,e===x&&(r=x,0===Qt&&l(V)),e}())===x&&(e=function(){var e,r,i,n,o,a,s,u;return Qt++,e=Ut,(r=_())!==x?(t.substr(Ut,12)===G?(i=G,Ut+=12):(i=x,0===Qt&&l(Q)),i!==x&&_()!==x&&(n=g())!==x&&_()!==x&&(o=g())!==x&&_()!==x?((a=g())===x&&(a=null),a!==x&&_()!==x?((s=function(){var e,r,i,n,o,a,s,u,c,p,h,v,g,m,w;return e=Ut,35===t.charCodeAt(Ut)?(r=gt,Ut++):(r=x,0===Qt&&l(mt)),r!==x?(i=Ut,(n=b())!==x&&(o=b())!==x?i=n=[n,o]:(Ut=i,i=x),i!==x?(n=Ut,(o=b())!==x&&(a=b())!==x?n=o=[o,a]:(Ut=n,n=x),n!==x?(o=Ut,(a=b())!==x&&(s=b())!==x?o=a=[a,s]:(Ut=o,o=x),o!==x?(Ht=e,r=bt(i,n,o),e=r):(Ut=e,e=x)):(Ut=e,e=x)):(Ut=e,e=x)):(Ut=e,e=x),e===x&&(e=Ut,35===t.charCodeAt(Ut)?(r=gt,Ut++):(r=x,0===Qt&&l(mt)),r!==x&&(i=b())!==x&&(n=b())!==x&&(o=b())!==x?(Ht=e,r=_t(i,n,o),e=r):(Ut=e,e=x),e===x&&(e=Ut,t.substr(Ut,5)===wt?(r=wt,Ut+=5):(r=x,0===Qt&&l(xt)),r!==x&&(i=_())!==x&&(n=y())!==x&&(o=_())!==x?(44===t.charCodeAt(Ut)?(a=St,Ut++):(a=x,0===Qt&&l(Mt)),a!==x&&(s=_())!==x&&(u=y())!==x&&_()!==x?(44===t.charCodeAt(Ut)?(c=St,Ut++):(c=x,0===Qt&&l(Mt)),c!==x&&_()!==x&&(p=y())!==x&&(h=_())!==x?(44===t.charCodeAt(Ut)?(v=St,Ut++):(v=x,0===Qt&&l(Mt)),v!==x&&(g=_())!==x&&(m=d())!==x&&_()!==x?(41===t.charCodeAt(Ut)?(w=A,Ut++):(w=x,0===Qt&&l(j)),w!==x?(Ht=e,r=Ft(n,u,p,m),e=r):(Ut=e,e=x)):(Ut=e,e=x)):(Ut=e,e=x)):(Ut=e,e=x)):(Ut=e,e=x),e===x&&(e=Ut,t.substr(Ut,5)===wt?(r=wt,Ut+=5):(r=x,0===Qt&&l(xt)),r!==x&&(i=_())!==x&&(n=f())!==x&&(o=_())!==x?(44===t.charCodeAt(Ut)?(a=St,Ut++):(a=x,0===Qt&&l(Mt)),a!==x&&(s=_())!==x&&(u=f())!==x&&_()!==x?(44===t.charCodeAt(Ut)?(c=St,Ut++):(c=x,0===Qt&&l(Mt)),c!==x&&_()!==x&&(p=f())!==x?(44===t.charCodeAt(Ut)?(h=St,Ut++):(h=x,0===Qt&&l(Mt)),h!==x&&(v=_())!==x&&(g=d())!==x?(41===t.charCodeAt(Ut)?(m=A,Ut++):(m=x,0===Qt&&l(j)),m!==x?(Ht=e,r=Et(n,u,p,g),e=r):(Ut=e,e=x)):(Ut=e,e=x)):(Ut=e,e=x)):(Ut=e,e=x)):(Ut=e,e=x),e===x&&(e=Ut,t.substr(Ut,5)===wt?(r=wt,Ut+=5):(r=x,0===Qt&&l(xt)),r!==x&&(i=_())!==x&&(n=y())!==x&&(o=_())!==x?(44===t.charCodeAt(Ut)?(a=St,Ut++):(a=x,0===Qt&&l(Mt)),a!==x&&(s=_())!==x&&(u=y())!==x&&_()!==x?(44===t.charCodeAt(Ut)?(c=St,Ut++):(c=x,0===Qt&&l(Mt)),c!==x&&_()!==x&&(p=y())!==x&&(h=_())!==x?(41===t.charCodeAt(Ut)?(v=A,Ut++):(v=x,0===Qt&&l(j)),v!==x?(Ht=e,r=Rt(n,u,p),e=r):(Ut=e,e=x)):(Ut=e,e=x)):(Ut=e,e=x)):(Ut=e,e=x),e===x&&(e=Ut,t.substr(Ut,5)===wt?(r=wt,Ut+=5):(r=x,0===Qt&&l(xt)),r!==x&&(i=_())!==x&&(n=f())!==x&&(o=_())!==x?(44===t.charCodeAt(Ut)?(a=St,Ut++):(a=x,0===Qt&&l(Mt)),a!==x&&(s=_())!==x&&(u=f())!==x&&_()!==x?(44===t.charCodeAt(Ut)?(c=St,Ut++):(c=x,0===Qt&&l(Mt)),c!==x&&_()!==x&&(p=f())!==x?(41===t.charCodeAt(Ut)?(h=A,Ut++):(h=x,0===Qt&&l(j)),h!==x?(Ht=e,r=Ot(n,u,p),e=r):(Ut=e,e=x)):(Ut=e,e=x)):(Ut=e,e=x)):(Ut=e,e=x),e===x&&(e=Ut,t.substr(Ut,4)===It?(r=It,Ut+=4):(r=x,0===Qt&&l(Pt)),r!==x&&(i=_())!==x&&(n=y())!==x&&(o=_())!==x?(44===t.charCodeAt(Ut)?(a=St,Ut++):(a=x,0===Qt&&l(Mt)),a!==x&&(s=_())!==x&&(u=y())!==x&&_()!==x?(44===t.charCodeAt(Ut)?(c=St,Ut++):(c=x,0===Qt&&l(Mt)),c!==x&&_()!==x&&(p=y())!==x&&(h=_())!==x?(41===t.charCodeAt(Ut)?(v=A,Ut++):(v=x,0===Qt&&l(j)),v!==x?(Ht=e,r=Rt(n,u,p),e=r):(Ut=e,e=x)):(Ut=e,e=x)):(Ut=e,e=x)):(Ut=e,e=x),e===x&&(e=Ut,t.substr(Ut,4)===It?(r=It,Ut+=4):(r=x,0===Qt&&l(Pt)),r!==x&&(i=_())!==x&&(n=f())!==x&&(o=_())!==x?(44===t.charCodeAt(Ut)?(a=St,Ut++):(a=x,0===Qt&&l(Mt)),a!==x&&(s=_())!==x&&(u=f())!==x&&_()!==x?(44===t.charCodeAt(Ut)?(c=St,Ut++):(c=x,0===Qt&&l(Mt)),c!==x&&_()!==x&&(p=f())!==x&&(h=_())!==x?(41===t.charCodeAt(Ut)?(v=A,Ut++):(v=x,0===Qt&&l(j)),v!==x?(Ht=e,r=Ot(n,u,p),e=r):(Ut=e,e=x)):(Ut=e,e=x)):(Ut=e,e=x)):(Ut=e,e=x),e===x&&(e=function(){var e,r,i;if(Qt++,e=Ut,r=[],kt.test(t.charAt(Ut))?(i=t.charAt(Ut),Ut++):(i=x,0===Qt&&l(Lt)),i!==x)for(;i!==x;)r.push(i),kt.test(t.charAt(Ut))?(i=t.charAt(Ut),Ut++):(i=x,0===Qt&&l(Lt));else r=x;return r!==x&&(Ht=e,r=Vt()),Qt--,(e=r)===x&&(r=x,0===Qt&&l(Nt)),e}())))))))),e}())===x&&(s=null),s!==x&&_()!==x?(41===t.charCodeAt(Ut)?(u=A,Ut++):(u=x,0===Qt&&l(j)),u!==x&&_()!==x?(Ht=e,r=z(n,o,a,s),e=r):(Ut=e,e=x)):(Ut=e,e=x)):(Ut=e,e=x)):(Ut=e,e=x)):(Ut=e,e=x),Qt--,e===x&&(r=x,0===Qt&&l(D)),e}())===x&&(e=function(){var e,r,i,n,o;return Qt++,e=Ut,(r=_())!==x?(t.substr(Ut,10)===X?(i=X,Ut+=10):(i=x,0===Qt&&l(B)),i!==x&&_()!==x&&(n=d())!==x&&_()!==x?(41===t.charCodeAt(Ut)?(o=A,Ut++):(o=x,0===Qt&&l(j)),o!==x&&_()!==x?(Ht=e,r=Y(n),e=r):(Ut=e,e=x)):(Ut=e,e=x)):(Ut=e,e=x),Qt--,e===x&&(r=x,0===Qt&&l(W)),e}())===x&&(e=function(){var e,r,i,n,o;return Qt++,e=Ut,(r=_())!==x?(t.substr(Ut,11)===K?(i=K,Ut+=11):(i=x,0===Qt&&l($)),i!==x&&_()!==x&&(n=function(){var e,r,i;return Qt++,e=Ut,(r=function(){var e,r;return Qt++,e=Ut,Re.test(t.charAt(Ut))?(r=t.charAt(Ut),Ut++):(r=x,0===Qt&&l(Oe)),r===x&&(r=null),r!==x&&f()!==x?(Ht=e,r=Fe(),e=r):(Ut=e,e=x),Qt--,e===x&&(r=x,0===Qt&&l(Ee)),e}())!==x&&(i=v())!==x?(Ht=e,r=je(r,i),e=r):(Ut=e,e=x),e===x&&(e=Ut,48===t.charCodeAt(Ut)?(r=qe,Ut++):(r=x,0===Qt&&l(Te)),r!==x?((i=v())===x&&(i=null),i!==x?(Ht=e,r=Ne(),e=r):(Ut=e,e=x)):(Ut=e,e=x)),Qt--,e===x&&(r=x,0===Qt&&l(Ae)),e}())!==x&&_()!==x?(41===t.charCodeAt(Ut)?(o=A,Ut++):(o=x,0===Qt&&l(j)),o!==x&&_()!==x?(Ht=e,r=ee(n),e=r):(Ut=e,e=x)):(Ut=e,e=x)):(Ut=e,e=x),Qt--,e===x&&(r=x,0===Qt&&l(Z)),e}())===x&&(e=function(){var e,r,i,n,o;return Qt++,e=Ut,(r=_())!==x?(t.substr(Ut,7)===re?(i=re,Ut+=7):(i=x,0===Qt&&l(ie)),i!==x&&_()!==x&&(n=d())!==x&&_()!==x?(41===t.charCodeAt(Ut)?(o=A,Ut++):(o=x,0===Qt&&l(j)),o!==x&&_()!==x?(Ht=e,r=ne(n),e=r):(Ut=e,e=x)):(Ut=e,e=x)):(Ut=e,e=x),Qt--,e===x&&(r=x,0===Qt&&l(te)),e}())===x&&(e=function(){var e,r,i,n,o;return Qt++,e=Ut,(r=_())!==x?(t.substr(Ut,8)===ae?(i=ae,Ut+=8):(i=x,0===Qt&&l(se)),i!==x&&_()!==x&&(n=d())!==x&&_()!==x?(41===t.charCodeAt(Ut)?(o=A,Ut++):(o=x,0===Qt&&l(j)),o!==x&&_()!==x?(Ht=e,r=ue(n),e=r):(Ut=e,e=x)):(Ut=e,e=x)):(Ut=e,e=x),Qt--,e===x&&(r=x,0===Qt&&l(oe)),e}())===x&&(e=function(){var e,r,i,n,o;return Qt++,e=Ut,(r=_())!==x?(t.substr(Ut,9)===ce?(i=ce,Ut+=9):(i=x,0===Qt&&l(pe)),i!==x&&_()!==x&&(n=d())!==x&&_()!==x?(41===t.charCodeAt(Ut)?(o=A,Ut++):(o=x,0===Qt&&l(j)),o!==x&&_()!==x?(Ht=e,r=he(n),e=r):(Ut=e,e=x)):(Ut=e,e=x)):(Ut=e,e=x),Qt--,e===x&&(r=x,0===Qt&&l(le)),e}())===x&&(e=function(){var e,r,i,n,o;return Qt++,e=Ut,(r=_())!==x?(t.substr(Ut,6)===fe?(i=fe,Ut+=6):(i=x,0===Qt&&l(ye)),i!==x&&_()!==x&&(n=d())!==x&&_()!==x?(41===t.charCodeAt(Ut)?(o=A,Ut++):(o=x,0===Qt&&l(j)),o!==x&&_()!==x?(Ht=e,r=ve(n),e=r):(Ut=e,e=x)):(Ut=e,e=x)):(Ut=e,e=x),Qt--,e===x&&(r=x,0===Qt&&l(de)),e}()),e}function d(){var e;return Qt++,(e=y())===x&&(e=f()),Qt--,e===x&&0===Qt&&l(ge),e}function f(){var e,r,i,n,o;if(Qt++,e=Ut,r=[],be.test(t.charAt(Ut))?(i=t.charAt(Ut),Ut++):(i=x,0===Qt&&l(_e)),i!==x)for(;i!==x;)r.push(i),be.test(t.charAt(Ut))?(i=t.charAt(Ut),Ut++):(i=x,0===Qt&&l(_e));else r=x;if(r!==x)if(46===t.charCodeAt(Ut)?(i=Se,Ut++):(i=x,0===Qt&&l(Me)),i!==x){if(n=[],be.test(t.charAt(Ut))?(o=t.charAt(Ut),Ut++):(o=x,0===Qt&&l(_e)),o!==x)for(;o!==x;)n.push(o),be.test(t.charAt(Ut))?(o=t.charAt(Ut),Ut++):(o=x,0===Qt&&l(_e));else n=x;n!==x?(Ht=e,e=r=Fe()):(Ut=e,e=x)}else Ut=e,e=x;else Ut=e,e=x;return e===x&&(e=function(){var e,r,i;if(Qt++,e=Ut,r=[],be.test(t.charAt(Ut))?(i=t.charAt(Ut),Ut++):(i=x,0===Qt&&l(_e)),i!==x)for(;i!==x;)r.push(i),be.test(t.charAt(Ut))?(i=t.charAt(Ut),Ut++):(i=x,0===Qt&&l(_e));else r=x;return r!==x&&(Ht=e,r=we()),Qt--,(e=r)===x&&(r=x,0===Qt&&l(me)),e}()),Qt--,e===x&&(r=x,0===Qt&&l(xe)),e}function y(){var e,r,i;return e=Ut,(r=f())!==x?(37===t.charCodeAt(Ut)?(i=Ie,Ut++):(i=x,0===Qt&&l(Pe)),i!==x?(Ht=e,e=r=Ce(r)):(Ut=e,e=x)):(Ut=e,e=x),e}function v(){var e,r;return Qt++,e=Ut,t.substr(Ut,3)===Le?(r=Le,Ut+=3):(r=x,0===Qt&&l(Ve)),r!==x&&(Ht=e,r=Ue()),(e=r)===x&&(e=Ut,t.substr(Ut,4)===He?(r=He,Ut+=4):(r=x,0===Qt&&l(Je)),r!==x&&(Ht=e,r=De()),(e=r)===x&&(e=Ut,t.substr(Ut,3)===Ge?(r=Ge,Ut+=3):(r=x,0===Qt&&l(Qe)),r!==x&&(Ht=e,r=ze()),(e=r)===x&&(e=Ut,t.substr(Ut,4)===We?(r=We,Ut+=4):(r=x,0===Qt&&l(Xe)),r!==x&&(Ht=e,r=Be()),e=r))),Qt--,e===x&&(r=x,0===Qt&&l(ke)),e}function g(){var e,r,i;return Qt++,e=Ut,(r=f())!==x?(i=m())!==x?(Ht=e,e=r=je(r,i)):(Ut=e,e=x):(Ut=e,e=x),e===x&&(e=Ut,48===t.charCodeAt(Ut)?(r=qe,Ut++):(r=x,0===Qt&&l(Te)),r!==x?((i=m())===x&&(i=null),i!==x?(Ht=e,e=r=Ne()):(Ut=e,e=x)):(Ut=e,e=x)),Qt--,e===x&&(r=x,0===Qt&&l(Ye)),e}function m(){var e,r;return e=Ut,t.substr(Ut,2)===Ze?(r=Ze,Ut+=2):(r=x,0===Qt&&l(Ke)),r!==x&&(Ht=e,r=Ue()),(e=r)===x&&(e=Ut,t.substr(Ut,2)===$e?(r=$e,Ut+=2):(r=x,0===Qt&&l(et)),r!==x&&(Ht=e,r=tt()),(e=r)===x&&(e=Ut,t.substr(Ut,2)===rt?(r=rt,Ut+=2):(r=x,0===Qt&&l(it)),r!==x&&(Ht=e,r=nt()),(e=r)===x&&(e=Ut,81===t.charCodeAt(Ut)?(r=ot,Ut++):(r=x,0===Qt&&l(at)),r!==x&&(Ht=e,r=st()),(e=r)===x&&(e=Ut,t.substr(Ut,2)===ut?(r=ut,Ut+=2):(r=x,0===Qt&&l(lt)),r!==x&&(Ht=e,r=ct()),(e=r)===x&&(e=Ut,t.substr(Ut,2)===pt?(r=pt,Ut+=2):(r=x,0===Qt&&l(ht)),r!==x&&(Ht=e,r=dt()),(e=r)===x&&(e=Ut,t.substr(Ut,2)===ft?(r=ft,Ut+=2):(r=x,0===Qt&&l(yt)),r!==x&&(Ht=e,r=vt()),e=r)))))),e}function b(){var e;return Ct.test(t.charAt(Ut))?(e=t.charAt(Ut),Ut++):(e=x,0===Qt&&l(At)),e}function _(){var e,r;for(Qt++,e=[],qt.test(t.charAt(Ut))?(r=t.charAt(Ut),Ut++):(r=x,0===Qt&&l(Tt));r!==x;)e.push(r),qt.test(t.charAt(Ut))?(r=t.charAt(Ut),Ut++):(r=x,0===Qt&&l(Tt));return Qt--,e===x&&(r=x,0===Qt&&l(jt)),e}r=void 0!==r?r:{};var w,x={},S={start:p},M=p,F=a("none"),E="none",R=n("none",!1),O=function(){return null},I=a("blur()"),P="blur(",C=n("blur(",!1),A=")",j=n(")",!1),q=function(e){return{type:"blur",radius:e}},T=a("brightness()"),N="brightness(",k=n("brightness(",!1),L=function(e){return{type:"brightness",amount:e}},V=a("contrast()"),U="contrast(",H=n("contrast(",!1),J=function(e){return{type:"contrast",amount:e}},D=a("drop-shadow()"),G="drop-shadow(",Q=n("drop-shadow(",!1),z=function(e,t,r,i){return{type:"drop-shadow",offsetX:e,offsetY:t,blurRadius:r,color:i}},W=a("grayscale()"),X="grayscale(",B=n("grayscale(",!1),Y=function(e){return{type:"grayscale",amount:e}},Z=a("hue-rotate()"),K="hue-rotate(",$=n("hue-rotate(",!1),ee=function(e){return{type:"hue-rotate",angle:e}},te=a("invert()"),re="invert(",ie=n("invert(",!1),ne=function(e){return{type:"invert",amount:e}},oe=a("opacity()"),ae="opacity(",se=n("opacity(",!1),ue=function(e){return{type:"opacity",amount:e}},le=a("saturate()"),ce="saturate(",pe=n("saturate(",!1),he=function(e){return{type:"saturate",amount:e}},de=a("sepia()"),fe="sepia(",ye=n("sepia(",!1),ve=function(e){return{type:"sepia",amount:e}},ge=a("<number-percentage>"),me=a("<integer>"),be=/^[0-9]/,_e=o([["0","9"]],!1,!1),we=function(){return parseInt(i(),10)},xe=a("<number>"),Se=".",Me=n(".",!1),Fe=function(){return parseFloat(i())},Ee=a("<signedNumber>"),Re=/^[+\-]/,Oe=o(["+","-"],!1,!1),Ie="%",Pe=n("%",!1),Ce=function(e){return e/100},Ae=a("<angle>"),je=function(e,t){return e*t},qe="0",Te=n("0",!1),Ne=function(){return 0},ke=a("<unit>"),Le="deg",Ve=n("deg",!1),Ue=function(){return 1},He="grad",Je=n("grad",!1),De=function(){return.9},Ge="rad",Qe=n("rad",!1),ze=function(){return 180/Math.PI},We="turn",Xe=n("turn",!1),Be=function(){return 1/360},Ye=a("<length>"),Ze="px",Ke=n("px",!1),$e="cm",et=n("cm",!1),tt=function(){return 96/2.54},rt="mm",it=n("mm",!1),nt=function(){return 96/2.54/10},ot="Q",at=n("Q",!1),st=function(){return 96/2.54/40},ut="in",lt=n("in",!1),ct=function(){return 96},pt="pc",ht=n("pc",!1),dt=function(){return 16},ft="pt",yt=n("pt",!1),vt=function(){return 96/73},gt="#",mt=n("#",!1),bt=function(e,t,r){return[parseInt(e.join(""),16),parseInt(t.join(""),16),parseInt(r.join(""),16)]},_t=function(e,t,r){return[parseInt([e,e].join(""),16),parseInt([t,t].join(""),16),parseInt([r,r].join(""),16)]},wt="rgba(",xt=n("rgba(",!1),St=",",Mt=n(",",!1),Ft=function(e,t,r,i){return[255*e,255*t,255*r,i]},Et=function(e,t,r,i){return[e,t,r,i]},Rt=function(e,t,r){return[255*e,255*t,255*r,1]},Ot=function(e,t,r){return[e,t,r,1]},It="rgb(",Pt=n("rgb(",!1),Ct=/^[0-9a-fA-F]/,At=o([["0","9"],["a","f"],["A","F"]],!1,!1),jt=a("whitespace"),qt=/^[ \t\n\r]/,Tt=o([" ","\t","\n","\r"],!1,!1),Nt=a("<named-color>"),kt=/^[a-z]/,Lt=o([["a","z"]],!1,!1),Vt=function(){var e=i();return Wt.has(e)||function(e,t){throw c(e,t=void 0!==t?t:u(Ht,Ut))}('unknown color "'+e+'"'),zt[e].concat(1)},Ut=0,Ht=0,Jt=[{line:1,column:1}],Dt=0,Gt=[],Qt=0;if("startRule"in r){if(!(r.startRule in S))throw new Error("Can't start parsing from rule \""+r.startRule+'".');M=S[r.startRule]}var zt={transparent:[0,0,0,0],black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],rebeccapurple:[102,51,153],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,245,245],yellowgreen:[154,205,50]},Wt=new Set(Object.keys(zt));if((w=M())!==x&&Ut===t.length)return w;throw w!==x&&Ut<t.length&&l({type:"end"}),function(t,r,i){return new e(e.buildMessage(t,r),t,r,i)}(Gt,Dt<t.length?t.charAt(Dt):null,Dt<t.length?u(Dt,Dt+1):u(Dt,Dt))}}}.apply(null,[]))||(e.exports=i)},1131:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(0),r(1),r(10),r(2),r(879)],void 0===(n=function(e,t,r,i,n,o,a){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.from=null,t.to=null,t.duration=4e3,t.repeat=!0,t.done=!1,t}var n;return i(t,e),n=t,t.prototype.getColorMatrix=function(){if(this.done=!1,null==this._lastTime)this._currentStep=0,this._lastTime=Date.now();else{var e=this._lastTime,t=Date.now(),r=t-e;this._currentStep=this._currentStep+r,this._currentStep>=2147483647&&(this._currentStep=0),this._lastTime=t}var i=this._currentStep%this.duration/(this.duration/2),n=i<=1?i:2-i,o=this.from.getColorMatrix(),s=this.to.getColorMatrix();return a.mat4.multiplyScalar(o,o,1-n),a.mat4.multiplyScalar(s,s,n),!this.repeat&&this._currentStep>=this.duration&&(this.done=!0),a.mat4.add(o,o,s)},t.prototype.getOpacity=function(){throw new Error("No getOpacity definition for Transition")},t.prototype.clone=function(){var e=new n({from:this.from.clone(),to:this.to.clone(),duration:this.duration});return e._lastTime=this._lastTime,e._currentStep=this._currentStep,e},r([o.property()],t.prototype,"from",void 0),r([o.property()],t.prototype,"to",void 0),r([o.property({type:Number})],t.prototype,"duration",void 0),r([o.property({type:Boolean})],t.prototype,"repeat",void 0),n=r([o.subclass("esri.views.layers.support.Transition")],t)}(o.declared(n))}.apply(null,i))||(e.exports=n)},850:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(1),r(0),r(72),r(7),r(6),r(8),r(20),r(73),r(42),r(45),r(17),r(11),r(15),r(56),r(9),r(16),r(4),r(14),r(2),r(1059),r(171),r(272),r(826),r(902),r(1125),r(1060),r(1126),r(1061),r(1127),r(299),r(1128),r(892),r(290),r(967),r(1021)],void 0===(n=function(e,t,r,i,n,o,a,s,u,l,c,p,h,d,f,y,v,g,m,b,_,w,x,S,M,F,E,R,O,I,P,C,A,j,q,T,N){var k=v.getLogger("esri.views.2d.layers.FeatureLayerView2D");return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._pipelineIsUpdating=!0,t._updatingPipelineConfig=!1,t._visibilityOverrides=new Set,t._effect=null,t._highlightIds=new Map,t.container=new M.Container,t.filter=null,t._onRenderingConfigChange=m.debounce(p.safeCastFunction((function(){return s(t,void 0,void 0,(function(){var e,t,r,i,n,o,s,u,l,c,p,h,d;return a(this,(function(a){switch(a.label){case 0:return this._hasRequiredSupport(this.layer)?(this._set("_updatingPipelineConfig",!0),[4,this._updateRequiredFields()]):[2];case 1:return a.sent(),e=this.availableFields.join("."),t=this._createLayerFilterHash(),r=this._createTileRendererHash(),i=this._createFeatureDataHash(),n=this._createMeshHash(),this._lockAttributeTextureUpload(),r===this._tileRendererHash?[3,10]:[4,this._initTileRenderer()];case 2:return a.sent(),function(e){return e&&"openPorts"in e}(this.layer.source)?[4,this._createMemoryServiceOptions(this.layer.source)]:[3,4];case 3:return s=a.sent(),[3,5];case 4:s=this._createServiceOptions(),a.label=5;case 5:return o=s,[4,this._proxy.startup(this.view.featuresTilingScheme,this._createConfiguration(),o)];case 6:return a.sent(),this.hasHighlight()?[4,this._proxy.setHighlight(y.keysOfMap(this._highlightIds))]:[3,8];case 7:a.sent(),a.label=8;case 8:return[4,this._onceTilesUpdated()];case 9:return a.sent(),[3,14];case 10:return u=e!==this._clientDataHash,l=t!==this._layerFilterHash,c=i!==this._featureDataHash||u,p=n!==this._meshHash,h=this._createConfiguration(),u||l||c||p?(d={invalidateFeatureData:c,invalidateMesh:p,layerFilterChanged:l},this._set("_pipelineIsUpdating",!0),[4,this._proxy.update(h,d)]):[3,12];case 11:a.sent(),a.label=12;case 12:return l?[4,this._onceTilesUpdated()]:[3,14];case 13:a.sent(),a.label=14;case 14:return this._clientDataHash=e,this._layerFilterHash=t,this._tileRendererHash=r,this._meshHash=n,this._featureDataHash=i,this.effects.forEach((function(e){return g.isSome(e)&&g.isSome(e.filter)&&e.filter.enable()})),this.tileRenderer.invalidateLabels(),this.tileRenderer.onConfigUpdate(),this._unlockAttributeTextureUpload(),this._forceAttributeTextureUpload(),this.requestUpdate(),[2]}}))}))}))),t._updateHighlight=m.debounce((function(){return s(t,void 0,void 0,(function(){return a(this,(function(e){return[2,this._proxy.setHighlight(y.keysOfMap(this._highlightIds))]}))}))})),t}return r(t,e),t.prototype.destroy=function(){this._proxy.destroy()},t.prototype.initialize=function(){var e=this;this.addResolvingPromise(p.safeCast(this._initProxy())),this.handles.add([this.clips.on("change",(function(){return e.tileRenderer&&e.tileRenderer.onConfigUpdate()}))])},t.prototype._initProxy=function(){return s(this,void 0,void 0,(function(){var e;return a(this,(function(t){if(this.layer.isTable)throw new d("featurelayerview:table-not-supported","table feature layer can't be displayed",{layer:this.layer});return this._proxy&&this._proxy.destroy(),e=this._createClientOptions(),this._set("_proxy",new O.default({client:e})),[2,this._proxy.when()]}))}))},Object.defineProperty(t.prototype,"labelsVisible",{get:function(){return!this.suspended&&this.layer.labelingInfo&&this.layer.labelsVisible},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"effect",{get:function(){return g.unwrapOr(this._effect,null)},set:function(e){var t=this._effect;g.isSome(t)&&g.isSome(t.filter)&&t.filter.enabled&&g.isSome(e)&&g.isSome(e.filter)&&e.filter.enable(),this._effect=e,this.notifyChange("effect")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"effects",{get:function(){return this.effect&&[this.effect]||[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numFeatures",{get:function(){var e=0;return this.attached&&this._tileStrategy.tiles.forEach((function(t){e+=t.iconDisplayRecords?t.iconDisplayRecords.length:0})),e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderingConfigHash",{get:function(){if(!this.layer)return null;var e=this.availableFields,t=this.layer,r=t.definitionExpression,i=t.renderer,n=t.labelingInfo,o="historicMoment"in this.layer?this.layer.historicMoment:null,a=this.timeExtent,s="filter"in this.layer&&this.layer.filter&&""+JSON.stringify(this.layer.filter.geometry)+this.layer.filter.where,u=JSON.stringify(this.clips);return JSON.stringify({filterHash:g.isSome(this.filter)&&this.filter.toJSON(),effectHash:g.isSome(this.effect)&&this.effect.toJSON(),streamFilter:s,definitionExpression:r,historicMoment:o,availableFields:e,renderer:i,labelingInfo:n,timeExtent:a,clipsHash:u})},enumerable:!0,configurable:!0}),t.prototype.highlight=function(e){var t,r=this;return e instanceof l?t=[e.getAttribute(this.layer.objectIdField||"__esri_stream_id__")]:"number"==typeof e?t=[e]:h.isCollection(e)?t=e.map((function(e){return e&&e.getAttribute(r.layer.objectIdField)})).toArray():Array.isArray(e)&&e.length>0&&(t="number"==typeof e[0]?e:e.map((function(e){return e&&e.getAttribute(r.layer.objectIdField)}))),t&&t.length?(t=t.filter((function(e){return null!=e})),this._addHighlight(t),{remove:function(){return r._removeHighlight(t)},pause:function(){return r._removeHighlight(t)},resume:function(){return r._addHighlight(t)}}):{remove:function(){},pause:function(){},resume:function(){}}},t.prototype.hasHighlight=function(){return!!this._highlightIds.size},t.prototype.hitTest=function(e,t){return p.safeCast(this._hitTest(e,t))},t.prototype.queryFeatures=function(e,t){var r=this;return this.queryFeaturesJSON(e,t).then((function(e){var t=x.fromJSON(e);return t.features.forEach((function(e){e.layer=r.layer,e.sourceLayer=r.layer})),t}))},t.prototype.queryFeaturesJSON=function(e,t){return p.safeCast(this._proxy.queryFeatures(this._cleanUpQuery(e),t))},t.prototype.queryObjectIds=function(e,t){return p.safeCast(this._proxy.queryObjectIds(this._cleanUpQuery(e),t))},t.prototype.queryFeatureCount=function(e,t){return p.safeCast(this._proxy.queryFeatureCount(this._cleanUpQuery(e),t))},t.prototype.queryExtent=function(e,t){return p.safeCast(this._proxy.queryExtent(this._cleanUpQuery(e),t).then((function(e){return{count:e.count,extent:u.Extent.fromJSON(e.extent)}})))},t.prototype.setVisibility=function(e,t){t?this._visibilityOverrides.delete(e):this._visibilityOverrides.add(e),this._renderingConfigHashChanged()},t.prototype.update=function(e){this.attached&&this._tileStrategy&&this.tileRenderer&&(this._tileStrategy.update(e)||this.requestUpdate(),this._proxy.setViewState(e.state),this.notifyChange("numFeatures"),this.notifyChange("updating"))},t.prototype.attach=function(){var e=this;this.view.timeline.record(this.layer.title+" (FeatureLayer) Attach"),this._tileStrategy=new C({cachePolicy:"purge",acquireTile:function(t){return e._acquireTile(t)},releaseTile:function(t){return e._releaseTile(t)},tileInfoView:this.view.featuresTilingScheme,buffer:0}),this.handles.add([b.watch(this,"layer.processing?.version",(function(t){return e._proxy.redraw()})),this.layer.on("edits",(function(t){return e._proxy.onEdits(t)})),b.init(this,"renderingConfigHash",(function(){return e._renderingConfigHashChanged()}),!0)],"attach")},t.prototype.detach=function(){this.container.removeAllChildren(),this.handles.remove("attach"),this._updatingPipelineConfig=!1,this.tileRenderer&&(this.tileRenderer.uninstall(this.container),this.tileRenderer=null),this._tileStrategy&&(this._tileStrategy.destroy(),this._tileStrategy=null)},t.prototype.moveStart=function(){this.requestUpdate()},t.prototype.viewChange=function(){this.requestUpdate()},t.prototype.moveEnd=function(){this.requestUpdate()},t.prototype.fetchPopupFeatures=function(e,t){return s(this,void 0,void 0,(function(){var r,i,n;return a(this,(function(o){return(r=this.validateFetchPopupFeatures(t))?[2,m.reject(r)]:g.isSome(t)&&0===t.clientGraphics.length?[2,m.resolve([])]:(i=this.fetchClientPopupFeatures(t),e?(n=this._fetchServicePopupFeatures(e,t),[2,m.eachAlwaysValues([i,n]).then(c.flatten)]):[2,i])}))}))},t.prototype._fetchServicePopupFeatures=function(e,t){return s(this,void 0,void 0,(function(){var r,i,n,o,s,u,l,c,p,h;return a(this,(function(a){switch(a.label){case 0:return[4,this.createPopupQuery(t)];case 1:if(r=a.sent(),i=this.layer,n=i.renderer,o=w.calculateTolerance(n),r.geometry=this.createFetchPopupFeaturesQueryGeometry(e,o),s=new Set,u=i.objectIdField,l=g.isSome(t)?t.clientGraphics:null)for(c=0,p=l;c<p.length;c++)h=p[c],s.add(h.attributes[u]);return[2,i.queryFeatures(r).then((function(e){return e.features.filter((function(e){return!s.has(e.attributes[u])}))}))]}}))}))},t.prototype.createFetchPopupFeaturesQueryGeometry=function(e,t){return I.createQueryGeometry(e,t,this.view)},t.prototype.doRefresh=function(e){return s(this,void 0,void 0,(function(){return a(this,(function(e){return this._proxy.refresh(),[2]}))}))},t.prototype.isUpdating=function(){return null!=this.layer.renderer&&(null!=this._updatingRequiredFieldsPromise||null==this.tileRenderer||!this._proxy||!this._proxy.isReady||this._pipelineIsUpdating||this._updatingPipelineConfig||this.tileRenderer.updating)},t.prototype._createClientOptions=function(){var e=this;return{executeProcessing:function(t){if(!("processing"in e.layer&&e.layer.processing))return t.featureSet;var r=e.layer.processing;return r.process(t.featureSet,r.options)||m.reject(new d("FeatureLayer","invalid processing.process() method, returns nothing"))},setUpdating:function(t){e._set("_pipelineIsUpdating",t)}}},t.prototype._createServiceOptions=function(){var e=this.layer,t=e.capabilities,r=e.objectIdField,i=e.fields.map((function(e){return e.toJSON()})),n=e.fullExtent&&e.fullExtent.toJSON(),o=P.toJSONGeometryType(e.geometryType),a=e.timeInfo&&e.timeInfo.toJSON()||null;return{type:"on-demand",maxRecordCount:"maxRecordCount"in this.layer&&this.layer.maxRecordCount,tileMaxRecordCount:"tileMaxRecordCount"in this.layer&&this.layer.tileMaxRecordCount,capabilities:t,fields:i,fullExtent:n,geometryType:o,objectIdField:r,source:"dynamicDataSource"in e?e.dynamicDataSource?e.parsedUrl:e.url+"/"+e.layerId:e.parsedUrl,timeInfo:a}},t.prototype._createMemoryServiceOptions=function(e){return s(this,void 0,void 0,(function(){var t;return a(this,(function(r){switch(r.label){case 0:return[4,e.openPorts()];case 1:return t=r.sent(),[2,o({},this._createServiceOptions(),{type:"memory",source:t})]}}))}))},t.prototype._cleanUpQuery=function(e){var t=S.from(e)||this.createQuery();return t.outSpatialReference||(t.outSpatialReference=this.view.spatialReference),t},t.prototype._acquireTile=function(e){var t=this,r=this.tileRenderer.acquireTile(e);return r.once("attach",(function(){t.requestUpdate()})),r},t.prototype._releaseTile=function(e){this.tileRenderer.releaseTile(e)},t.prototype._initTileRenderer=function(){return s(this,void 0,void 0,(function(){var e;return a(this,(function(t){switch(t.label){case 0:return[4,E.createOrReuseTileRenderer(this.tileRenderer,this.layer.renderer,{layerView:this,tileInfoView:this.view.featuresTilingScheme,layer:this.layer})];case 1:return e=t.sent(),this.tileRenderer?(this._tileStrategy.clear(),this.tileRenderer.uninstall(this.container),this.tileRenderer.destroy(),this.tileRenderer=null,[4,this._initProxy()]):[3,3];case 2:t.sent(),t.label=3;case 3:return this._proxy.tileRenderer=e,this._set("tileRenderer",e),this.tileRenderer.install(this.container),this.tileRenderer.onConfigUpdate(),[2,this.tileRenderer]}}))}))},t.prototype._createLayerFilterHash=function(){return this.layer.definitionExpression+"."+(("feature"===this.layer.type||"csv"===this.layer.type)&&this.layer.historicMoment&&this.layer.historicMoment.getTime())+"."+(("feature"===this.layer.type||"csv"===this.layer.type)&&this.layer.gdbVersion)},t.prototype._createTileRendererHash=function(){return("heatmap"===this.layer.renderer.type?"heatmap":"symbol")+"."+("dot-density"===this.layer.renderer.type)},t.prototype._createFeatureDataHash=function(){var e=this.layer.renderer.getAttributeHash(),t=JSON.stringify(this.filter),r=g.isSome(this.effect)&&JSON.stringify(this.effect.filter),i=JSON.stringify(this.timeExtent),n="";return this._visibilityOverrides.forEach((function(e){return n+=e})),e+"."+t+"."+r+"."+i+"."+n},t.prototype._createMeshHash=function(){var e=this.layer.renderer,t=M.getVVFlags("visualVariables"in e&&e.visualVariables||[]),r=this.layer.labelingInfo&&this.layer.labelingInfo.map((function(e){return JSON.stringify(e)})).join("/");return e.getMeshHash()+"."+t+"."+r},t.prototype._injectOverrides=function(e){var t=this.filter&&this.filter.timeExtent,r=this.timeExtent&&t?this.timeExtent.intersection(t):this.timeExtent||t;if(!this._visibilityOverrides.size&&!r)return e;var i=g.isSome(this.filter)&&this.filter.clone()||new T;return i.hiddenIds=this._visibilityOverrides,i.timeExtent=r,i},t.prototype._createConfiguration=function(){var e=R.simplifyVVRenderer(this.layer.renderer),t=this.layer.labelingInfo,r=("feature"===this.layer.type||"csv"===this.layer.type)&&this.layer.historicMoment&&this.layer.historicMoment.getTime(),i=("feature"===this.layer.type||"csv"===this.layer.type)&&this.layer.gdbVersion,n=new Array(M.definitions.MAX_FILTERS),o=this._injectOverrides(this.filter);return n[0]=g.isSome(o)&&o.toJSON()||null,n[1]=g.isSome(this.effect)&&this.effect.filter&&this.effect.filter.toJSON()||null,{definitionExpression:this.layer.definitionExpression,availableFields:this.availableFields,labelingInfo:t&&t.map((function(e){return e.toJSON()})),renderer:e.toJSON(),gdbVersion:i,historicMoment:r,devicePixelRatio:window.devicePixelRatio||1,filters:n,processing:"processing"in this.layer&&this.layer.processing&&this.layer.processing.toWorker()}},t.prototype._hasRequiredSupport=function(e){return!("dot-density"===e.renderer.type&&!f("esri-webgl-texture-float")&&(k.error(new d("webgl-missing-extension","Missing WebGL extension OES_Texture_Float which is required for DotDensity")),1))},t.prototype._onceTilesUpdated=function(){return this.requestUpdate(),b.whenFalseOnce(this,"_pipelineIsUpdating",!0)},t.prototype._lockAttributeTextureUpload=function(){this.tileRenderer&&this.tileRenderer.lockAttributeTextureUpload()},t.prototype._unlockAttributeTextureUpload=function(){this.tileRenderer&&this.tileRenderer.unlockAttributeTextureUpload()},t.prototype._forceAttributeTextureUpload=function(){this.tileRenderer&&this.tileRenderer.forceAttributeTextureUpload()},t.prototype._renderingConfigHashChanged=function(){var e=this;this.view.timeline.begin(this.layer.title+" (FeatureLayer) Initial Pipeline Config");var t=this._onRenderingConfigChange();this._updatingPromise=t;var r=function(){t===e._updatingPromise&&e._set("_updatingPipelineConfig",!1),e.view.timeline.end(e.layer.title+" (FeatureLayer) Initial Pipeline Config")};t.then(r).catch((function(e){m.isAbortError(e)||k.error(e),r()}))},t.prototype._addHighlight=function(e){for(var t=0,r=e;t<r.length;t++){var i=r[t];if(this._highlightIds.has(i)){var n=this._highlightIds.get(i);this._highlightIds.set(i,n+1)}else this._highlightIds.set(i,1)}this._updateHighlight().catch((function(e){m.isAbortError(e)||k.error(e)}))},t.prototype._removeHighlight=function(e){for(var t=0,r=e;t<r.length;t++){var i=r[t];if(this._highlightIds.has(i)){var n=this._highlightIds.get(i)-1;0===n?this._highlightIds.delete(i):this._highlightIds.set(i,n)}}this._updateHighlight().catch((function(e){m.isAbortError(e)||k.error(e)}))},t.prototype._hitTest=function(e,t){return s(this,void 0,void 0,(function(){var r,i,n,o;return a(this,(function(a){switch(a.label){case 0:return this.suspended||!this.tileRenderer?[2,null]:[4,this.tileRenderer.hitTest(e,t)];case 1:return 0!==(r=a.sent()).length?[3,3]:[4,m.after(1)];case 2:return a.sent(),[2,null];case 3:return[4,this._proxy.getObjectId(r[0])];case 4:return i=a.sent(),[4,this._proxy.queryFeatures(new S({objectIds:[i],outSpatialReference:this.view.spatialReference,returnGeometry:!0}))];case 5:return(n=a.sent()).features[0]?((o=l.fromJSON(n.features[0])).layer=this.layer,o.sourceLayer=this.layer,g.isSome(o.geometry)&&(o.geometry.spatialReference=this.view.spatialReference),[2,o]):[2,null]}}))}))},i([_.property()],t.prototype,"_proxy",void 0),i([_.property()],t.prototype,"_pipelineIsUpdating",void 0),i([_.property()],t.prototype,"_updatingPipelineConfig",void 0),i([_.property({dependsOn:["suspended","layer.labelingInfo","layer.labelsVisible"]})],t.prototype,"labelsVisible",null),i([_.property({type:T})],t.prototype,"filter",void 0),i([_.property({type:N})],t.prototype,"effect",null),i([_.property({readOnly:!0,dependsOn:["effect"]})],t.prototype,"effects",null),i([_.property()],t.prototype,"numFeatures",null),i([_.property({dependsOn:["layer.renderer","availableFields","layer.definitionExpression","layer.filter?","layer.historicMoment?","layer.labelingInfo","filter","effect","timeExtent","clips"]})],t.prototype,"renderingConfigHash",null),i([_.property()],t.prototype,"tileRenderer",void 0),i([_.property({dependsOn:["layer.renderer","tileRenderer.updating","_updatingPipelineConfig","_pipelineIsUpdating","_updatingRequiredFieldsPromise","_proxy","_proxy.isReady?"]})],t.prototype,"updating",void 0),i([_.subclass("esri.views.2d.layers.FeatureLayerView2D")],t)}(_.declared(A.FeatureLayerView(q.RefreshableLayerView(F.LayerView2D(j)))))}.apply(null,i))||(e.exports=n)},879:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(889)],void 0===(n=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.mat4=r}.apply(null,i))||(e.exports=n)},889:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(180),r(76)],void 0===(n=function(e,t,r,i){function n(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function o(e,t,r){var i=t[0],n=t[1],o=t[2],a=t[3],s=t[4],u=t[5],l=t[6],c=t[7],p=t[8],h=t[9],d=t[10],f=t[11],y=t[12],v=t[13],g=t[14],m=t[15],b=r[0],_=r[1],w=r[2],x=r[3];return e[0]=b*i+_*s+w*p+x*y,e[1]=b*n+_*u+w*h+x*v,e[2]=b*o+_*l+w*d+x*g,e[3]=b*a+_*c+w*f+x*m,b=r[4],_=r[5],w=r[6],x=r[7],e[4]=b*i+_*s+w*p+x*y,e[5]=b*n+_*u+w*h+x*v,e[6]=b*o+_*l+w*d+x*g,e[7]=b*a+_*c+w*f+x*m,b=r[8],_=r[9],w=r[10],x=r[11],e[8]=b*i+_*s+w*p+x*y,e[9]=b*n+_*u+w*h+x*v,e[10]=b*o+_*l+w*d+x*g,e[11]=b*a+_*c+w*f+x*m,b=r[12],_=r[13],w=r[14],x=r[15],e[12]=b*i+_*s+w*p+x*y,e[13]=b*n+_*u+w*h+x*v,e[14]=b*o+_*l+w*d+x*g,e[15]=b*a+_*c+w*f+x*m,e}function a(e,t,r){var i=t[0],n=t[1],o=t[2],a=t[3],s=i+i,u=n+n,l=o+o,c=i*s,p=i*u,h=i*l,d=n*u,f=n*l,y=o*l,v=a*s,g=a*u,m=a*l;return e[0]=1-(d+y),e[1]=p+m,e[2]=h-g,e[3]=0,e[4]=p-m,e[5]=1-(c+y),e[6]=f+v,e[7]=0,e[8]=h+g,e[9]=f-v,e[10]=1-(c+d),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function s(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e}Object.defineProperty(t,"__esModule",{value:!0}),t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.set=function(e,t,r,i,n,o,a,s,u,l,c,p,h,d,f,y,v){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e[4]=o,e[5]=a,e[6]=s,e[7]=u,e[8]=l,e[9]=c,e[10]=p,e[11]=h,e[12]=d,e[13]=f,e[14]=y,e[15]=v,e},t.identity=n,t.transpose=function(e,t){if(e===t){var r=t[1],i=t[2],n=t[3],o=t[6],a=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=i,e[9]=o,e[11]=t[14],e[12]=n,e[13]=a,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e},t.invert=function(e,t){var r=t[0],i=t[1],n=t[2],o=t[3],a=t[4],s=t[5],u=t[6],l=t[7],c=t[8],p=t[9],h=t[10],d=t[11],f=t[12],y=t[13],v=t[14],g=t[15],m=r*s-i*a,b=r*u-n*a,_=r*l-o*a,w=i*u-n*s,x=i*l-o*s,S=n*l-o*u,M=c*y-p*f,F=c*v-h*f,E=c*g-d*f,R=p*v-h*y,O=p*g-d*y,I=h*g-d*v,P=m*I-b*O+_*R+w*E-x*F+S*M;return P?(P=1/P,e[0]=(s*I-u*O+l*R)*P,e[1]=(n*O-i*I-o*R)*P,e[2]=(y*S-v*x+g*w)*P,e[3]=(h*x-p*S-d*w)*P,e[4]=(u*E-a*I-l*F)*P,e[5]=(r*I-n*E+o*F)*P,e[6]=(v*_-f*S-g*b)*P,e[7]=(c*S-h*_+d*b)*P,e[8]=(a*O-s*E+l*M)*P,e[9]=(i*E-r*O-o*M)*P,e[10]=(f*x-y*_+g*m)*P,e[11]=(p*_-c*x-d*m)*P,e[12]=(s*F-a*R-u*M)*P,e[13]=(r*R-i*F+n*M)*P,e[14]=(y*b-f*w-v*m)*P,e[15]=(c*w-p*b+h*m)*P,e):null},t.adjoint=function(e,t){var r=t[0],i=t[1],n=t[2],o=t[3],a=t[4],s=t[5],u=t[6],l=t[7],c=t[8],p=t[9],h=t[10],d=t[11],f=t[12],y=t[13],v=t[14],g=t[15];return e[0]=s*(h*g-d*v)-p*(u*g-l*v)+y*(u*d-l*h),e[1]=-(i*(h*g-d*v)-p*(n*g-o*v)+y*(n*d-o*h)),e[2]=i*(u*g-l*v)-s*(n*g-o*v)+y*(n*l-o*u),e[3]=-(i*(u*d-l*h)-s*(n*d-o*h)+p*(n*l-o*u)),e[4]=-(a*(h*g-d*v)-c*(u*g-l*v)+f*(u*d-l*h)),e[5]=r*(h*g-d*v)-c*(n*g-o*v)+f*(n*d-o*h),e[6]=-(r*(u*g-l*v)-a*(n*g-o*v)+f*(n*l-o*u)),e[7]=r*(u*d-l*h)-a*(n*d-o*h)+c*(n*l-o*u),e[8]=a*(p*g-d*y)-c*(s*g-l*y)+f*(s*d-l*p),e[9]=-(r*(p*g-d*y)-c*(i*g-o*y)+f*(i*d-o*p)),e[10]=r*(s*g-l*y)-a*(i*g-o*y)+f*(i*l-o*s),e[11]=-(r*(s*d-l*p)-a*(i*d-o*p)+c*(i*l-o*s)),e[12]=-(a*(p*v-h*y)-c*(s*v-u*y)+f*(s*h-u*p)),e[13]=r*(p*v-h*y)-c*(i*v-n*y)+f*(i*h-n*p),e[14]=-(r*(s*v-u*y)-a*(i*v-n*y)+f*(i*u-n*s)),e[15]=r*(s*h-u*p)-a*(i*h-n*p)+c*(i*u-n*s),e},t.determinant=function(e){var t=e[0],r=e[1],i=e[2],n=e[3],o=e[4],a=e[5],s=e[6],u=e[7],l=e[8],c=e[9],p=e[10],h=e[11],d=e[12],f=e[13],y=e[14],v=e[15];return(t*a-r*o)*(p*v-h*y)-(t*s-i*o)*(c*v-h*f)+(t*u-n*o)*(c*y-p*f)+(r*s-i*a)*(l*v-h*d)-(r*u-n*a)*(l*y-p*d)+(i*u-n*s)*(l*f-c*d)},t.multiply=o,t.translate=function(e,t,r){var i=r[0],n=r[1],o=r[2],a=void 0,s=void 0,u=void 0,l=void 0,c=void 0,p=void 0,h=void 0,d=void 0,f=void 0,y=void 0,v=void 0,g=void 0;return t===e?(e[12]=t[0]*i+t[4]*n+t[8]*o+t[12],e[13]=t[1]*i+t[5]*n+t[9]*o+t[13],e[14]=t[2]*i+t[6]*n+t[10]*o+t[14],e[15]=t[3]*i+t[7]*n+t[11]*o+t[15]):(a=t[0],s=t[1],u=t[2],l=t[3],c=t[4],p=t[5],h=t[6],d=t[7],f=t[8],y=t[9],v=t[10],g=t[11],e[0]=a,e[1]=s,e[2]=u,e[3]=l,e[4]=c,e[5]=p,e[6]=h,e[7]=d,e[8]=f,e[9]=y,e[10]=v,e[11]=g,e[12]=a*i+c*n+f*o+t[12],e[13]=s*i+p*n+y*o+t[13],e[14]=u*i+h*n+v*o+t[14],e[15]=l*i+d*n+g*o+t[15]),e},t.scale=function(e,t,r){var i=r[0],n=r[1],o=r[2];return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.rotate=function(e,t,r,n){var o=n[0],a=n[1],s=n[2],u=Math.sqrt(o*o+a*a+s*s),l=void 0,c=void 0,p=void 0,h=void 0,d=void 0,f=void 0,y=void 0,v=void 0,g=void 0,m=void 0,b=void 0,_=void 0,w=void 0,x=void 0,S=void 0,M=void 0,F=void 0,E=void 0,R=void 0,O=void 0,I=void 0,P=void 0,C=void 0,A=void 0;return u<i.EPSILON?null:(o*=u=1/u,a*=u,s*=u,l=Math.sin(r),p=1-(c=Math.cos(r)),h=t[0],d=t[1],f=t[2],y=t[3],v=t[4],g=t[5],m=t[6],b=t[7],_=t[8],w=t[9],x=t[10],S=t[11],M=o*o*p+c,F=a*o*p+s*l,E=s*o*p-a*l,R=o*a*p-s*l,O=a*a*p+c,I=s*a*p+o*l,P=o*s*p+a*l,C=a*s*p-o*l,A=s*s*p+c,e[0]=h*M+v*F+_*E,e[1]=d*M+g*F+w*E,e[2]=f*M+m*F+x*E,e[3]=y*M+b*F+S*E,e[4]=h*R+v*O+_*I,e[5]=d*R+g*O+w*I,e[6]=f*R+m*O+x*I,e[7]=y*R+b*O+S*I,e[8]=h*P+v*C+_*A,e[9]=d*P+g*C+w*A,e[10]=f*P+m*C+x*A,e[11]=y*P+b*C+S*A,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)},t.rotateX=function(e,t,r){var i=Math.sin(r),n=Math.cos(r),o=t[4],a=t[5],s=t[6],u=t[7],l=t[8],c=t[9],p=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*n+l*i,e[5]=a*n+c*i,e[6]=s*n+p*i,e[7]=u*n+h*i,e[8]=l*n-o*i,e[9]=c*n-a*i,e[10]=p*n-s*i,e[11]=h*n-u*i,e},t.rotateY=function(e,t,r){var i=Math.sin(r),n=Math.cos(r),o=t[0],a=t[1],s=t[2],u=t[3],l=t[8],c=t[9],p=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*n-l*i,e[1]=a*n-c*i,e[2]=s*n-p*i,e[3]=u*n-h*i,e[8]=o*i+l*n,e[9]=a*i+c*n,e[10]=s*i+p*n,e[11]=u*i+h*n,e},t.rotateZ=function(e,t,r){var i=Math.sin(r),n=Math.cos(r),o=t[0],a=t[1],s=t[2],u=t[3],l=t[4],c=t[5],p=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*n+l*i,e[1]=a*n+c*i,e[2]=s*n+p*i,e[3]=u*n+h*i,e[4]=l*n-o*i,e[5]=c*n-a*i,e[6]=p*n-s*i,e[7]=h*n-u*i,e},t.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},t.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromRotation=function(e,t,r){var n=r[0],o=r[1],a=r[2],s=Math.sqrt(n*n+o*o+a*a),u=void 0,l=void 0,c=void 0;return s<i.EPSILON?null:(n*=s=1/s,o*=s,a*=s,u=Math.sin(t),c=1-(l=Math.cos(t)),e[0]=n*n*c+l,e[1]=o*n*c+a*u,e[2]=a*n*c-o*u,e[3]=0,e[4]=n*o*c-a*u,e[5]=o*o*c+l,e[6]=a*o*c+n*u,e[7]=0,e[8]=n*a*c+o*u,e[9]=o*a*c-n*u,e[10]=a*a*c+l,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)},t.fromXRotation=function(e,t){var r=Math.sin(t),i=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromYRotation=function(e,t){var r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromZRotation=function(e,t){var r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromRotationTranslation=a,t.fromQuat2=function(e,t){var r=u,i=-t[0],n=-t[1],o=-t[2],s=t[3],l=t[4],c=t[5],p=t[6],h=t[7],d=i*i+n*n+o*o+s*s;return d>0?(r[0]=2*(l*s+h*i+c*o-p*n)/d,r[1]=2*(c*s+h*n+p*i-l*o)/d,r[2]=2*(p*s+h*o+l*n-c*i)/d):(r[0]=2*(l*s+h*i+c*o-p*n),r[1]=2*(c*s+h*n+p*i-l*o),r[2]=2*(p*s+h*o+l*n-c*i)),a(e,t,r),e};var u=r.create();t.getTranslation=function(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e},t.getScaling=function(e,t){var r=t[0],i=t[1],n=t[2],o=t[4],a=t[5],s=t[6],u=t[8],l=t[9],c=t[10];return e[0]=Math.sqrt(r*r+i*i+n*n),e[1]=Math.sqrt(o*o+a*a+s*s),e[2]=Math.sqrt(u*u+l*l+c*c),e},t.getRotation=function(e,t){var r=t[0]+t[5]+t[10],i=0;return r>0?(i=2*Math.sqrt(r+1),e[3]=.25*i,e[0]=(t[6]-t[9])/i,e[1]=(t[8]-t[2])/i,e[2]=(t[1]-t[4])/i):t[0]>t[5]&&t[0]>t[10]?(i=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/i,e[0]=.25*i,e[1]=(t[1]+t[4])/i,e[2]=(t[8]+t[2])/i):t[5]>t[10]?(i=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/i,e[0]=(t[1]+t[4])/i,e[1]=.25*i,e[2]=(t[6]+t[9])/i):(i=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/i,e[0]=(t[8]+t[2])/i,e[1]=(t[6]+t[9])/i,e[2]=.25*i),e},t.fromRotationTranslationScale=function(e,t,r,i){var n=t[0],o=t[1],a=t[2],s=t[3],u=n+n,l=o+o,c=a+a,p=n*u,h=n*l,d=n*c,f=o*l,y=o*c,v=a*c,g=s*u,m=s*l,b=s*c,_=i[0],w=i[1],x=i[2];return e[0]=(1-(f+v))*_,e[1]=(h+b)*_,e[2]=(d-m)*_,e[3]=0,e[4]=(h-b)*w,e[5]=(1-(p+v))*w,e[6]=(y+g)*w,e[7]=0,e[8]=(d+m)*x,e[9]=(y-g)*x,e[10]=(1-(p+f))*x,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e},t.fromRotationTranslationScaleOrigin=function(e,t,r,i,n){var o=t[0],a=t[1],s=t[2],u=t[3],l=o+o,c=a+a,p=s+s,h=o*l,d=o*c,f=o*p,y=a*c,v=a*p,g=s*p,m=u*l,b=u*c,_=u*p,w=i[0],x=i[1],S=i[2],M=n[0],F=n[1],E=n[2],R=(1-(y+g))*w,O=(d+_)*w,I=(f-b)*w,P=(d-_)*x,C=(1-(h+g))*x,A=(v+m)*x,j=(f+b)*S,q=(v-m)*S,T=(1-(h+y))*S;return e[0]=R,e[1]=O,e[2]=I,e[3]=0,e[4]=P,e[5]=C,e[6]=A,e[7]=0,e[8]=j,e[9]=q,e[10]=T,e[11]=0,e[12]=r[0]+M-(R*M+P*F+j*E),e[13]=r[1]+F-(O*M+C*F+q*E),e[14]=r[2]+E-(I*M+A*F+T*E),e[15]=1,e},t.fromQuat=function(e,t){var r=t[0],i=t[1],n=t[2],o=t[3],a=r+r,s=i+i,u=n+n,l=r*a,c=i*a,p=i*s,h=n*a,d=n*s,f=n*u,y=o*a,v=o*s,g=o*u;return e[0]=1-p-f,e[1]=c+g,e[2]=h-v,e[3]=0,e[4]=c-g,e[5]=1-l-f,e[6]=d+y,e[7]=0,e[8]=h+v,e[9]=d-y,e[10]=1-l-p,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.frustum=function(e,t,r,i,n,o,a){var s=1/(r-t),u=1/(n-i),l=1/(o-a);return e[0]=2*o*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*u,e[6]=0,e[7]=0,e[8]=(r+t)*s,e[9]=(n+i)*u,e[10]=(a+o)*l,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*o*2*l,e[15]=0,e},t.perspective=function(e,t,r,i,n){var o=1/Math.tan(t/2),a=void 0;return e[0]=o/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=n&&n!==1/0?(a=1/(i-n),e[10]=(n+i)*a,e[14]=2*n*i*a):(e[10]=-1,e[14]=-2*i),e},t.perspectiveFromFieldOfView=function(e,t,r,i){var n=Math.tan(t.upDegrees*Math.PI/180),o=Math.tan(t.downDegrees*Math.PI/180),a=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),u=2/(a+s),l=2/(n+o);return e[0]=u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=-(a-s)*u*.5,e[9]=(n-o)*l*.5,e[10]=i/(r-i),e[11]=-1,e[12]=0,e[13]=0,e[14]=i*r/(r-i),e[15]=0,e},t.ortho=function(e,t,r,i,n,o,a){var s=1/(t-r),u=1/(i-n),l=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*l,e[11]=0,e[12]=(t+r)*s,e[13]=(n+i)*u,e[14]=(a+o)*l,e[15]=1,e},t.lookAt=function(e,t,r,o){var a=void 0,s=void 0,u=void 0,l=void 0,c=void 0,p=void 0,h=void 0,d=void 0,f=void 0,y=void 0,v=t[0],g=t[1],m=t[2],b=o[0],_=o[1],w=o[2],x=r[0],S=r[1],M=r[2];return Math.abs(v-x)<i.EPSILON&&Math.abs(g-S)<i.EPSILON&&Math.abs(m-M)<i.EPSILON?n(e):(h=v-x,d=g-S,f=m-M,a=_*(f*=y=1/Math.sqrt(h*h+d*d+f*f))-w*(d*=y),s=w*(h*=y)-b*f,u=b*d-_*h,(y=Math.sqrt(a*a+s*s+u*u))?(a*=y=1/y,s*=y,u*=y):(a=0,s=0,u=0),l=d*u-f*s,c=f*a-h*u,p=h*s-d*a,(y=Math.sqrt(l*l+c*c+p*p))?(l*=y=1/y,c*=y,p*=y):(l=0,c=0,p=0),e[0]=a,e[1]=l,e[2]=h,e[3]=0,e[4]=s,e[5]=c,e[6]=d,e[7]=0,e[8]=u,e[9]=p,e[10]=f,e[11]=0,e[12]=-(a*v+s*g+u*m),e[13]=-(l*v+c*g+p*m),e[14]=-(h*v+d*g+f*m),e[15]=1,e)},t.targetTo=function(e,t,r,i){var n=t[0],o=t[1],a=t[2],s=i[0],u=i[1],l=i[2],c=n-r[0],p=o-r[1],h=a-r[2],d=c*c+p*p+h*h;d>0&&(c*=d=1/Math.sqrt(d),p*=d,h*=d);var f=u*h-l*p,y=l*c-s*h,v=s*p-u*c;return(d=f*f+y*y+v*v)>0&&(f*=d=1/Math.sqrt(d),y*=d,v*=d),e[0]=f,e[1]=y,e[2]=v,e[3]=0,e[4]=p*v-h*y,e[5]=h*f-c*v,e[6]=c*y-p*f,e[7]=0,e[8]=c,e[9]=p,e[10]=h,e[11]=0,e[12]=n,e[13]=o,e[14]=a,e[15]=1,e},t.str=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},t.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))},t.add=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e},t.subtract=s,t.multiplyScalar=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12]*r,e[13]=t[13]*r,e[14]=t[14]*r,e[15]=t[15]*r,e},t.multiplyScalarAndAdd=function(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e[4]=t[4]+r[4]*i,e[5]=t[5]+r[5]*i,e[6]=t[6]+r[6]*i,e[7]=t[7]+r[7]*i,e[8]=t[8]+r[8]*i,e[9]=t[9]+r[9]*i,e[10]=t[10]+r[10]*i,e[11]=t[11]+r[11]*i,e[12]=t[12]+r[12]*i,e[13]=t[13]+r[13]*i,e[14]=t[14]+r[14]*i,e[15]=t[15]+r[15]*i,e},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]},t.equals=function(e,t){var r=e[0],n=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],p=e[8],h=e[9],d=e[10],f=e[11],y=e[12],v=e[13],g=e[14],m=e[15],b=t[0],_=t[1],w=t[2],x=t[3],S=t[4],M=t[5],F=t[6],E=t[7],R=t[8],O=t[9],I=t[10],P=t[11],C=t[12],A=t[13],j=t[14],q=t[15];return Math.abs(r-b)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(n-_)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(_))&&Math.abs(o-w)<=i.EPSILON*Math.max(1,Math.abs(o),Math.abs(w))&&Math.abs(a-x)<=i.EPSILON*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(s-S)<=i.EPSILON*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(u-M)<=i.EPSILON*Math.max(1,Math.abs(u),Math.abs(M))&&Math.abs(l-F)<=i.EPSILON*Math.max(1,Math.abs(l),Math.abs(F))&&Math.abs(c-E)<=i.EPSILON*Math.max(1,Math.abs(c),Math.abs(E))&&Math.abs(p-R)<=i.EPSILON*Math.max(1,Math.abs(p),Math.abs(R))&&Math.abs(h-O)<=i.EPSILON*Math.max(1,Math.abs(h),Math.abs(O))&&Math.abs(d-I)<=i.EPSILON*Math.max(1,Math.abs(d),Math.abs(I))&&Math.abs(f-P)<=i.EPSILON*Math.max(1,Math.abs(f),Math.abs(P))&&Math.abs(y-C)<=i.EPSILON*Math.max(1,Math.abs(y),Math.abs(C))&&Math.abs(v-A)<=i.EPSILON*Math.max(1,Math.abs(v),Math.abs(A))&&Math.abs(g-j)<=i.EPSILON*Math.max(1,Math.abs(g),Math.abs(j))&&Math.abs(m-q)<=i.EPSILON*Math.max(1,Math.abs(m),Math.abs(q))},t.mul=o,t.sub=s}.apply(null,i))||(e.exports=n)},967:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(0),r(1),r(7),r(20),r(83),r(56),r(12),r(3),r(5),r(2),r(55),r(272)],void 0===(n=function(e,t,r,i,n,o,a,s,u,l,c,p,h,d){var f=new u.default({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),y=new u.default({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});return function(e){function t(t){var r=e.call(this,t)||this;return r.where=null,r.geometry=null,r.spatialRelationship="intersects",r.hiddenIds=new Set,r.distance=void 0,r.objectIds=null,r.units=null,r.timeExtent=null,r.enabled=!1,r}var u;return i(t,e),u=t,t.prototype.writeWhere=function(e,t,r){t.where=e||"1=1"},t.prototype.enable=function(){this._set("enabled",!0)},t.prototype.createQuery=function(e){void 0===e&&(e={});var t=this,r=t.where,i=t.geometry,o=t.spatialRelationship,a=t.timeExtent,s=t.objectIds,u=t.units,l=t.distance;return new d(n({geometry:c.clone(i),objectIds:c.clone(s),spatialRelationship:o,timeExtent:c.clone(a),where:r,units:u,distance:l},e))},t.prototype.clone=function(){var e=this,t=e.where,r=e.geometry,i=e.spatialRelationship,n=e.hiddenIds,o=e.timeExtent,a=e.objectIds,s=e.units,l=e.distance,p=new Set;return n.forEach((function(e){return p.add(e)})),new u({geometry:c.clone(r),hiddenIds:p,objectIds:c.clone(a),spatialRelationship:i,timeExtent:c.clone(o),where:t,units:s,distance:l})},r([p.property({type:String})],t.prototype,"where",void 0),r([p.writer("where")],t.prototype,"writeWhere",null),r([p.property({types:o.geometryTypes,json:{read:h.fromJSON,write:!0}})],t.prototype,"geometry",void 0),r([p.property({type:String,json:{read:{source:"spatialRel",reader:f.read},write:{target:"spatialRel",writer:f.write}}})],t.prototype,"spatialRelationship",void 0),r([p.property({json:{write:function(e,t,r){return t[r]=s.valuesOfSet(e)},read:function(e,t){return s.SetFromValues(e)}}})],t.prototype,"hiddenIds",void 0),r([p.property({type:Number,json:{write:{overridePolicy:function(e){return{enabled:e>0}}}}})],t.prototype,"distance",void 0),r([p.property({type:[Number],json:{write:!0}})],t.prototype,"objectIds",void 0),r([p.property({type:String,json:{read:y.read,write:{writer:y.write,overridePolicy:function(e){return{enabled:e&&this.distance>0}}}}})],t.prototype,"units",void 0),r([p.property({type:a,json:{write:!0}})],t.prototype,"timeExtent",void 0),r([p.property({readOnly:!0})],t.prototype,"enabled",void 0),u=r([p.subclass("esri.views.layers.support.FeatureFilter")],t)}(p.declared(l.JSONSupport))}.apply(null,i))||(e.exports=n)}}]);