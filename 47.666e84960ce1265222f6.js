(function(){(this||window).webpackJsonp.registerAbsMids({"esri/layers/graphics/OptimizedGeometry":876,"esri/views/layers/support/ClipArea":877,"esri/core/libs/gl-matrix-2/mat4":878,"esri/layers/graphics/OptimizedFeature":883,"esri/geometry/support/quantizationUtils":884,"esri/core/libs/gl-matrix-2/math/mat4":888,"esri/views/layers/LayerView":891,"esri/layers/graphics/OptimizedFeatureSet":892,"esri/core/pbf":893,"esri/views/2d/layers/LayerView2D":901,"esri/views/layers/support/ClipRect":909,"esri/views/layers/support/Geometry":910,"esri/views/layers/support/Path":911,"esri/core/libs/gl-matrix-2/vec3f32":934,"esri/core/ItemCache":939,"esri/views/2d/engine/vectorTiles/renderers/rendererUtils":996,"esri/views/2d/engine/vectorTiles/MemoryBuffer":1048,"esri/core/libs/gl-matrix-2/factories/vec3f32":1110,"esri/views/2d/engine/vectorTiles/RectangleBinPack":1431,"esri/views/2d/engine/vectorTiles/VectorTileDisplayObject":1432,"esri/views/2d/layers/VectorTileLayerView2D":2062,"esri/views/2d/engine/vectorTiles/TileHandler":2063,"esri/views/2d/engine/vectorTiles/GlyphMosaic":2064,"esri/views/2d/engine/vectorTiles/GlyphSource":2065,"esri/views/2d/engine/vectorTiles/SpriteMosaic":2066,"esri/views/2d/engine/vectorTiles/RenderBucket":2067,"esri/views/2d/engine/vectorTiles/VectorTileContainer":2068,"esri/views/2d/engine/vectorTiles/renderers/Renderer":2069,"esri/views/2d/engine/vectorTiles/renderers/BackgroundRenderer":2070,"esri/views/2d/engine/vectorTiles/renderers/CircleRenderer":2071,"esri/views/2d/engine/vectorTiles/renderers/FadeRecorder":2072,"esri/views/2d/engine/vectorTiles/renderers/FillRenderer":2073,"esri/views/2d/engine/vectorTiles/renderers/LineRenderer":2074,"esri/views/2d/engine/vectorTiles/renderers/SymbolRenderer":2075,"esri/views/2d/engine/vectorTiles/renderers/IconRenderer":2076,"esri/views/2d/engine/vectorTiles/renderers/SDFRenderer":2077,"esri/views/2d/engine/vectorTiles/renderers/TileInfoRenderer":2078,"esri/views/2d/engine/vectorTiles/renderers/shaders/ProgramCache":2079,"esri/views/2d/engine/vectorTiles/renderers/shaders/Programs":2080,"esri/views/2d/engine/vectorTiles/renderers/shaders/sources/resolver":2081,"esri/views/2d/engine/vectorTiles/renderers/shaders/sources/shaderRepository":2082,"esri/views/2d/tiling/TileInfoViewPOT":2083})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[47,79,84],{1048:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){return function(){function e(e){this._array=[],e<=0&&console.error("strideInBytes must be positive!"),this._stride=e}return Object.defineProperty(e.prototype,"array",{get:function(){return this._array},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return 4*this._array.length/this._stride},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemSize",{get:function(){return this._stride},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sizeInBytes",{get:function(){return 4*this._array.length},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this.array.length=0},e.prototype.toBuffer=function(){return new Uint32Array(this._array).buffer},e.i1616to32=function(e,t){return 65535&e|t<<16},e.i8888to32=function(e,t,r,i){return 255&e|(255&t)<<8|(255&r)<<16|i<<24},e.i8816to32=function(e,t,r){return 255&e|(255&t)<<8|r<<16},e}()}.apply(null,i))||(e.exports=n)},1110:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){function r(){return new Float32Array(3)}function i(e,t,r){var i=new Float32Array(3);return i[0]=e,i[1]=t,i[2]=r,i}function n(){return r()}function o(){return i(1,1,1)}function a(){return i(1,0,0)}function s(){return i(0,1,0)}function l(){return i(0,0,1)}Object.defineProperty(t,"__esModule",{value:!0}),t.create=r,t.clone=function(e){var t=new Float32Array(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},t.fromValues=i,t.createView=function(e,t){return new Float32Array(e,t,3)},t.zeros=n,t.ones=o,t.unitX=a,t.unitY=s,t.unitZ=l,t.ZEROS=n(),t.ONES=o(),t.UNIT_X=a(),t.UNIT_Y=s(),t.UNIT_Z=l()}.apply(null,i))||(e.exports=n)},1431:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(948)],void 0===(n=function(e,t,r){return function(){function e(e,t){this._width=0,this._height=0,this._free=[],this._width=e,this._height=t,this._free.push(new r.default(0,0,e,t))}return Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),e.prototype.allocate=function(e,t){if(e>this._width||t>this._height)return new r.default;for(var i=null,n=-1,o=0;o<this._free.length;++o){var a=this._free[o];e<=a.width&&t<=a.height&&(null===i||a.y<=i.y&&a.x<=i.x)&&(i=a,n=o)}return null===i?new r.default:(this._free.splice(n,1),i.width<i.height?(i.width>e&&this._free.push(new r.default(i.x+e,i.y,i.width-e,t)),i.height>t&&this._free.push(new r.default(i.x,i.y+t,i.width,i.height-t))):(i.width>e&&this._free.push(new r.default(i.x+e,i.y,i.width-e,i.height)),i.height>t&&this._free.push(new r.default(i.x,i.y+t,e,i.height-t))),new r.default(i.x,i.y,e,t))},e.prototype.release=function(e){for(var t=0;t<this._free.length;++t){var r=this._free[t];if(r.y===e.y&&r.height===e.height&&r.x+r.width===e.x)r.width+=e.width;else if(r.x===e.x&&r.width===e.width&&r.y+r.height===e.y)r.height+=e.height;else if(e.y===r.y&&e.height===r.height&&e.x+e.width===r.x)r.x=e.x,r.width+=e.width;else{if(e.x!==r.x||e.width!==r.width||e.y+e.height!==r.y)continue;r.y=e.y,r.height+=e.height}this._free.splice(t,1),this.release(e)}this._free.push(e)},e}()}.apply(null,i))||(e.exports=n)},1432:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(18),r(58),r(930),r(275),r(37),r(826),r(825),r(2067)],void 0===(n=function(e,t,r,i,n,o,a,s,l,u){var c=(s.enums.CompareFunction,s.enums.Usage,function(e){function t(){for(var t,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var a=e.call(this)||this;return a._renderBuckets=[],a._vectorTileData=null,a._symbolUpdateData=null,a._memoryUsed=d,a.coords=[0,0],a.bounds=[0,0,0,0],a.tileTransform={transform:n.mat4f32.create(),displayCoord:o.vec2f32.create()},a.stencilData={mask:0,reference:0},a._referenced=0,a.triangleCount=0,r.length>0&&(t=a.acquire).call.apply(t,[a].concat(r)),a}return r(t,e),Object.defineProperty(t.prototype,"stencilRef",{get:function(){return this.stencilData.reference},enumerable:!0,configurable:!0}),t.prototype.acquire=function(e,t,r,i){this.key=e,this._referenced=1,this._memoryUsed=d,this._symbolUpdateData=null,this._vectorTileData=null;var n=t.lodAt(e.level),o=null!==n?n.resolution:0,s=t.size[0]*o,l=t.origin,u=e.col*s,c=e.row*s,f=t.spatialReference,h=0;if(f&&(f._isWrappable?f._isWrappable():f.isWrappable)){var p=a.getInfo(f);h=p.valid[1]-p.valid[0]}var _=e.world*h,v=l.x+u+_,m=l.y-c,g=v+s,y=m-s;this.coords[0]=v,this.coords[1]=m,this.bounds[0]=v,this.bounds[1]=m,this.bounds[2]=g,this.bounds[3]=y,this.widthInPixels=t.size[1],this.coordRange=4096,this.resolution=o,this.rotation=i,this.styleLayers=r,this.id=e.id},t.prototype.setData=function(e,t,r){this._vectorTileData=e,this.client=t,this.refKeys=r,this._memoryUsed=d},t.prototype.updateSymbolData=function(e){e&&(this._symbolUpdateData=e,this.requestRender())},t.prototype.updateTileData=function(e){this._vectorTileData=e,this.stage.requestRender(),this._memoryUsed=d},t.prototype.dispose=function(){for(var e=0,t=["fillVertexArrayObject","fillDDVertexArrayObject","outlineVertexArrayObject","lineVertexArrayObject","lineDDVertexArrayObject","iconVertexArrayObject","iconDDVertexArrayObject","textVertexArrayObject","textDDVertexArrayObject","circleVertexArrayObject","fillVertexBuffer","fillDDVertexBuffer","fillIndexBuffer","outlineVertexBuffer","outlineDDVertexBuffer","outlineIndexBuffer","lineVertexBuffer","lineDDVertexBuffer","lineIndexBuffer","iconVertexBuffer","iconDDVertexBuffer","iconIndexBuffer","textVertexBuffer","textDDVertexBuffer","textIndexBuffer","circleVertexBuffer","circleIndexBuffer","texture"];e<t.length;e++){var r=t[e];this[r]&&(this[r].dispose(),this[r]=null)}this._renderBuckets.length=0,this._memoryUsed=d},t.prototype.release=function(){return 0==--this._referenced&&(this.dispose(),this.attached=!1,this.stage=null,!0)},t.prototype.reference=function(){++this._referenced},Object.defineProperty(t.prototype,"referenced",{get:function(){return this._referenced},enumerable:!0,configurable:!0}),t.prototype.getMemoryUsage=function(){var e=this;return this._memoryUsed===d&&(this._memoryUsed=f.reduce((function(t,r){return e[r]?t+e[r].size:t}),0),this.texture&&(this._memoryUsed+=this.texture.descriptor.width*this.texture.descriptor.height*4),this._vectorTileData&&this._vectorTileData.bufferData&&(this._memoryUsed+=this._vectorTileData.bufferData.reduce((function(e,t){return e+t.byteLength}),0)+this._vectorTileData.bufferDataInfo.byteLength+this._vectorTileData.bucketDataInfo.byteLength)),this._memoryUsed/(this._referenced||1)},t.prototype.attach=function(){return!!this._vectorTileData&&(this.ready(),!0)},t.prototype.attachWithContext=function(e){this.stage={context:e},this.attached=this.attach()},t.prototype._commitChanges=function(){this._vectorTileData&&(this.dispose(),this._createRenderBuckets(),this._createBufferObjects(),this._vectorTileData=null,this._memoryUsed=d)},t.prototype._createRenderBuckets=function(){for(var e=new Uint32Array(this._vectorTileData.bucketDataInfo),t=e.length,r=0;r<t;){var i=e[r];switch(e[r+1]){case 0:var n=new u.BackgroundRenderBucket;n.layerID=i,this._renderBuckets.push(n),r+=2;break;case 1:var o=new u.FillRenderBucket;o.layerID=i,o.triangleElementStart=e[r+2],o.triangleElementCount=e[r+3],o.outlineElementStart=e[r+4],o.outlineElementCount=e[r+5],this._renderBuckets.push(o),r+=6;break;case 2:var a=new u.LineRenderBucket;a.layerID=i,a.triangleElementStart=e[r+2],a.triangleElementCount=e[r+3],this._renderBuckets.push(a),r+=4;break;case 3:var s=new u.SymbolRenderBucket;s.layerID=i,s.isSDF=0!==e[r+2];var l=r+3,c=e[l];l++;for(var d=0;d<c;d++){var f=e[l],h=e[l+1],p=e[l+2];s.markerPerPageElementsMap.set(f,[h,p]),l+=3}var _=l,v=e[_];_++;for(d=0;d<v;d++){f=e[_],h=e[_+1],p=e[_+2];s.glyphPerPageElementsMap.set(f,[h,p]),_+=3}this._renderBuckets.push(s),r+=5+3*c+3*v;break;case 4:var m=new u.CircleRenderBucket;m.layerID=i,m.triangleElementStart=e[r+2],m.triangleElementCount=e[r+3],this._renderBuckets.push(m),r+=4;break;default:console.error("Bad bucket type!"),r+=2}}},t._createBufferToObject=function(){var e=[];return e[1]={create:s.BufferObject.createVertex,var:"fillVertexBuffer"},e[2]={create:s.BufferObject.createVertex,var:"fillDDVertexBuffer"},e[3]={create:s.BufferObject.createIndex,var:"fillIndexBuffer"},e[4]={create:s.BufferObject.createVertex,var:"outlineVertexBuffer"},e[5]={create:s.BufferObject.createVertex,var:"outlineDDVertexBuffer"},e[6]={create:s.BufferObject.createIndex,var:"outlineIndexBuffer"},e[7]={create:s.BufferObject.createVertex,var:"lineVertexBuffer"},e[8]={create:s.BufferObject.createVertex,var:"lineDDVertexBuffer"},e[9]={create:s.BufferObject.createIndex,var:"lineIndexBuffer"},e[10]={create:s.BufferObject.createVertex,var:"iconVertexBuffer"},e[11]={create:s.BufferObject.createVertex,var:"iconDDVertexBuffer"},e[12]={create:s.BufferObject.createIndex,var:"iconIndexBuffer"},e[13]={create:s.BufferObject.createVertex,var:"textVertexBuffer"},e[14]={create:s.BufferObject.createVertex,var:"textDDVertexBuffer"},e[15]={create:s.BufferObject.createIndex,var:"textIndexBuffer"},e[16]={create:s.BufferObject.createVertex,var:"circleVertexBuffer"},e[17]={create:s.BufferObject.createIndex,var:"circleIndexBuffer"},e},t.prototype._createBufferObjects=function(){for(var e=this.stage.context,r=new Uint32Array(this._vectorTileData.bufferDataInfo),i=r.length,n=0;n<i;n+=2){var o=n/2;if(!(r[n+1]<=0||0===this._vectorTileData.bufferData[o].byteLength)){var a=r[n],s=t.bufferToObject[a];s?this[s.var]?this[s.var].setData(this._vectorTileData.bufferData[o]):this[s.var]=s.create(e,35044,this._vectorTileData.bufferData[o]):console.error("Bad buffer type "+a)}}},t.prototype.detach=function(){this.isReady&&this.client&&this.client.invoke("destructTileData",this.id),this.dispose(),e.prototype.detach.call(this)},t.prototype.doRender=function(e){if(this.visible&&this.isReady){var t=this.stage.context,r=e.renderer;if(t&&r){this._commitChanges();var i=e.drawphase;this._symbolUpdateData&&(this._updateSymbolData(e,this._symbolUpdateData),this._symbolUpdateData=null),t.setStencilFunction(514,this.stencilData.reference,this.stencilData.mask);var n=this.styleLayers,o=void 0!==e.layerOpacity?e.layerOpacity:1;if(0!==o){var a=this._renderBuckets.length;if(1===i)for(var s=a-1;s>=0;s--){var l=this._renderBuckets[s],u=n.layers[l.layerID];if(!l||!u)return;1!==l.type&&0!==l.type||!l.hasData()||(this.triangleCount+=r.renderBucket(t,l,e.displayLevel,e.requiredLevel,i,this,u,o))}else for(s=0;s<a;s++){l=this._renderBuckets[s],u=n.layers[l.layerID];if(!l||!u)return;l.hasData()&&(this.triangleCount+=r.renderBucket(t,l,e.displayLevel,e.requiredLevel,i,this,u,o))}}}}},t.prototype._updateSymbolData=function(e,t){if(!t||!t.bucketDataInfo)return!0;var r=new Uint32Array(t.bucketDataInfo),i=r.length;if(0===i)return!0;if(this._memoryUsed=d,!this.isReady)return this.requestRender(),!1;for(var n=this.stage.context,o=new Uint32Array(t.bufferDataInfo),a=o.length,l=0,c=0;c<a;c+=2,l++)switch(o[c]){case 10:this.iconVertexBuffer&&(this.iconVertexBuffer.dispose(),this.iconVertexBuffer=null),this.iconVertexBuffer=s.BufferObject.createVertex(n,35044,t.bufferData[l]);break;case 11:this.iconDDVertexBuffer&&(this.iconDDVertexBuffer.dispose(),this.iconDDVertexBuffer=null),this.iconDDVertexBuffer=s.BufferObject.createVertex(n,35044,t.bufferData[l]);break;case 12:this.iconIndexBuffer&&(this.iconIndexBuffer.dispose(),this.iconIndexBuffer=null),this.iconIndexBuffer=s.BufferObject.createIndex(n,35044,t.bufferData[l]);break;case 13:this.textVertexBuffer&&(this.textVertexBuffer.dispose(),this.textVertexBuffer=null),this.textVertexBuffer=s.BufferObject.createVertex(n,35044,t.bufferData[l]);break;case 14:this.textDDVertexBuffer&&(this.textDDVertexBuffer.dispose(),this.textDDVertexBuffer=null),this.textDDVertexBuffer=s.BufferObject.createVertex(n,35044,t.bufferData[l]);break;case 15:this.textIndexBuffer&&(this.textIndexBuffer.dispose(),this.textIndexBuffer=null),this.textIndexBuffer=s.BufferObject.createIndex(n,35044,t.bufferData[l])}for(var f=[],h=0;h<this._renderBuckets.length;h++)this._renderBuckets[h]instanceof u.SymbolRenderBucket||f.push(this._renderBuckets[h]);this._renderBuckets=f;for(var p,_=0;_<i;){var v=r[_];(p=new u.SymbolRenderBucket).layerID=v,p.isSDF=0!==r[_+2],this.styleLayers.layers.length>p.layerID&&this.styleLayers.layers[p.layerID].type===p.type&&f.push(p);var m=_+3,g=r[m];m++;for(var y=0;y<g;y++){var x=r[m],b=r[m+1],w=r[m+2];p.markerPerPageElementsMap.set(x,[b,w]),m+=3}var D=m,M=r[D];D++;for(y=0;y<M;y++){x=r[D],b=r[D+1],w=r[D+2];p.glyphPerPageElementsMap.set(x,[b,w]),D+=3}_+=5+3*g+3*M}return this.iconVertexArrayObject&&(this.iconVertexArrayObject.dispose(),this.iconVertexArrayObject=null),this.iconDDVertexArrayObject&&(this.iconDDVertexArrayObject.dispose(),this.iconDDVertexArrayObject=null),this.textVertexArrayObject&&(this.textVertexArrayObject.dispose(),this.textVertexArrayObject=null),this.textDDVertexArrayObject&&(this.textDDVertexArrayObject.dispose(),this.textDDVertexArrayObject=null),!0},t.pool=new i(t),t.bufferToObject=t._createBufferToObject(),t}(l.DisplayObject)),d=-1,f=["fillVertexBuffer","fillDDVertexBuffer","fillIndexBuffer","outlineVertexBuffer","outlineDDVertexBuffer","outlineIndexBuffer","lineVertexBuffer","lineDDVertexBuffer","lineIndexBuffer","iconVertexBuffer","iconDDVertexBuffer","iconIndexBuffer","textVertexBuffer","textDDVertexBuffer","textIndexBuffer","circleVertexBuffer","circleIndexBuffer"];return c}.apply(null,i))||(e.exports=n)},2062:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(1),r(0),r(6),r(8),r(73),r(45),r(11),r(21),r(15),r(9),r(4),r(2),r(2063),r(2068),r(1432),r(901),r(2083),r(89),r(306),r(299),r(891)],void 0===(n=function(e,t,r,i,n,o,a,s,l,u,c,d,f,h,p,_,v,m,g,y,x,b,w){var D=d.getLogger("esri.views.2d.layers.VectorTileLayerView2D");return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._fetchQueue=null,t._parseQueue=null,t._isTileHandlerPromiseFulfilled=!1,t._handles=new u,t._invalidateStyle=!1,t.container=new _,t}return r(t,e),t.prototype.initialize=function(){var e=this,t=this.layer.tileInfo;(t&&t.spatialReference).equals(this.view.spatialReference)?(this._tileInfoView=new g(this.layer.tileInfo,this.layer.fullExtent),this._tileHandler=new p(this.layer,window.devicePixelRatio||1,!0,this.container),this.handles.add(this.watch("layer.currentStyleInfo",(function(t){e._start()})))):this.addResolvingPromise(f.reject(new l("layerview:spatial-reference-incompatible","The spatial reference of this layer does not meet the requirements of the view",{layer:this.layer})))},t.prototype.destroy=function(){this._stop(),this.container.dispose(),this._tileHandler&&(this._tileHandler.destroy(),this._tileHandler=null)},t.prototype.hitTest=function(e,t){var r=this;return this.suspended||!this._tileHandlerPromise?f.resolve(null):s.safeCast(this._tileHandlerPromise).then((function(){return r.container.hitTest(e,t).then((function(e){var t=r._tileHandler.getStyleRepository().layers;if(null===e||e<0||e>=t.length)return null;var i=t[e],n=new a({attributes:{layerId:e,layerName:i.id}});return n.layer=r.layer,n.sourceLayer=r.layer,n}))}))},t.prototype.update=function(e){var t=this;this.notifyChange("updating");var r=this._tileHandlerPromise;r&&r.then((function(){if(e.pixelRatio!==t._tileHandler.devicePixelRatio)return t._start(),void(t._tileHandler.devicePixelRatio=e.pixelRatio);t._invalidateStyle?(t._issueStyleInvalidation(e),t._invalidateStyle=!1):(t._fetchQueue.pause(),t._parseQueue.pause(),t._fetchQueue.state=e.state,t._parseQueue.state=e.state,t._tileStrategy.update(e),t._parseQueue.resume(),t._fetchQueue.resume());for(var r=0,i=t.container.children;r<i.length;r++){var n=i[r];t._tileHandler.updateTile(n,e)}}))},t.prototype.attach=function(){var e=this;this._start(),this._handles.add(this.layer.on("paint-change",(function(t){return e.container.requestRender()}))),this._handles.add(this.layer.on("layout-change",(function(t){e._invalidateStyle=!0,e.requestUpdate()})))},t.prototype.detach=function(){this._stop(),this._handles.removeAll()},t.prototype.moveStart=function(){this.requestUpdate()},t.prototype.viewChange=function(){this.requestUpdate()},t.prototype.moveEnd=function(){this.requestUpdate()},t.prototype.canResume=function(){var e=this.inherited(arguments),t=this.layer,r=t;if(e&&r.currentStyleInfo){var i=this.view.scale,n=r.currentStyleInfo;if(n&&n.layerDefinition){var o=n.layerDefinition;o.minScale&&o.minScale<i&&(e=!1),o.maxScale&&o.maxScale>i&&(e=!1)}}return e},t.prototype.isUpdating=function(){return!this._isTileHandlerPromiseFulfilled||this._fetchQueue.updating||this._parseQueue.updating},t.prototype.acquireTile=function(e){var t=this,r=new y(e.level,e.row,e.col,e.world),i=this.updateParameters.state.rotation,n=this._tileHandler.getStyleRepository(),o=v.pool.acquire(r,this.layer.tileInfo,n,i);return s.safeCast(this._tileHandlerPromise).then((function(){t.notifyChange("updating"),t._fetchQueue.push(o.key).then((function(e){return t._parseQueue.push(e)})).then((function(e){o.once("attach",(function(){return t.requestUpdate()})),e?o.setData(e.tileData,e.client,e.refKeys):o.setData(null,null),t.container.addChild(o),t.notifyChange("updating")})).catch((function(e){t.notifyChange("updating"),f.isAbortError(e)||D.error(e)}))})),o},t.prototype.releaseTile=function(e){var t=e.key.id;this._fetchQueue.abort(t),this._parseQueue.abort(t),this._tileHandler.abortTileUpdate(t),this.container.removeChild(e),this.requestUpdate(),e.once("detach",(function(){return v.pool.release(e)})),this.notifyChange("updating")},t.prototype._start=function(){var e=this;if(this._stop(),this.layer.currentStyleInfo&&this.attached){var t=new AbortController,r=this._tileHandler.start({signal:t.signal}).then((function(){e._tileStrategy=new b({cachePolicy:"keep",coveragePolicy:"smallest",acquireTile:function(t){return e.acquireTile(t)},releaseTile:function(t){return e.releaseTile(t)},tileInfoView:e._tileInfoView,cacheSize:40,buffer:c("esri-vector-tiles-buffer")?192:0}),e._fetchQueue=new x({tileInfoView:e._tileInfoView,process:function(t,r){return e._getTileData(t,r)},concurrency:15}),e._parseQueue=new x({tileInfoView:e._tileInfoView,process:function(t,r){return e._parseTileData(t,r)},concurrency:8}),e.container.initialize(e._tileHandler.spriteMosaic,e._tileHandler.glyphMosaic,e.layer.tileInfo,e._tileInfoView),e.container.setStyleRepository(e._tileHandler.getStyleRepository()),e.requestUpdate(),e._isTileHandlerPromiseFulfilled=!0}));this._tileHandlerAbortController=t,this._tileHandlerPromise=r}},t.prototype._stop=function(){if(this._tileHandlerAbortController){var e=this._tileHandlerAbortController;e&&e.abort(),this._tileHandlerPromise=null,this._isTileHandlerPromiseFulfilled=!1,this._fetchQueue&&(this._fetchQueue.destroy(),this._fetchQueue=null),this._parseQueue&&(this._parseQueue.destroy(),this._parseQueue=null),this._tileStrategy&&(this._tileStrategy.destroy(),this._tileStrategy=null),this.container.removeAllChildren(),v.pool.prune()}},t.prototype._getTileData=function(e,t){return o(this,void 0,void 0,(function(){var r;return n(this,(function(i){switch(i.label){case 0:return[4,this._tileHandler.fetchTileData(e,t)];case 1:return r=i.sent(),this.notifyChange("updating"),[2,{key:e,data:r}]}}))}))},t.prototype._parseTileData=function(e,t){return o(this,void 0,void 0,(function(){return n(this,(function(r){return[2,this._tileHandler.parseTileData(e,this.updateParameters.state.rotation,t)]}))}))},t.prototype._issueStyleInvalidation=function(e){var t=this;this.notifyChange("updating"),this._tileHandlerPromise=this._tileHandler.updateStyle().then((function(){t.container.setStyleRepository(t._tileHandler.getStyleRepository()),t._fetchQueue.pause(),t._parseQueue.pause(),t._fetchQueue.clear(),t._parseQueue.clear(),t._parseQueue.resume(),t._fetchQueue.resume(),t.notifyChange("updating"),t.requestUpdate()}))},i([h.property({dependsOn:["view.scale","layer.currentStyleInfo"]})],t.prototype,"suspended",void 0),i([h.subclass("esri.views.2d.layers.VectorTileLayerView2D")],t)}(h.declared(m.LayerView2D(w)))}.apply(null,i))||(e.exports=n)},2063:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(7),r(6),r(8),r(41),r(45),r(15),r(939),r(283),r(4),r(284),r(181),r(880),r(2064),r(2065),r(2066),r(1249),r(1432),r(89),r.dj.m(e)],void 0===(n=function(e,t,r,i,n,o,a,s,l,u,c,d,f,h,p,_,v,m,g,y,x){var b=new l(10),w=new Map;return function(){function t(e,t,r,i,n){this._vectorTileLayer=e,this.devicePixelRatio=t,this.allowUpdates=r,this._container=i,this._memCache=n,this._spriteMosaic=null,this._glyphMosaic=null,this._connection=null,this._updateToAbortController=new Map,this._ongoingTileRequests=new Map,this._ongoingRequestToController=new Map}return t.prototype.destroy=function(){this._updateToAbortController&&this._updateToAbortController.forEach((function(e){return e.abort()})),this._ongoingTileRequests&&this.abortAll(),this._connection&&(this._connection.close(),this._connection=null),this._vectorTileLayer=null,this._spriteMosaic&&(this._spriteMosaic.dispose(),this._spriteMosaic=null),this._glyphMosaic&&(this._glyphMosaic.dispose(),this._glyphMosaic=null)},Object.defineProperty(t.prototype,"spriteMosaic",{get:function(){var e=this;return this._spriteSourcePromise.then((function(){return e._spriteMosaic}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"glyphMosaic",{get:function(){return this._glyphMosaic},enumerable:!0,configurable:!0}),t.prototype.start=function(t){return n(this,void 0,void 0,(function(){var n,o,l,u,h,m=this;return i(this,(function(i){for(l in n=this._vectorTileLayer.sourceNameToSource,o=[],n)o.push(this._fetchTileMap(n[l],t));return this._spriteSourcePromise=this._vectorTileLayer.loadSpriteSource(this.devicePixelRatio,t),this._spriteSourcePromise.then((function(e){m._spriteMosaic=new v(1024,1024,250),m._spriteMosaic.setSpriteSource(e),s("stable-symbol-rendering")&&m._spriteMosaic.preloadSpriteItems()})),u=this._vectorTileLayer.styleRepository,h=new _(u.glyphs),this._glyphMosaic=new p(1024,1024,h),this._broadcastPromise=a.safeCast(f.open(d.getAbsMid("./WorkerTileHandler",e,x),{client:this,scheduler:t.scheduler,signal:t.signal})).then((function(e){return m._connection=e,c.all(m._connection.broadcast("setLayers",u.styleJSON,r({},t)))})),[2,c.all(o)]}))}))},t.prototype.updateStyle=function(){return n(this,void 0,void 0,(function(){var e,t=this;return i(this,(function(r){switch(r.label){case 0:return[4,this._broadcastPromise];case 1:return r.sent(),this._updateToAbortController.forEach((function(e){return e.abort()})),this._updateToAbortController.clear(),e=this._vectorTileLayer.styleRepository,this._broadcastPromise=c.create((function(r,i){c.all(t._connection.broadcast("updateStyle",e.styleJSON)).then(r,i)})),[2,this._broadcastPromise]}}))}))},t.prototype.abortTileUpdate=function(e){this._updateToAbortController.has(e)&&(this._updateToAbortController.get(e).abort(),this._updateToAbortController.delete(e))},t.prototype.updateTile=function(e,t){return n(this,void 0,void 0,(function(){var r,n,o,a,s=this;return i(this,(function(i){switch(i.label){case 0:return this.allowUpdates&&e.isReady?[4,this._broadcastPromise]:[2,null];case 1:return i.sent(),r=Math.round(h.degToByte(t.state.rotation)),e.rotation===r?[2,null]:(o=e.key,this._updateToAbortController.has(o.id)&&((n=this._updateToAbortController.get(o.id)).abort(),this._updateToAbortController.delete(o.id)),n=c.createAbortController(),e.rotation=r,a=e.client.invoke("updateSymbols",{key:e.id,rotation:r},{signal:n.signal}).then((function(t){return s._updateToAbortController.delete(o.id),e.isReady&&e.updateSymbolData(t),t})).catch((function(e){c.isAbortError(e)||s._updateToAbortController.delete(o.id)})),this._updateToAbortController.set(e.id,n),[2,a])}}))}))},t.prototype.updateTileData=function(e){for(var t,r=e.tileId,i=this._container.children,n=0;n<i.length;n++)if((t=i[n]).id===r){t.updateTileData(e.tileData);break}},t.prototype.getVectorTile=function(e,t,r){return n(this,void 0,void 0,(function(){var n,o,a,s,l;return i(this,(function(i){switch(i.label){case 0:return n=new y(e,t,r,0),this._memCache&&(o=this._memCache.get(n.id))?(o.reference(),[2,o]):[4,this._getVectorTileData(n,null)];case 1:return a=i.sent(),this._memCache&&(s=this._memCache.get(n.id))?(s.reference(),[2,s]):(l=g.pool.acquire(n,this._vectorTileLayer.tileInfo,this._vectorTileLayer.styleRepository,0),a&&a.tileData?(l.setData(a.tileData,a.client),this._memCache&&(l.reference(),this._memCache.put(l.key.id,l,l.getMemoryUsage()*l.referenced,u.MIN_PRIORITY))):l.setData(null,null),[2,l])}}))}))},t.prototype.releaseVectorTile=function(e){!this._memCache||e.release()?g.pool.release(e):this._memCache.updateSize(e.key.id,e,e.getMemoryUsage()*e.referenced)},t.prototype.fetchTileData=function(e,t){return n(this,void 0,void 0,(function(){var r,n,o,a;return i(this,(function(i){switch(i.label){case 0:return[4,this._getRefKeys(e,t)];case 1:for(a in r=i.sent(),n=this._vectorTileLayer.sourceNameToSource,o=[],n)o.push(a);return[2,this._getSourcesData(o,r,t)]}}))}))},t.prototype.parseTileData=function(e,t,o){return n(this,void 0,void 0,(function(){var n,a,l,u,c,d,f,p;return i(this,(function(i){switch(i.label){case 0:return(n=e&&e.data)?(a=n.sourceName2DataAndRefKey,l=n.transferList,0===Object.keys(a).length?[2,null]:[4,this._broadcastPromise]):[2,null];case 1:return i.sent(),u=Math.round(h.degToByte(t)),[4,(c=this._connection.getAvailableClient()).invoke("createTileAndParse",{key:e.key.id,rotation:u,cacheTile:this.allowUpdates,sourceName2DataAndRefKey:a},r({},o,{transferList:l}))];case 2:if(d=i.sent(),s("esri-vector-tiles-debug")){for(p in f={},a)f[p]=a[p].refKey;return[2,{tileData:d,client:c,refKeys:f}]}return[2,{tileData:d,client:c}]}}))}))},Object.defineProperty(t.prototype,"updating",{get:function(){return this._ongoingTileRequests.size>0},enumerable:!0,configurable:!0}),t.prototype.abortAll=function(){this._ongoingRequestToController.forEach((function(e){return e.abort()})),this._ongoingRequestToController.clear(),this._ongoingTileRequests.clear()},t.prototype.getSprites=function(e){var t=this;return this._spriteSourcePromise.then((function(){return t._spriteMosaic.getSpriteItems(e)}))},t.prototype.getGlyphs=function(e){return this._glyphMosaic.getGlyphItems(e.tileID,e.font,e.codePoints)},t.prototype.getStyleRepository=function(){return this._vectorTileLayer.styleRepository},t.prototype._getTilePayload=function(e,t,a){return n(this,void 0,void 0,(function(){var n,s,l,u;return i(this,(function(i){switch(i.label){case 0:return n=y.pool.acquire(e.id),s=this._vectorTileLayer.sourceNameToSource,l=s[t],u=l.getSourceTileUrl(n.level,n.row,n.col),y.pool.release(n),[4,o(u,r({responseType:"array-buffer"},a))];case 1:return[2,{protobuff:i.sent().data,sourceName:t}]}}))}))},t.prototype._fetchTileMap=function(e,t){if(e.capabilities.operations.supportsTileMap&&e.tileIndex)return c.resolve();if(!e.tileMapURL)return c.resolve();var r=b.get(e.tileMapURL);if(r)return e.tileIndex=r,c.resolve();if(w.has(e.tileMapURL))return w.get(e.tileMapURL).then((function(t){e.tileIndex=new m(t.data)}));var i=o(e.tileMapURL,t);return i.then((function(t){e.tileIndex=new m(t.data),w.delete(e.tileMapURL),b.put(e.tileMapURL,e.tileIndex)})),w.set(e.tileMapURL,i),i},t.prototype._getRefKeys=function(e,t){return n(this,void 0,void 0,(function(){var r,n,o,a,s;return i(this,(function(i){for(o in r=this._vectorTileLayer.sourceNameToSource,n=new Array,r)a=r[o],s=a.getRefKey(e,t),n.push(s);return[2,c.eachAlways(n)]}))}))},t.prototype._getSourcesData=function(e,t,r){return n(this,void 0,void 0,(function(){var n,o,a,s,l,u,d;return i(this,(function(i){switch(i.label){case 0:for(n=[],u=0;u<t.length;u++)null==t[u].value||null==e[u]?n.push(null):(o=this._getTilePayload(t[u].value,e[u],r),n.push(o));return[4,c.eachAlways(n)];case 1:for(a=i.sent(),s={},l=[],u=0;u<a.length;u++)a[u].value&&a[u].value&&a[u].value.protobuff&&a[u].value.protobuff.byteLength>0&&(d=t[u].value.id,s[a[u].value.sourceName]={refKey:d,protobuff:a[u].value.protobuff},l.push(a[u].value.protobuff));return[2,{sourceName2DataAndRefKey:s,transferList:l}]}}))}))},t.prototype._getVectorTileData=function(e,t){return n(this,void 0,void 0,(function(){var r,n,o,a,s,l=this;return i(this,(function(i){return r=e.id,this._ongoingTileRequests.has(r)?[2,this._ongoingTileRequests.get(r)]:(n=new AbortController,o={signal:n.signal},a=t&&t.signal,s=this._getParsedVectorTileData(e,o).then((function(e){return l._ongoingTileRequests.delete(r),l._ongoingRequestToController.delete(r),e})).catch((function(){return l._ongoingTileRequests.delete(r),l._ongoingRequestToController.delete(r),null})),this._ongoingTileRequests.set(r,s),this._ongoingRequestToController.set(r,n),a&&c.onAbort(a,(function(){n.abort(),l._ongoingTileRequests.delete(r),l._ongoingRequestToController.delete(r)})),[2,s])}))}))},t.prototype._getParsedVectorTileData=function(e,t){return n(this,void 0,void 0,(function(){var r;return i(this,(function(i){switch(i.label){case 0:return[4,this.fetchTileData(e,t)];case 1:return r=i.sent(),[2,this.parseTileData({key:e,data:r},0,t)]}}))}))},t}()}.apply(null,i))||(e.exports=n)},2064:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(15),r(4),r(826),r(1431),r(948)],void 0===(n=function(e,t,r,i,n,o,a){var s;return n.enums.PixelFormat,n.enums.PixelType,function(){function e(e,t,i){this.width=0,this.height=0,this._dirties=[],this._glyphData=[],this._currentPage=0,this._glyphIndex={},this._textures=[],this._rangePromises=new Map,!s&&r("stable-symbol-rendering")&&(s=new Set),this.width=e,this.height=t,this._glyphSource=i,this._binPack=new o(e-4,t-4),this._glyphData.push(new Uint8Array(e*t)),this._dirties.push(!0),this._textures.push(void 0)}return e.prototype.getGlyphItems=function(e,t,n){for(var l=this,u=[],c=this._glyphSource,d=new Set,f=0,h=n;f<h.length;f++){var p=h[f],_=Math.floor(p*(1/256));d.add(_)}var v=[];return d.forEach((function(e){if(e<=256){var r=t+e;if(l._rangePromises.has(r))v.push(l._rangePromises.get(r));else{var i=c.getRange(t,e).then((function(){l._rangePromises.delete(r)}),(function(){l._rangePromises.delete(r)}));l._rangePromises.set(r,i),v.push(i)}}})),i.all(v).then((function(e){var i,f=l._glyphIndex[t];if(f||(f={},l._glyphIndex[t]=f),r("stable-symbol-rendering")){s.clear();for(var h=0,p=n;h<p.length;h++){var _=p[h];s.add(_)}var v=[];d.forEach((function(e){v.push(e)})),v.sort(),i=[];for(var m=0,g=v;m<g.length;m++)for(var y=g[m],x=0;x<256;++x)i.push(256*y+x)}else i=n;for(var b=0,w=i;b<w.length;b++){var D=f[_=w[b]];if(D)r("stable-symbol-rendering")&&!s.has(_)||(u[_]={sdf:!0,rect:D.rect,metrics:D.metrics,page:D.page});else{var M=c.getGlyph(t,_);if(M&&M.metrics){var T=M.metrics,V=void 0;if(0===T.width)V=new a.default(0,0,0,0);else{var P=T.width+6,O=T.height+6,I=P%4?4-P%4:4,C=O%4?4-O%4:4;1===I&&(I=5),1===C&&(C=5),(V=l._binPack.allocate(P+I,O+C)).isEmpty&&(l._dirties[l._currentPage]||(l._glyphData[l._currentPage]=null),l._currentPage=l._glyphData.length,l._glyphData.push(new Uint8Array(l.width*l.height)),l._dirties.push(!0),l._textures.push(void 0),l._binPack=new o(l.width-4,l.height-4),V=l._binPack.allocate(P+I,O+C));var z=l._glyphData[l._currentPage],S=M.bitmap,R=void 0,A=void 0;if(S)for(var k=0;k<O;k++){R=P*k,A=l.width*(V.y+k+1)+V.x;for(var B=0;B<P;B++)z[A+B+1]=S[R+B]}}f[_]={rect:V,metrics:T,tileIDs:null,page:l._currentPage},r("stable-symbol-rendering")&&!s.has(_)||(u[_]={sdf:!0,rect:V,metrics:T,page:l._currentPage}),l._dirties[l._currentPage]=!0}}}return u}))},e.prototype.removeGlyphs=function(e){for(var t in this._glyphIndex){var r=this._glyphIndex[t];if(r){var i=void 0;for(var n in r)if((i=r[n]).tileIDs.delete(e),0===i.tileIDs.size){for(var o=this._glyphData[i.page],a=i.rect,s=void 0,l=void 0,u=0;u<a.height;u++)for(s=this.width*(a.y+u)+a.x,l=0;l<a.width;l++)o[s+l]=0;delete r[n],this._dirties[i.page]=!0}}}},e.prototype.bind=function(e,t,r,i){void 0===i&&(i=0),this._textures[r]||(this._textures[r]=new n.Texture(e,{pixelFormat:6406,dataType:5121,width:this.width,height:this.height},new Uint8Array(this.width*this.height)));var o=this._textures[r];o.setSamplingMode(t),this._dirties[r]&&o.setData(this._glyphData[r]),e.bindTexture(o,i),this._dirties[r]=!1},e.prototype.dispose=function(){this._binPack=null;for(var e=0,t=this._textures;e<t.length;e++){var r=t[e];r&&r.dispose()}this._textures.length=0},e}()}.apply(null,i))||(e.exports=n)},2065:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(41),r(15),r(893),r(4)],void 0===(n=function(e,t,r,i,n,o){var a=function(){function e(e){if(this._metrics=[],this._bitmaps=[],e)for(;e.next();)switch(e.tag()){case 1:for(var t=e.getMessage();t.next();)switch(t.tag()){case 3:for(var r=t.getMessage(),i=void 0,n=void 0,o=void 0,a=void 0,s=void 0,l=void 0,u=void 0;r.next();)switch(r.tag()){case 1:i=r.getUInt32();break;case 2:n=r.getBytes();break;case 3:o=r.getUInt32();break;case 4:a=r.getUInt32();break;case 5:s=r.getSInt32();break;case 6:l=r.getSInt32();break;case 7:u=r.getUInt32();break;default:r.skip()}r.release(),i&&(this._metrics[i]={width:o,height:a,left:s,top:l,advance:u},this._bitmaps[i]=n);break;default:t.skip()}t.release();break;default:e.skip()}}return e.prototype.getMetrics=function(e){return this._metrics[e]},e.prototype.getBitmap=function(e){return this._bitmaps[e]},e}(),s=function(){function e(){this._ranges=[]}return e.prototype.getRange=function(e){return this._ranges[e]},e.prototype.addRange=function(e,t){this._ranges[e]=t},e}();return function(){function e(e){this._glyphInfo={},this._baseURL=e}return e.prototype.getRange=function(e,t){var s=this._getFontStack(e);if(i("stable-symbol-rendering")&&t>0)return s.addRange(t,new a),o.resolve();if(s.getRange(t))return o.resolve();var l=256*t,u=l+255,c=this._baseURL.replace("{fontstack}",e).replace("{range}",l+"-"+u);return r(c,{responseType:"array-buffer"}).then((function(e){s.addRange(t,new a(new n(new Uint8Array(e.data),new DataView(e.data))))})).catch((function(){s.addRange(t,new a)}))},e.prototype.getGlyph=function(e,t){var r=this._getFontStack(e);if(r){var i=Math.floor(t/256);if(!(i>256)){var n=r.getRange(i);if(n)return{metrics:n.getMetrics(t),bitmap:n.getBitmap(t)}}}},e.prototype._getFontStack=function(e){var t=this._glyphInfo[e];return t||(t=this._glyphInfo[e]=new s),t},e}()}.apply(null,i))||(e.exports=n)},2066:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(826),r(1431),r(948)],void 0===(n=function(e,t,r,i,n){return r.enums.PixelFormat,r.enums.PixelType,function(){function e(e,t,r){void 0===r&&(r=0),this._size=[],this._mosaicsData=[],this._textures=[],this._dirties=[],this._maxItemSize=0,this._currentPage=0,this._pageWidth=0,this._pageHeight=0,this._mosaicRects={},this.pixelRatio=1,(e<=0||t<=0)&&console.error("Sprites mosaic defaultWidth and defaultHeight must be greater than zero!"),this._pageWidth=e,this._pageHeight=t,r>0&&(this._maxItemSize=r),this._binPack=new i(e-4,t-4)}return e.prototype.getWidth=function(e){return e>=this._size.length?-1:this._size[e][0]},e.prototype.getHeight=function(e){return e>=this._size.length?-1:this._size[e][1]},e.prototype.setSpriteSource=function(e){if(this.dispose(),this.pixelRatio=e.devicePixelRatio,0===this._mosaicsData.length){this._binPack=new i(this._pageWidth-4,this._pageHeight-4);var t=Math.floor(this._pageWidth),r=Math.floor(this._pageHeight),n=new Uint32Array(t*r);this._mosaicsData[0]=n,this._dirties.push(!0),this._size.push([this._pageWidth,this._pageHeight]),this._textures.push(void 0)}this._sprites=e},e.prototype.getSpriteItem=function(e,t){void 0===t&&(t=!1);var r=this._mosaicRects[e];if(r)return r;if(!this._sprites||"loaded"!==this._sprites.loadStatus)return null;var i=this._sprites.getSpriteInfo(e);if(!i||!i.width||!i.height||i.width<0||i.height<0)return null;var n=i.width,o=i.height,a=this._allocateImage(n,o),s=a[0],l=a[1],u=a[2];return s.width<=0?null:(this._copy(s,i,l,u,t),r={rect:s,width:n,height:o,sdf:i.sdf,simplePattern:!1,pixelRatio:i.pixelRatio,page:l},this._mosaicRects[e]=r,r)},e.prototype.preloadSpriteItems=function(){for(var e=0,t=this._sprites.spriteNames;e<t.length;e++){var r=t[e];this.getSpriteItem(r,!0)}},e.prototype.getSpriteItems=function(e){for(var t={},r=0,i=e;r<i.length;r++){var n=i[r];t[n]=this.getSpriteItem(n)}return t},e.prototype.getMosaicItemPosition=function(e,t){var r=this.getSpriteItem(e,t),i=r&&r.rect;if(!i)return null;i.width=r.width,i.height=r.height;var n=r.width,o=r.height;return{size:[r.width,r.height],tl:[(i.x+2)/this._size[r.page][0],(i.y+2)/this._size[r.page][1]],br:[(i.x+2+n)/this._size[r.page][0],(i.y+2+o)/this._size[r.page][1]],page:r.page}},e.prototype.bind=function(e,t,i,n){void 0===i&&(i=0),void 0===n&&(n=0),this._textures[i]||(this._textures[i]=new r.Texture(e,{pixelFormat:6408,dataType:5121,wrapMode:33071,width:this._size[i][0],height:this._size[i][1]},new Uint8Array(this._mosaicsData[i].buffer)));var o=this._textures[i];o.setSamplingMode(t),this._dirties[i]&&o.setData(new Uint8Array(this._mosaicsData[i].buffer)),e.bindTexture(o,n),this._dirties[i]=!1},e._copyBits=function(e,t,r,i,n,o,a,s,l,u,c){var d=i*t+r,f=s*o+a;if(c){f-=o;for(var h=-1;h<=u;d=((++h+u)%u+i)*t+r,f+=o)for(var p=-1;p<=l;p++)n[f+p]=e[d+(p+l)%l]}else for(h=0;h<u;h++){for(p=0;p<l;p++)n[f+p]=e[d+p];d+=t,f+=o}},e.prototype._copy=function(t,r,i,n,o,a){if(this._sprites&&"loaded"===this._sprites.loadStatus&&!(i>=this._mosaicsData.length)){var s=new Uint32Array(a?a.buffer:this._sprites.image.buffer),l=this._mosaicsData[i];l&&s||console.error("Source or target images are uninitialized!");var u=a?r.width:this._sprites.width;e._copyBits(s,u,r.x,r.y,l,n[0],t.x+2,t.y+2,r.width,r.height,o),this._dirties[i]=!0}},e.prototype._allocateImage=function(e,t){e+=2,t+=2;var r=Math.max(e,t);if(this._maxItemSize&&this._maxItemSize<r){var o=new n.default(0,0,e,t);return this._mosaicsData.push(new Uint32Array(e*t)),this._dirties.push(!0),this._size.push([e,t]),this._textures.push(void 0),[o,this._mosaicsData.length-1,[e,t]]}var a=e%4?4-e%4:4,s=t%4?4-t%4:4;1===a&&(a=5),1===s&&(s=5);var l=this._binPack.allocate(e+a,t+s);return l.width<=0?(this._dirties[this._currentPage]||(this._mosaicsData[this._currentPage]=null),this._currentPage=this._mosaicsData.length,this._mosaicsData.push(new Uint32Array(this._pageWidth*this._pageHeight)),this._dirties.push(!0),this._size.push([this._pageWidth,this._pageHeight]),this._textures.push(void 0),this._binPack=new i(this._pageWidth-4,this._pageHeight-4),this._allocateImage(e,t)):[l,this._currentPage,[this._pageWidth,this._pageHeight]]},e.prototype.dispose=function(){this._binPack=null,this._mosaicRects={};for(var e=0,t=this._textures;e<t.length;e++){var r=t[e];r&&r.dispose()}this._textures.length=0},e}()}.apply(null,i))||(e.exports=n)},2067:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(18)],void 0===(n=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){this.type=e};t.RenderBucket=i;var n=function(e){function t(){var t=e.call(this,2)||this;return t.triangleElementStart=0,t.triangleElementCount=0,t}return r(t,e),t.prototype.hasData=function(){return this.triangleElementCount>0},t.prototype.triangleCount=function(){return this.triangleElementCount/3},t}(i);t.LineRenderBucket=n;var o=function(e){function t(){var t=e.call(this,1)||this;return t.triangleElementStart=0,t.triangleElementCount=0,t.outlineElementStart=0,t.outlineElementCount=0,t}return r(t,e),t.prototype.hasData=function(){return this.triangleElementCount>0||this.outlineElementCount>0},t.prototype.triangleCount=function(){return(this.triangleElementCount+this.outlineElementCount)/3},t}(i);t.FillRenderBucket=o;var a=function(e){function t(){var t=e.call(this,3)||this;return t.markerPerPageElementsMap=new Map,t.glyphPerPageElementsMap=new Map,t.isSDF=!1,t}return r(t,e),t.prototype.hasData=function(){return this.markerPerPageElementsMap.size>0||this.glyphPerPageElementsMap.size>0},t.prototype.triangleCount=function(){var e=0;return this.markerPerPageElementsMap.forEach((function(t){e+=t[1]})),this.glyphPerPageElementsMap.forEach((function(t){e+=t[1]})),e/3},t}(i);t.SymbolRenderBucket=a;var s=function(e){function t(){var t=e.call(this,4)||this;return t.triangleElementStart=0,t.triangleElementCount=0,t}return r(t,e),t.prototype.hasData=function(){return this.triangleElementCount>0},t.prototype.triangleCount=function(){return this.triangleElementCount/3},t}(i);t.CircleRenderBucket=s;var l=function(e){function t(){return e.call(this,0)||this}return r(t,e),t.prototype.hasData=function(){return!0},t.prototype.triangleCount=function(){return 2},t}(i);t.BackgroundRenderBucket=l}.apply(null,i))||(e.exports=n)},2068:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(18),r(15),r(4),r(29),r(878),r(930),r(275),r(934),r(826),r(825),r(305),r(880),r(2069),r(185)],void 0===(n=function(e,t,r,i,n,o,a,s,l,u,c,d,f,h,p,_){var v=d.enums.WGLDrawPhase;return c.enums.BlendFactor,c.enums.CompareFunction,c.enums.StencilOperation,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._tileCoordinateScale=u.vec3f32.create(),t._orientationVec=u.vec3f32.fromValues(0,0,1),t._displayScale=u.vec3f32.create(),t._defaultTransform=s.mat4f32.create(),t._displayWidth=0,t._displayHeight=0,t._backgroundTile={tileTransform:{transform:s.mat4f32.create(),displayCoord:l.vec2f32.create()},coords:[0,0],key:f.TileKey.pool.acquire(),coordRange:4096},t._pointToCallbacks=new Map,t}return r(t,e),t.prototype.initialize=function(e,t,r,i){var n=this;this._spriteMosaicPromise=e,this._spriteMosaicPromise.then((function(r){n._spriteMosaicPromise===e&&(n._renderer=new p(r,t))})),this._tileInfoView=i,this._tileInfo=r},t.prototype.dispose=function(){this._renderer&&this._renderer.dispose(),f.TileKey.pool.release(this._backgroundTile.key),e.prototype.dispose.call(this)},t.prototype.hitTest=function(e,t){var r=this,i=[e,t];return n.create((function(e,t){r._pointToCallbacks.set(i,{resolve:e,reject:t}),r.requestRender()}),(function(){r._pointToCallbacks.has(i)&&r._pointToCallbacks.delete(i)}))},t.prototype.renderChildren=function(t){var r=this;if(0!==this.children.length&&this._tileInfoView&&t&&t.state&&(t.drawPhase===v.MAP||t.drawPhase===v.HITTEST)){if(!this._renderer)return void this.requestRender();if(i("esri-vector-tiles-debug"))for(var n=0,a=this.children;n<a.length;n++){(g=a[n]).triangleCount=0}var s=t.state,l=this.stage.context,u=this._renderer;u.initializeProgramCache(this.stage.context),u.setGlobalOpacity(l,t,this.opacity);var c=t;c.displayLevel=this._tileInfoView.scaleToLevel(s.scale),c.requiredLevel=this._tileInfoView.getSmallestInfoForScale(s.scale).level,c.renderer=this._renderer;var d=t.drawPhase===v.HITTEST?4:0;l.setDepthWriteEnabled(!1),l.setStencilTestEnabled(!1),this._renderBackgroundBuckets(c,this._styleRepository.backgroundBucketIds,d),l.setDepthWriteEnabled(!0),l.setStencilWriteMask(255),l.setClearDepth(1),l.setClearStencil(0),l.clear(l.gl.DEPTH_BUFFER_BIT|l.gl.STENCIL_BUFFER_BIT),l.setDepthWriteEnabled(!1),this.sortChildren((function(e,t){return function(e,t){return e.key.level-t.key.level!=0?e.key.level-t.key.level:e.key.row-t.key.row!=0?e.key.row-t.key.row:e.key.col-t.key.col}(e,t)}));for(var f=this.children.length,h=1;h<=f;h++){var p=this.children[h-1];p.attached&&p.visible&&(p.stencilData.reference=h,p.stencilData.mask=255)}if(this._updateTilesTransform(c.state,c.requiredLevel,this.children),l.setDepthWriteEnabled(!0),this._renderer.setStateParams(c.state,c.pixelRatio,c.displayLevel),this._renderer.drawClippingMasks(l,this.children),l.setStencilWriteMask(0),l.setBlendFunctionSeparate(1,771,1,771),l.setStencilOp(7680,7680,7681),l.setDepthFunction(515),l.setBlendingEnabled(!1),l.setStencilTestEnabled(!0),l.setDepthTestEnabled(!0),l.setDepthWriteEnabled(!0),c.drawphase=1,e.prototype.renderChildren.call(this,c),l.setDepthWriteEnabled(!1),l.setBlendingEnabled(!0),c.drawphase=2,e.prototype.renderChildren.call(this,c),c.drawphase=3,e.prototype.renderChildren.call(this,c),l.setStencilTestEnabled(!1),l.setDepthTestEnabled(!1),u.applyGlobalOpacity(l,t,this.opacity),i("esri-vector-tiles-debug"))for(var _=0,m=this.children;_<m.length;_++){var g;(g=m[_]).attached&&g.visible&&this._renderer.renderTileInfo(l,g)}this._pointToCallbacks.size>0&&(this._pointToCallbacks.forEach((function(e,t){var i=r._hitTest(c,t[0],t[1]);o.schedule((function(){e.resolve(i)}))})),this._pointToCallbacks.clear()),this._renderer.needsRedraw()&&this.requestRender()}},t.prototype.removeAllChildren=function(){for(var t=0;t<this.children.length;t++)this.children[t].dispose();e.prototype.removeAllChildren.call(this)},t.prototype.setStyleRepository=function(e){this._styleRepository=e},t.prototype._hitTest=function(e,t,r){var i=this._tileInfoView.getSmallestInfoForScale(e.state.scale).level,n=[0,0];e.state.toMap(n,[t,r]);var o=e.state.clone(),a=o.viewpoint.clone(),s=a.targetGeometry;s.x=n[0],s.y=n[1],a.targetGeometry=s,o.viewpoint=a,o.size=[3,3],this._renderer.setStateParams(o,e.pixelRatio,e.displayLevel);var l={context:this.stage.context,drawPhase:0,pixelRatio:e.pixelRatio,stationary:e.stationary,globalOpacity:e.globalOpacity,displayLevel:e.displayLevel,requiredLevel:e.requiredLevel,renderer:e.renderer,layerOpacity:e.layerOpacity,state:o,drawphase:4},u=this._renderer.hitTest(l,t,r,this.children,i,3,this._updateTilesTransform.bind(this));return u&&0!==u.length?u[0]:null},t.prototype._updateTilesTransform=function(e,t,r){var i=1/e.size[0],n=1/e.size[1],o=[0,0];this._calculateRelativeViewProjMat(this._tileInfo.lodAt(t).resolution,e.resolution,e.rotation,this._tileInfo.size[1],4096,e.size[0],e.size[1],this._defaultTransform);for(var a=0,s=r;a<s.length;a++){var l=s[a];e.toScreen(o,l.coords),o[1]=e.size[1]-o[1],l.tileTransform.displayCoord[0]=2*o[0]*i-1,l.tileTransform.displayCoord[1]=2*o[1]*n-1,l.key.level===t&&4096===l.coordRange?l.tileTransform.transform.set(this._defaultTransform):this._calculateRelativeViewProjMat(this._tileInfo.lodAt(l.key.level).resolution,e.resolution,e.rotation,this._tileInfo.size[1],l.coordRange,e.size[0],e.size[1],l.tileTransform.transform)}},t.prototype._calculateRelativeViewProjMat=function(e,t,r,i,n,o,s,l){var u=.125;512!==i&&4096!==n&&(u=i/n);var c=u*(e/t);this._tileCoordinateScale.set([c,c,1]),o===this._displayWidth&&s===this._displayHeight||(this._displayScale.set([2/o,-2/s,1]),this._displayWidth=o,this._displayHeight=s),a.mat4.identity(l),a.mat4.scale(l,l,this._tileCoordinateScale),a.mat4.rotate(l,l,-r*h.C_DEG_TO_RAD,this._orientationVec),a.mat4.scale(l,l,this._displayScale),a.mat4.transpose(l,l)},t.prototype._renderBackgroundBuckets=function(e,t,r){if(t&&0!==t.length){var i=e.state,n=this._tileInfoView.getTileCoverage(e.state,0,"smallest"),o=i.resolution,a=i.rotation,s=i.size,l=n.spans,u=n.lodInfo,c=u.level,d=this._tileInfo,f=this.stage.context,h=e.displayLevel,p=this._backgroundTile;this._calculateRelativeViewProjMat(d.lodAt(c).resolution,o,a,d.size[1],p.coordRange,s[0],s[1],p.tileTransform.transform);for(var v,m=[0,0],g=1/i.size[0],y=1/i.size[1],x=0,b=l;x<b.length;x++)for(var w=b[x],D=w.row,M=w.colFrom,T=w.colTo,V=M;V<=T;V++){var P=p.key;P.set(c,D,u.normalizeCol(V),u.getWorldForColumn(V)),this._tileInfoView.getTileCoords(p.coords,P),i.toScreen(m,p.coords),m[1]=i.size[1]-m[1],p.tileTransform.displayCoord[0]=2*m[0]*g-1,p.tileTransform.displayCoord[1]=2*m[1]*y-1;for(var O=0,I=t;O<I.length;O++){var C=I[O];void 0!==(v=this._styleRepository.layers[C]).minzoom&&v.minzoom>h+1e-6||void 0!==v.maxzoom&&v.maxzoom<=h-1e-6||this._renderer.renderBackGroundLayer(f,v,C,p,e.requiredLevel,r,1)}}_.pool.release(n)}},t}(d.Container)}.apply(null,i))||(e.exports=n)},2069:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(878),r(930),r(934),r(928),r(826),r(825),r(880),r(2070),r(2071),r(2072),r(2073),r(2074),r(2075),r(2078),r(2079)],void 0===(n=function(e,t,r,i,n,o,a,s,l,u,c,d,f,h,p,_,v){return a.enums.CompareFunction,a.enums.DepthStencilTargetType,a.enums.Face,a.enums.PixelFormat,a.enums.PixelType,a.enums.StencilOperation,a.enums.TargetType,a.enums.TextureSamplingMode,function(){function e(e,t,r){void 0===r&&(r=!0),this._extrudeMatrix=i.mat4f32.create(),this._extrudeNoRotationMatrix=i.mat4f32.create(),this._extrudeRotateVector=n.vec3f32.fromValues(0,0,1),this._extrudeScaleVector=n.vec3f32.fromValues(1,1,1),this._backgroundColor=o.vec4f32.fromValues(1,0,0,1),this._state={rotation:0,size:[0,0]},this._cachedWidth=0,this._cachedHeight=0,this._cachedRotation=0,this._blitRenderer=new s.BitBlitRenderer,this._globalOpacityFBO=null,this._boundFBO=null,this._programCache=null,this._spriteMosaic=e,this._glyphMosaic=t,this._ignoreSpeed=!r,this._fadeRecorder=new d.FadeRecorder(400)}return e.prototype.dispose=function(){this._backgroundRenderer&&(this._backgroundRenderer.dispose(),this._backgroundRenderer=null),this._lineRenderer&&(this._lineRenderer.dispose(),this._lineRenderer=null),this._fillRenderer&&(this._fillRenderer.dispose(),this._fillRenderer=null),this._symbolRenderer&&(this._symbolRenderer.dispose(),this._symbolRenderer=null),this._circleRenderer&&(this._circleRenderer.dispose(),this._circleRenderer=null),this._tileInfoRenderer&&(this._tileInfoRenderer.dispose(),this._tileInfoRenderer=null),this._hittestFBO&&(this._hittestFBO.dispose(),this._hittestFBO=null),this._globalOpacityFBO&&(this._globalOpacityFBO.dispose(),this._globalOpacityFBO=null),this._blitRenderer&&(this._blitRenderer.dispose(),this._blitRenderer=null),this._boundFBO=null,this._programCache&&(this._programCache.dispose(),this._programCache=null),this._cachedWidth=0,this._cachedHeight=0,this._cachedRotation=0},e.prototype.initializeProgramCache=function(e){if(null===this._programCache){var t=new v.default;t.initialize(e),this._backgroundRenderer=new u(t),this._lineRenderer=new h(t),this._fillRenderer=new f(t),this._symbolRenderer=new p(t),this._circleRenderer=new c(t),this._tileInfoRenderer=new _(t),this._programCache=t}},e.prototype.setStateParams=function(e,t,i){this._fadeRecorder.recordLevel(i),this._state=e,this._state.size[0]===this._cachedWidth&&this._state.size[1]===this._cachedHeight&&this._state.rotation===this._cachedRotation||(this._extrudeScaleVector[0]=2/e.size[0],this._extrudeScaleVector[1]=-2/e.size[1],r.mat4.identity(this._extrudeMatrix),r.mat4.rotate(this._extrudeMatrix,this._extrudeMatrix,-e.rotation*l.C_DEG_TO_RAD,this._extrudeRotateVector),r.mat4.scale(this._extrudeMatrix,this._extrudeMatrix,this._extrudeScaleVector),r.mat4.transpose(this._extrudeMatrix,this._extrudeMatrix),r.mat4.identity(this._extrudeNoRotationMatrix),r.mat4.scale(this._extrudeNoRotationMatrix,this._extrudeNoRotationMatrix,this._extrudeScaleVector),r.mat4.transpose(this._extrudeNoRotationMatrix,this._extrudeNoRotationMatrix),this._cachedWidth=this._state.size[0],this._cachedHeight=this._state.size[1],this._cachedRotation=this._state.rotation)},e.prototype.drawClippingMasks=function(e,t){if(0!==t.length){e.setDepthWriteEnabled(!1),e.setDepthTestEnabled(!1),e.setStencilTestEnabled(!0),e.setBlendingEnabled(!1),e.setColorMask(!1,!1,!1,!1),e.setStencilOp(7680,7680,7681),e.setStencilWriteMask(255),e.setClearStencil(0);var r=e.gl;e.clear(r.STENCIL_BUFFER_BIT);for(var i=0,n=t;i<n.length;i++){var o=n[i];o.attached&&o.visible&&(e.setStencilFunctionSeparate(1032,519,o.stencilData.reference,o.stencilData.mask),this._backgroundRenderer.renderSolidColor(e,{u_matrix:o.tileTransform.transform,u_normalized_origin:o.tileTransform.displayCoord,u_coord_range:o.coordRange,u_depth:0,u_color:this._backgroundColor}))}e.setColorMask(!0,!0,!0,!0),e.setBlendingEnabled(!0)}},e.prototype.renderDebug=function(e,t){var r=t.key;this._backgroundColor.set([r.col%2,r.row%2,r.col%2==0&&r.row%2==0?1:0,.5]),this._backgroundRenderer.renderSolidColor(e,{u_matrix:t.tileTransform.transform,u_normalized_origin:t.tileTransform.displayCoord,u_coord_range:t.coordRange,u_depth:0,u_color:this._backgroundColor})},e.prototype.renderBackGroundLayer=function(e,t,r,i,n,o,a){return this._backgroundRenderer.render(e,t,r,i,n,o,this._spriteMosaic,this._spriteMosaic.pixelRatio,a)},e.prototype.getBackGroundRenderer=function(){return this._backgroundRenderer},e.prototype.getSpriteMosaic=function(){return this._spriteMosaic},e.prototype.renderBucket=function(e,t,r,i,n,o,a,s){if(!a||void 0!==a.minzoom&&a.minzoom>r+1e-6||void 0!==a.maxzoom&&a.maxzoom<=r-1e-6)return 0;switch(t.type){case 1:if(3!==n)return this._renderFill(e,t,r,n,o,a,s);break;case 2:if(2===n||4===n)return this._renderLine(e,t,r,n,o,a,s);break;case 3:if(3===n||4===n)return this._renderSymbol(e,t,r,n,i,o,a,s);break;case 4:if(3===n||4===n)return this._renderCircle(e,t,r,n,i,o,a,s)}return 0},e.prototype.renderTileInfo=function(e,t){this._tileInfoRenderer.render(e,t)},e.prototype.setGlobalOpacity=function(e,t,r){if(1!==r){this._boundFBO=e.getBoundFramebufferObject();var i=t.pixelRatio,n=t.state.size,o=n[0],s=n[1],l=Math.round(o*i),u=Math.round(s*i);null!==this._globalOpacityFBO&&this._globalOpacityFBO.width===l&&this._globalOpacityFBO.height===u||(null!==this._globalOpacityFBO&&this._globalOpacityFBO.dispose(),this._globalOpacityFBO=a.FramebufferObject.create(e,{colorTarget:0,depthStencilTarget:3,width:l,height:u})),e.bindFramebuffer(this._globalOpacityFBO),e.setClearColor(0,0,0,0),e.clear(e.gl.COLOR_BUFFER_BIT)}},e.prototype.applyGlobalOpacity=function(e,t,r){if(1!==r){var i=t.pixelRatio,n=t.state.size,o=n[0],a=n[1],s=e.getViewport();e.setViewport(0,0,i*o,i*a),e.bindFramebuffer(this._boundFBO);var l=this._globalOpacityFBO.colorTexture;this._blitRenderer.render(e,l,9728,r),e.setViewport(s.x,s.y,s.width,s.height),this._boundFBO=null}},e.prototype.needsRedraw=function(){return this._fadeRecorder.needsRedraw()},e.prototype.hitTest=function(e,t,r,i,n,o,s){var l=[0,0],u=[0,0],c=e.state;c.toMap(l,[0,0]),c.toMap(u,[o,o]);var d=i.filter((function(e){return!(l[0]>e.bounds[2]||u[0]<e.bounds[0]||l[1]<e.bounds[3]||u[1]>e.bounds[1])}));if(0===d.length)return[];d.sort((function(e,t){return e.key.level-t.key.level}));for(var f=d.length,h=1;h<=f;h++){(y=d[h-1]).attached&&(y.stencilData.reference=h,y.stencilData.mask=255)}s(c,n,d);var p=e.context;this._hittestFBO||(this._hittestFBO=a.FramebufferObject.create(p,{colorTarget:0,depthStencilTarget:3,width:o,height:o}));var _=p.getViewport(),v=p.getBoundFramebufferObject();p.bindFramebuffer(this._hittestFBO),p.setViewport(0,0,o,o);var m=p.gl;p.setDepthWriteEnabled(!0),p.setStencilWriteMask(255),p.setClearColor(1,1,1,1),p.setClearDepth(1),p.setClearStencil(0),p.clear(m.COLOR_BUFFER_BIT|m.DEPTH_BUFFER_BIT|m.STENCIL_BUFFER_BIT),p.setDepthWriteEnabled(!1),this.drawClippingMasks(p,d),p.setBlendingEnabled(!1),p.setStencilWriteMask(0),p.setStencilOp(7680,7680,7681),p.setDepthFunction(515),p.setDepthTestEnabled(!0),p.setDepthWriteEnabled(!0),p.setStencilTestEnabled(!0);for(var g=0;g<f;g++){var y;(y=d[g]).attached&&y.doRender(e)}p.setStencilTestEnabled(!1),p.setDepthTestEnabled(!1),this._readbackBuffer||(this._readbackBuffer=new Uint8Array(4*o*o),this._readbackBuffer32=new Uint32Array(this._readbackBuffer.buffer)),this._hittestFBO.readPixels(0,0,o,o,6408,5121,this._readbackBuffer);var x=new Set,b=o*o,w=Math.round(b/2),D=this._readbackBuffer32[w];4294967295!==D&&x.add(D);for(h=0;h<b;h++)4294967295!==(D=this._readbackBuffer32[h])&&x.add(D);p.bindFramebuffer(v),p.setViewport(_.x,_.y,_.width,_.height);var M=[];return x.forEach((function(e){M.push(e)})),M},e.prototype._renderLine=function(e,t,r,i,n,o,a){return this._lineRenderer.render(e,t,r,i,this._state,n,o,this._spriteMosaic,this._extrudeMatrix,this._spriteMosaic.pixelRatio,a)},e.prototype._renderFill=function(e,t,r,i,n,o,a){return this._fillRenderer.render(e,t,r,this._state.rotation,i,n,o,this._spriteMosaic,this._extrudeMatrix,this._spriteMosaic.pixelRatio,a)},e.prototype._renderCircle=function(e,t,r,i,n,o,a,s){var l=!0;return n===o.key.level&&(l=!1),e.setStencilTestEnabled(l),this._circleRenderer.render(e,t,r,i,this._state.rotation,o,a,this._extrudeMatrix,s)},e.prototype._renderSymbol=function(e,t,r,i,n,o,a,s){var l=!0;return n===o.key.level&&(l=!1),e.setStencilTestEnabled(l),this._symbolRenderer.render(e,t,r,i,this._state.rotation,this._fadeRecorder.getFadeValues(this._ignoreSpeed),o,a,this._spriteMosaic,this._glyphMosaic,this._extrudeMatrix,this._extrudeNoRotationMatrix,this._spriteMosaic.pixelRatio,s)},e}()}.apply(null,i))||(e.exports=n)},2070:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(280),r(304),r(928),r(826),r(1048),r(996)],void 0===(n=function(e,t,r,i,n,o,a,s){return o.enums.DataType,o.enums.PrimitiveType,o.enums.TextureSamplingMode,o.enums.Usage,function(){function e(e){this._patternMatrix=i.mat3f32.create(),this._color=n.vec4f32.create(),this._solidrendererInitialized=!1,this._rendererInitialized=!1,this._programOptions={id:!1,pattern:!1},this._programCache=e,this._color.set([1,0,0,1])}return e.prototype.dispose=function(){this._solidVertexArrayObject&&(this._solidVertexArrayObject.dispose(),this._solidVertexArrayObject=null),this._vertexArrayObject&&(this._vertexArrayObject.dispose(),this._vertexArrayObject=null)},e.prototype.renderSolidColor=function(e,t){this._solidrendererInitialized||this._initializeSolidRenderer(e),e.bindVAO(this._solidVertexArrayObject);var r=this._programOptions;r.id=!1,r.pattern=!1;var i=this._programCache.getProgram(0,0,r);e.bindProgram(i),i.setUniformMatrix4fv("u_transformMatrix",t.u_matrix),i.setUniform2fv("u_normalized_origin",t.u_normalized_origin),i.setUniform1f("u_coord_range",t.u_coord_range||4096),i.setUniform1f("u_depth",t.u_depth||0),i.setUniform4fv("u_color",t.u_color||this._color),e.drawArrays(5,0,4),e.bindVAO()},e.prototype.render=function(e,t,i,n,o,a,l,u,c){this._rendererInitialized||this._initialize(e);var d=t.getPaintValue("background-color",o),f=c*t.getPaintValue("background-opacity",o),h=t.getPaintValue("background-pattern",o),p=void 0!==h,_=d[3]*f,v=4===a,m=(v?1:0)<<1|(p?1:0),g=this._programOptions;g.id=v,g.pattern=p;var y=this._programCache.getProgram(0,m,g);if(e.bindVAO(this._vertexArrayObject),e.bindProgram(y),y.setUniform1f("u_coord_range",n.coordRange),y.setUniform1f("u_depth",t.z||0),y.setUniformMatrix4fv("u_transformMatrix",n.tileTransform.transform),y.setUniform2fv("u_normalized_origin",n.tileTransform.displayCoord),p){var x=l.getMosaicItemPosition(h,!0);if(!x)return 0;var b=512*(u>s.HIGH_RES_CUTOFF?2:1)*Math.max(Math.pow(2,Math.round(o)-n.key.level),1);r.mat3.identity(this._patternMatrix);var w=b/x.size[0],D=b/x.size[1];this._patternMatrix[0]=w,this._patternMatrix[4]=D,l.bind(e,9729,x.page,5),y.setUniformMatrix3fv("u_pattern_matrix",this._patternMatrix),y.setUniform1f("u_opacity",f),y.setUniform2f("u_pattern_tl",x.tl[0],x.tl[1]),y.setUniform2f("u_pattern_br",x.br[0],x.br[1]),y.setUniform1i("u_texture",5)}else this._color[0]=_*d[0],this._color[1]=_*d[1],this._color[2]=_*d[2],this._color[3]=_,y.setUniform4fv("u_color",this._color);if(v){var M=s.int32To4Bytes(i);y.setUniform4f("u_id",M[0],M[1],M[2],M[3])}return e.drawArrays(5,0,4),e.bindVAO(),2},e.prototype._initializeSolidRenderer=function(e){if(this._solidrendererInitialized)return!0;var t=new Int8Array([0,0,1,0,0,1,1,1]),r=o.BufferObject.createVertex(e,35044,t),i=new o.VertexArrayObject(e,this._programCache.getProgramAttributes(0),{geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:2,normalized:!1,divisor:0}]},{geometry:r});return this._solidVertexArrayObject=i,this._solidrendererInitialized=!0,!0},e.prototype._initialize=function(e){if(this._rendererInitialized)return!0;var t=[];t.push(a.i1616to32(0,0)),t.push(a.i1616to32(1,0)),t.push(a.i1616to32(0,1)),t.push(a.i1616to32(1,1));var r=new Uint32Array(t),i=o.BufferObject.createVertex(e,35044,r),n=new o.VertexArrayObject(e,{a_pos:0},{geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:4,normalized:!1,divisor:0}]},{geometry:i});return this._vertexArrayObject=n,this._rendererInitialized=!0,!0},e}()}.apply(null,i))||(e.exports=n)},2071:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(878),r(930),r(934),r(928),r(826),r(880),r(996)],void 0===(n=function(e,t,r,i,n,o,a,s,l){return a.enums.DataType,a.enums.PrimitiveType,function(){function e(e){this._viewProjMat=i.mat4f32.create(),this._offsetVector=n.vec3f32.create(),this._color=o.vec4f32.create(),this._strokeColor=o.vec4f32.create(),this._initialized=!1,this._programOptions={id:!1},this._programCache=e}return e.prototype.dispose=function(){},e.prototype.render=function(e,t,i,n,o,a,u,c,d){if(0===t.triangleElementCount)return 0;this._initialized||this._initialize(e);var f=u.hasDataDrivenRadius?1:u.getPaintValue("circle-radius",i),h=u.hasDataDrivenColor?[1,1,1,1]:u.getPaintValue("circle-color",i),p=u.hasDataDrivenOpacity?1:u.getPaintValue("circle-opacity",i),_=u.hasDataDrivenStrokeWidth?1:u.getPaintValue("circle-stroke-width",i),v=u.hasDataDrivenStrokeColor?[1,1,1,1]:u.getPaintValue("circle-stroke-color",i),m=u.hasDataDrivenStrokeOpacity?1:u.getPaintValue("circle-stroke-opacity",i),g=u.hasDataDrivenBlur?0:u.getPaintValue("circle-blur",i),y=p*h[3]*d;this._color[0]=y*h[0],this._color[1]=y*h[1],this._color[2]=y*h[2],this._color[3]=y,y=m*v[3]*d,this._strokeColor[0]=y*v[0],this._strokeColor[1]=y*v[1],this._strokeColor[2]=y*v[2],this._strokeColor[3]=y;var x=a.tileTransform.transform,b=u.getPaintValue("circle-translate",i);if(0!==b[0]||0!==b[1]){r.mat4.copy(this._viewProjMat,a.tileTransform.transform);var w=b[0],D=b[1],M=0,T=0,V=a.coordRange/512,P=(1<<a.key.level)/Math.pow(2,i)*V;if(1===u.getPaintValue("circle-translate-anchor",i)){var O=-s.C_DEG_TO_RAD*o,I=Math.sin(O),C=Math.cos(O);M=P*(w*C-D*I),T=P*(w*I+D*C)}else M=P*w,T=P*D;this._offsetVector[0]=M,this._offsetVector[1]=T,this._offsetVector[2]=0,r.mat4.translate(this._viewProjMat,this._viewProjMat,this._offsetVector),x=this._viewProjMat}var z=this._getCircleVAO(e,a);if(!z)return 0;e.bindVAO(z);var S=4===n,R=S?1:0,A=this._programOptions;A.id=S;var k=this._programCache.getProgram(5,R,A);if(e.bindProgram(k),k.setUniformMatrix4fv("u_transformMatrix",x),k.setUniformMatrix4fv("u_extrudeMatrix",c),k.setUniform2fv("u_normalized_origin",a.tileTransform.displayCoord),k.setUniform1f("u_depth",u.z),k.setUniform1f("u_radius",f),k.setUniform4fv("u_color",this._color),k.setUniform1f("u_blur",g),k.setUniform1f("u_stroke_width",_),k.setUniform4fv("u_stroke_color",this._strokeColor),k.setUniform1f("u_antialiasingWidth",1.2),S){var B=l.int32To4Bytes(t.layerID);k.setUniform4f("u_id",B[0],B[1],B[2],B[3])}return e.drawElements(4,t.triangleElementCount,5125,12*t.triangleElementStart),e.bindVAO(),t.triangleCount()},e.prototype._initialize=function(e){return!!this._initialized||(this._vertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:16,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:4,stride:16,normalized:!0,divisor:0},{name:"a_stroke_color",count:4,type:5121,offset:8,stride:16,normalized:!0,divisor:0},{name:"a_data",count:4,type:5121,offset:12,stride:16,normalized:!1,divisor:0}]},this._initialized=!0,!0)},e.prototype._getCircleVAO=function(e,t){if(t.circleVertexArrayObject)return t.circleVertexArrayObject;var r=t.circleVertexBuffer,i=t.circleIndexBuffer;return r&&i?(t.circleVertexArrayObject=new a.VertexArrayObject(e,this._programCache.getProgramAttributes(5),this._vertexAttributes,{geometry:r},i),t.circleVertexArrayObject):null},e}()}.apply(null,i))||(e.exports=n)},2072:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(84)],void 0===(n=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var i=function(e,t,r,i){this.fadeSpeed=e,this.minfadeLevel=t,this.maxfadeLevel=r,this.fadeChange=i};t.FadeProperties=i;var n=function(){function e(e){void 0===e&&(e=300),this._levelSnapshots=[],this._duration=e}return e.prototype.recordLevel=function(e){var t=r(),i=this._levelSnapshots;0===i.length&&(i.push({level:e,now:0}),i.push({level:e,now:0})),2!==i.length&&i[0].level===e||i.push({level:e,now:t})},e.prototype.needsRedraw=function(){if(0===this._levelSnapshots.length)return!1;for(var e=this._duration,t=this._levelSnapshots,r=t.length,i=t[r-1],n=-1;r>n+1&&t[n+1].now+e<i.now;)n++;for(n<0&&(n=0);n<r;n++)if(t[n].level!==i.level)return!0;return!1},e.prototype.getFadeValues=function(e){void 0===e&&(e=!1);for(var t=this._duration,i=r(),n=this._levelSnapshots;n.length>3&&n[1].now+t<i;)n.shift();n[1].now+t<i&&(n[0].level=n[1].level);var o=n[0].level,a=n[n.length-1],s=a.level,l=Math.min(o,s),u=Math.max(o,s),c=(a.level-n[1].level)/((a.now-n[1].now)/t),d=(i-a.now)/t*c;return e?{fadeSpeed:0,minfadeLevel:l,maxfadeLevel:u,fadeChange:0}:{fadeSpeed:c,minfadeLevel:l,maxfadeLevel:u,fadeChange:d}},e}();t.FadeRecorder=n}.apply(null,i))||(e.exports=n)},2073:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(280),r(304),r(878),r(930),r(934),r(928),r(826),r(880),r(996)],void 0===(n=function(e,t,r,i,n,o,a,s,l,u,c){return l.enums.DataType,l.enums.PrimitiveType,l.enums.TextureSamplingMode,function(){function e(e){this._viewProjMat=o.mat4f32.create(),this._offsetVector=a.vec3f32.create(),this._patternMatrix=i.mat3f32.create(),this._color=s.vec4f32.create(),this._outlineColor=s.vec4f32.create(),this._initialized=!1,this._fillProgramOptions={id:!1,dd:!1,pattern:!1},this._outlineProgramOptions={id:!1,dd:!1},this._programCache=e}return e.prototype.dispose=function(){},e.prototype.render=function(e,t,r,i,o,a,s,l,d,f,h){if(0===t.triangleElementCount)return 0;this._initialized||this._initialize(e);var p=void 0!==s.getPaintValue("fill-pattern",r),_=s.hasDataDrivenColor?[1,1,1,1]:s.getPaintValue("fill-color",r),v=s.hasDataDrivenOpacity?1:s.getPaintValue("fill-opacity",r),m=v*_[3]*h;this._color[0]=m*_[0],this._color[1]=m*_[1],this._color[2]=m*_[2],this._color[3]=m;var g,y=4===o;y&&(g=c.int32To4Bytes(t.layerID));var x=a.tileTransform.transform,b=a.coordRange/512,w=s.getPaintValue("fill-translate",r);if(0!==w[0]||0!==w[1]){n.mat4.copy(this._viewProjMat,a.tileTransform.transform);var D=w[0],M=w[1],T=0,V=0,P=(1<<a.key.level)/Math.pow(2,r)*b;if(1===s.getPaintValue("fill-translate-anchor",r)){var O=-u.C_DEG_TO_RAD*i,I=Math.sin(O),C=Math.cos(O);T=P*(D*C-M*I),V=P*(D*I+M*C)}else T=P*D,V=P*M;this._offsetVector[0]=T,this._offsetVector[1]=V,this._offsetVector[2]=0,n.mat4.translate(this._viewProjMat,this._viewProjMat,this._offsetVector),x=this._viewProjMat}var z=this._drawFill(e,t,r,o,a,s,l,x,f,h,y,g);if(!(s.getPaintValue("fill-antialias",r)&&!p&&t.outlineElementCount>0)||2!==o&&4!==o)return z;var S=s.hasDataDrivenOutline;if(s.outlineUsesFillColor){if(1!==this._color[3])return t.triangleElementCount/3;this._outlineColor[0]=this._color[0],this._outlineColor[1]=this._color[1],this._outlineColor[2]=this._color[2],this._outlineColor[3]=this._color[3]}else{var R=s.hasDataDrivenOutlineColor?[1,1,1,1]:s.getPaintValue("fill-outline-color",r),A=v*R[3]*h;this._outlineColor[0]=A*R[0],this._outlineColor[1]=A*R[1],this._outlineColor[2]=A*R[2],this._outlineColor[3]=A}var k=.75/f,B=this._getOutlineVAO(e,a,S);if(!B)return z;e.bindVAO(B);var j=(y?1:0)<<1|(S?1:0),U=this._outlineProgramOptions;U.id=y,U.dd=S;var E=this._programCache.getProgram(2,j,U);return e.bindProgram(E),E.setUniformMatrix4fv("u_transformMatrix",x),E.setUniformMatrix4fv("u_extrudeMatrix",d),E.setUniform2fv("u_normalized_origin",a.tileTransform.displayCoord),E.setUniform1f("u_depth",s.z+1/65536),E.setUniform1f("u_outline_width",k),E.setUniform4fv("u_color",this._outlineColor),y&&E.setUniform4f("u_id",g[0],g[1],g[2],g[3]),e.drawElements(4,t.outlineElementCount,5125,12*t.outlineElementStart),e.bindVAO(),z+t.outlineElementCount/3},e.prototype._initialize=function(e){return!!this._initialized||(this._fillVertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:4,normalized:!1,divisor:0}]},this._fillVertexAttributesDD={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:8,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:4,stride:8,normalized:!0,divisor:0}]},this._outlineVertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:8,normalized:!1,divisor:0},{name:"a_offset",count:2,type:5120,offset:4,stride:8,normalized:!1,divisor:0},{name:"a_xnormal",count:2,type:5120,offset:6,stride:8,normalized:!1,divisor:0}]},this._outlineVertexAttributesDD={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:12,normalized:!1,divisor:0},{name:"a_offset",count:2,type:5120,offset:4,stride:12,normalized:!1,divisor:0},{name:"a_xnormal",count:2,type:5120,offset:6,stride:12,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:8,stride:12,normalized:!0,divisor:0}]},this._initialized=!0,!0)},e.prototype._drawFill=function(e,t,i,n,o,a,s,l,u,d,f,h){var p=a.getPaintValue("fill-pattern",i),_=void 0!==p,v=a.hasDataDrivenOpacity?1:d*a.getPaintValue("fill-opacity",i),m=a.hasDataDrivenColor?[1,1,1,1]:a.getPaintValue("fill-color",i),g=v*m[3]*d;this._color[0]=g*m[0],this._color[1]=g*m[1],this._color[2]=g*m[2],this._color[3]=g;var y=a.hasDataDrivenFill,x=_||g<1||y;if(x&&1===n)return 0;if(!x&&2===n)return 0;var b=this._getFillVAO(e,o,y);if(!b)return 0;e.bindVAO(b);var w=(f?1:0)<<2|(y?1:0)<<1|(_?1:0),D=this._fillProgramOptions;D.id=f,D.dd=y,D.pattern=_;var M=this._programCache.getProgram(1,w,D);if(e.bindProgram(M),_){var T=s.getMosaicItemPosition(p,!0);if(!T)return e.bindVAO(),void e.bindProgram();var V=u>c.HIGH_RES_CUTOFF?2:1,P=Math.max(Math.pow(2,Math.round(i)-o.key.level),1),O=o.coordRange/(512*V*P);r.mat3.identity(this._patternMatrix);var I=1/(T.size[0]*O),C=1/(T.size[1]*O);this._patternMatrix[0]=I,this._patternMatrix[4]=C,s.bind(e,9729,T.page,5),M.setUniformMatrix3fv("u_pattern_matrix",this._patternMatrix),M.setUniform2f("u_pattern_tl",T.tl[0],T.tl[1]),M.setUniform2f("u_pattern_br",T.br[0],T.br[1]),M.setUniform1i("u_texture",5)}return M.setUniformMatrix4fv("u_transformMatrix",l),M.setUniform2fv("u_normalized_origin",o.tileTransform.displayCoord),M.setUniform1f("u_depth",a.z+1/65536),M.setUniform4fv("u_color",this._color),f&&M.setUniform4f("u_id",h[0],h[1],h[2],h[3]),e.drawElements(4,t.triangleElementCount,5125,12*t.triangleElementStart),e.bindVAO(),t.triangleElementCount/3},e.prototype._getFillVAO=function(e,t,r){if(r){if(t.fillDDVertexArrayObject)return t.fillDDVertexArrayObject;var i=t.fillDDVertexBuffer,n=t.fillIndexBuffer;return i&&n?(t.fillDDVertexArrayObject=new l.VertexArrayObject(e,this._programCache.getProgramAttributes(1),this._fillVertexAttributesDD,{geometry:i},n),t.fillDDVertexArrayObject):null}if(t.fillVertexArrayObject)return t.fillVertexArrayObject;i=t.fillVertexBuffer,n=t.fillIndexBuffer;return i&&n?(t.fillVertexArrayObject=new l.VertexArrayObject(e,this._programCache.getProgramAttributes(1),this._fillVertexAttributes,{geometry:i},n),t.fillVertexArrayObject):null},e.prototype._getOutlineVAO=function(e,t,r){if(r){if(t.outlineDDVertexArrayObject)return t.outlineDDVertexArrayObject;var i=t.outlineDDVertexBuffer,n=t.outlineIndexBuffer;return i&&n?(t.outlineDDVertexArrayObject=new l.VertexArrayObject(e,this._programCache.getProgramAttributes(2),this._outlineVertexAttributesDD,{geometry:i},n),t.outlineDDVertexArrayObject):null}if(t.outlineVertexArrayObject)return t.outlineVertexArrayObject;i=t.outlineVertexBuffer,n=t.outlineIndexBuffer;return i&&n?(t.outlineVertexArrayObject=new l.VertexArrayObject(e,this._programCache.getProgramAttributes(2),this._outlineVertexAttributes,{geometry:i},n),t.outlineVertexArrayObject):null},e}()}.apply(null,i))||(e.exports=n)},2074:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(878),r(930),r(275),r(934),r(928),r(826),r(880),r(996)],void 0===(n=function(e,t,r,i,n,o,a,s,l,u){return s.enums.DataType,s.enums.PrimitiveType,s.enums.TextureSamplingMode,function(){function e(e){this._initialized=!1,this._viewProjMat=i.mat4f32.create(),this._offsetVector=o.vec3f32.create(),this._color=a.vec4f32.create(),this._dashArray=n.vec2f32.create(),this._programOptions={id:!1,dd:!1,pattern:!1},this._programCache=e}return e.prototype.dispose=function(){},e.prototype.render=function(e,t,i,n,o,a,s,c,d,f,h){if(0===t.triangleElementCount)return 0;this._initialized||this._initialize(e);var p=a.tileTransform.transform,_=a.coordRange/512,v=s.getPaintValue("line-translate",i);if(0!==v[0]||0!==v[1]){r.mat4.copy(this._viewProjMat,a.tileTransform.transform);var m=v[0],g=v[1],y=0,x=0,b=(1<<a.key.level)/Math.pow(2,i)*_,w=o.rotation;if(1===s.getPaintValue("line-translate-anchor",i)){var D=-l.C_DEG_TO_RAD*w,M=Math.sin(D),T=Math.cos(D);y=b*(m*T-g*M),x=b*(m*M+g*T)}else y=b*m,x=b*g;this._offsetVector[0]=y,this._offsetVector[1]=x,this._offsetVector[2]=0,r.mat4.translate(this._viewProjMat,this._viewProjMat,this._offsetVector),p=this._viewProjMat}var V=s.getPaintValue("line-pattern",i),P=void 0!==V,O=1/f,I=s.getPaintValue("line-blur",i),C=s.hasDataDrivenColor?[1,1,1,1]:s.getPaintValue("line-color",i),z=s.hasDataDrivenOpacity?1:s.getPaintValue("line-opacity",i),S=s.hasDataDrivenWidth?1:s.getPaintValue("line-width",i),R=z*C[3]*h;this._color[0]=R*C[0],this._color[1]=R*C[1],this._color[2]=R*C[2],this._color[3]=R;var A,k=s.hasDataDrivenLine,B=4===n;B&&(A=u.int32To4Bytes(t.layerID));var j=this._getLineVAO(e,a,k);if(!j)return 0;e.bindVAO(j);var U=(B?1:0)<<2|(k?1:0)<<1|(P?1:0),E=this._programOptions;E.id=B,E.dd=k,E.pattern=P;var F=this._programCache.getProgram(3,U,E);if(e.bindProgram(F),F.setUniformMatrix4fv("u_transformMatrix",p),F.setUniformMatrix4fv("u_extrudeMatrix",d),F.setUniform2fv("u_normalized_origin",a.tileTransform.displayCoord),F.setUniform1f("u_depth",s.z),F.setUniform1f("u_blur",I),F.setUniform1f("u_antialiasing",O),F.setUniform4fv("u_color",this._color),F.setUniform1f("u_width",S),B&&F.setUniform4f("u_id",A[0],A[1],A[2],A[3]),P){var L=c.getMosaicItemPosition(V,!0);L&&(c.bind(e,9729,L.page,5),F.setUniform2f("u_pattern_tl",L.tl[0],L.br[1]),F.setUniform2f("u_pattern_br",L.br[0],L.tl[1]),F.setUniform2f("u_spriteSize",_*L.size[0],L.size[1]),F.setUniform1i("u_texture",5))}else{var N=s.getPaintValue("line-dasharray",i);N.length<2&&(N=[1,-1]);var q=_;this._dashArray[0]=q*N[0],this._dashArray[1]=q*N[1],F.setUniform2fv("u_dasharray",this._dashArray)}return e.drawElements(4,t.triangleElementCount,5125,12*t.triangleElementStart),e.bindVAO(),t.triangleCount()},e.prototype._initialize=function(e){return!!this._initialized||(this._vertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:12,normalized:!1,divisor:0},{name:"a_offsetAndNormal",count:4,type:5120,offset:4,stride:12,normalized:!1,divisor:0},{name:"a_accumulatedDistance",count:2,type:5123,offset:8,stride:12,normalized:!1,divisor:0}]},this._vertexAttributesDD={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:20,normalized:!1,divisor:0},{name:"a_offsetAndNormal",count:4,type:5120,offset:4,stride:20,normalized:!1,divisor:0},{name:"a_accumulatedDistance",count:2,type:5122,offset:8,stride:20,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:12,stride:20,normalized:!0,divisor:0},{name:"a_width",count:1,type:5126,offset:16,stride:20,normalized:!1,divisor:0}]},this._initialized=!0,!0)},e.prototype._getLineVAO=function(e,t,r){if(r){if(t.lineDDVertexArrayObject)return t.lineDDVertexArrayObject;var i=t.lineDDVertexBuffer,n=t.lineIndexBuffer;return i&&n?(t.lineDDVertexArrayObject=new s.VertexArrayObject(e,this._programCache.getProgramAttributes(3),this._vertexAttributesDD,{geometry:i},n),t.lineDDVertexArrayObject):null}if(t.lineVertexArrayObject)return t.lineVertexArrayObject;i=t.lineVertexBuffer,n=t.lineIndexBuffer;return i&&n?(t.lineVertexArrayObject=new s.VertexArrayObject(e,this._programCache.getProgramAttributes(3),this._vertexAttributes,{geometry:i},n),t.lineVertexArrayObject):null},e}()}.apply(null,i))||(e.exports=n)},2075:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(2076),r(2077)],void 0===(n=function(e,t,r,i){return function(){function e(e){this._iconRenderer=new r(e),this._sdfRenderer=new i(e)}return e.prototype.dispose=function(){this._iconRenderer&&(this._iconRenderer.dispose(),this._iconRenderer=null),this._sdfRenderer&&(this._sdfRenderer.dispose(),this._sdfRenderer=null)},e.prototype.render=function(e,t,r,i,n,o,a,s,l,u,c,d,f,h){return t.hasData()?(t.markerPerPageElementsMap.size>0&&this._iconRenderer.render(e,t,r,i,n,o,a,s,l,c,d,h),t.glyphPerPageElementsMap.size>0&&this._sdfRenderer.render(e,t,r,i,n,o,a,s,u,c,d,f,h),t.triangleCount()):0},e}()}.apply(null,i))||(e.exports=n)},2076:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(878),r(930),r(275),r(934),r(928),r(826),r(880),r(996)],void 0===(n=function(e,t,r,i,n,o,a,s,l,u){return s.enums.DataType,s.enums.PrimitiveType,s.enums.TextureSamplingMode,function(){function e(e){this._viewProjMat=i.mat4f32.create(),this._offsetVector=o.vec3f32.create(),this._spritesTextureSize=n.vec2f32.create(),this._color=a.vec4f32.create(),this._initialized=!1,this._programOptions={id:!1,dd:!1,sdf:!1},this._programCache=e}return e.prototype.dispose=function(){},e.prototype.render=function(e,t,i,n,o,a,s,c,d,f,h,p){var _=this;this._initialized||this._initialize(e);var v=c.hasDataDrivenIconSize?1:c.getLayoutValue("icon-size",i),m=c.hasDataDrivenIconColor?[1,1,1,1]:c.getPaintValue("icon-color",i),g=c.hasDataDrivenIconOpacity?1:c.getPaintValue("icon-opacity",i),y=m[3]*g*p;this._color[0]=y*m[0],this._color[1]=y*m[1],this._color[2]=y*m[2],this._color[3]=y;var x=c.getLayoutValue("icon-rotation-alignment",i);2===x&&(x=1===c.getLayoutValue("symbol-placement",i)?0:1);var b=0===x,w=t.isSDF,D=c.hasDataDrivenIcon,M=4===n,T=l.degToByte(o),V=s.tileTransform.transform,P=c.getPaintValue("icon-translate",i);if(0!==P[0]||0!==P[1]){r.mat4.copy(this._viewProjMat,s.tileTransform.transform);var O=P[0],I=P[1],C=0,z=0,S=s.coordRange/512,R=(1<<s.key.level)/Math.pow(2,i)*S;if(1===c.getPaintValue("icon-translate-anchor",i)){var A=-l.C_DEG_TO_RAD*o,k=Math.sin(A),B=Math.cos(A);C=R*(O*B-I*k),z=R*(O*k+I*B)}else C=R*O,z=R*I;this._offsetVector[0]=C,this._offsetVector[1]=z,this._offsetVector[2]=0,r.mat4.translate(this._viewProjMat,this._viewProjMat,this._offsetVector),V=this._viewProjMat}var j=b?f:h,U=this._getIconVAO(e,s,D);if(U){e.bindVAO(U);var E=(M?1:0)<<2|(D?1:0)<<1|(w?1:0),F=this._programOptions;F.id=M,F.dd=D,F.sdf=w;var L=this._programCache.getProgram(4,E,F);if(e.bindProgram(L),w){var N=c.getPaintValue("icon-halo-color",i),q=c.getPaintValue("icon-halo-width",i);L.setUniform4f("u_outlineColor",N[0],N[1],N[2],N[3]),L.setUniform1f("u_outlineSize",q)}if(L.setUniformMatrix4fv("u_transformMatrix",V),L.setUniformMatrix4fv("u_extrudeMatrix",j),L.setUniform2fv("u_normalized_origin",s.tileTransform.displayCoord),L.setUniform1f("u_depth",c.z),L.setUniform1f("u_mapRotation",T),L.setUniform1f("u_keepUpright",0),L.setUniform1f("u_level",10*i),L.setUniform1f("u_fadeSpeed",10*a.fadeSpeed),L.setUniform1f("u_minfadeLevel",10*a.minfadeLevel),L.setUniform1f("u_maxfadeLevel",10*a.maxfadeLevel),L.setUniform1f("u_fadeChange",10*(i+a.fadeChange)),L.setUniform1i("u_texture",5),L.setUniform1f("u_size",v),L.setUniform4fv("u_color",this._color),M){var H=u.int32To4Bytes(t.layerID);L.setUniform4f("u_id",H[0],H[1],H[2],H[3])}t.markerPerPageElementsMap.forEach((function(t,r){_._spritesTextureSize[0]=d.getWidth(r)/4,_._spritesTextureSize[1]=d.getHeight(r)/4,L.setUniform2fv("u_mosaicSize",_._spritesTextureSize),d.bind(e,9729,r,5),e.drawElements(4,t[1],5125,12*t[0])})),e.bindVAO()}},e.prototype._initialize=function(e){return!!this._initialized||(this._vertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:16,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:16,normalized:!1,divisor:0},{name:"a_tex",count:4,type:5121,offset:8,stride:16,normalized:!1,divisor:0},{name:"a_levelInfo",count:4,type:5121,offset:12,stride:16,normalized:!1,divisor:0}]},this._vertexAttributesDD={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:24,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:24,normalized:!1,divisor:0},{name:"a_tex",count:4,type:5121,offset:8,stride:24,normalized:!1,divisor:0},{name:"a_levelInfo",count:4,type:5121,offset:12,stride:24,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:16,stride:24,normalized:!0,divisor:0},{name:"a_size",count:1,type:5126,offset:20,stride:24,normalized:!1,divisor:0}]},this._initialized=!0,!0)},e.prototype._getIconVAO=function(e,t,r){if(r){if(t.iconDDVertexArrayObject)return t.iconDDVertexArrayObject;var i=t.iconDDVertexBuffer,n=t.iconIndexBuffer;return i&&n?(t.iconDDVertexArrayObject=new s.VertexArrayObject(e,this._programCache.getProgramAttributes(4),this._vertexAttributesDD,{geometry:i},n),t.iconDDVertexArrayObject):null}if(t.iconVertexArrayObject)return t.iconVertexArrayObject;i=t.iconVertexBuffer,n=t.iconIndexBuffer;return i&&n?(t.iconVertexArrayObject=new s.VertexArrayObject(e,this._programCache.getProgramAttributes(4),this._vertexAttributes,{geometry:i},n),t.iconVertexArrayObject):null},e}()}.apply(null,i))||(e.exports=n)},2077:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(15),r(878),r(930),r(275),r(934),r(928),r(826),r(880),r(996)],void 0===(n=function(e,t,r,i,n,o,a,s,l,u,c){return l.enums.DataType,l.enums.PrimitiveType,l.enums.TextureSamplingMode,function(){function e(e){this._viewProjMat=n.mat4f32.create(),this._offsetVector=a.vec3f32.create(),this._extrudeMat=n.mat4f32.create(),this._scaleVec=a.vec3f32.create(),this._haloColor=s.vec4f32.create(),this._sdfColor=s.vec4f32.create(),this._initialized=!1,this._programOptions={id:!1,dd:!1},this._programCache=e}return e.prototype.dispose=function(){},e.prototype.render=function(e,t,n,a,s,l,d,f,h,p,_,v,m){var g=this;if(!r("esri-vector-tiles-avoid-text")){this._initialized||this._initialize(e);var y=u.degToByte(s),x=f.getLayoutValue("text-rotation-alignment",n);2===x&&(x=1===f.getLayoutValue("symbol-placement",n)?0:1);var b=0===x,w=f.getLayoutValue("text-keep-upright",n)&&b,D=4===a,M=.8*3/v,T=f.hasDataDrivenTextSize?1:f.getLayoutValue("text-size",n),V=f.hasDataDrivenTextColor?[1,1,1,1]:f.getPaintValue("text-color",n),P=f.hasDataDrivenTextOpacity?1:f.getPaintValue("text-opacity",n),O=V[3]*P*m;this._sdfColor[0]=O*V[0],this._sdfColor[1]=O*V[1],this._sdfColor[2]=O*V[2],this._sdfColor[3]=O,this._glyphTextureSize||(this._glyphTextureSize=o.vec2f32.fromValues(h.width/4,h.height/4));var I=d.tileTransform.transform,C=f.getPaintValue("text-translate",n);if(0!==C[0]||0!==C[1]){i.mat4.copy(this._viewProjMat,d.tileTransform.transform);var z=C[0],S=C[1],R=0,A=0,k=d.coordRange/512,B=(1<<d.key.level)/Math.pow(2,n)*k;if(1===f.getPaintValue("text-translate-anchor",n)){var j=-u.C_DEG_TO_RAD*s,U=Math.sin(j),E=Math.cos(j);R=B*(z*E-S*U),A=B*(z*U+S*E)}else R=B*z,A=B*S;this._offsetVector[0]=R,this._offsetVector[1]=A,this._offsetVector[2]=0,i.mat4.translate(this._viewProjMat,this._viewProjMat,this._offsetVector),I=this._viewProjMat}b?i.mat4.copy(this._extrudeMat,p):i.mat4.copy(this._extrudeMat,_),this._scaleVec[0]=1/24,this._scaleVec[1]=1/24,this._scaleVec[2]=1,i.mat4.scale(this._extrudeMat,this._extrudeMat,this._scaleVec);var F=f.hasDataDrivenText,L=this._getSDFVAO(e,d,F);if(L){e.bindVAO(L);var N=(D?1:0)<<1|(F?1:0),q=this._programOptions;q.id=D,q.dd=F;var H=this._programCache.getProgram(6,N,q);if(e.bindProgram(H),H.setUniformMatrix4fv("u_transformMatrix",I),H.setUniformMatrix4fv("u_extrudeMatrix",this._extrudeMat),H.setUniform2fv("u_normalized_origin",d.tileTransform.displayCoord),H.setUniform1f("u_depth",f.z+1/65536),H.setUniform2fv("u_mosaicSize",this._glyphTextureSize),H.setUniform1f("u_mapRotation",y),H.setUniform1f("u_keepUpright",w?1:0),H.setUniform1f("u_level",10*n),H.setUniform1f("u_fadeSpeed",10*l.fadeSpeed),H.setUniform1f("u_minfadeLevel",10*l.minfadeLevel),H.setUniform1f("u_maxfadeLevel",10*l.maxfadeLevel),H.setUniform1f("u_fadeChange",10*(n+l.fadeChange)),H.setUniform1i("u_texture",6),H.setUniform1f("u_size",T),H.setUniform1f("u_antialiasingWidth",M),D){var W=c.int32To4Bytes(t.layerID);H.setUniform4f("u_id",W[0],W[1],W[2],W[3])}t.glyphPerPageElementsMap.forEach((function(t,r){g._renderGlyphRange(e,t,r,f,h,H,n,P*m,3)})),e.bindVAO()}}},e.prototype._renderGlyphRange=function(e,t,r,i,n,o,a,s,l){n.bind(e,9729,r,6);var u=i.getPaintValue("text-halo-color",a),c=i.getPaintValue("text-halo-width",a);if(u[3]>0&&c>0){var d=u[3]*s;this._haloColor[0]=d*u[0],this._haloColor[1]=d*u[1],this._haloColor[2]=d*u[2],this._haloColor[3]=d;var f=i.getPaintValue("text-halo-blur",a)*l,h=c*l;o.setUniform4fv("u_color",this._haloColor),o.setUniform1f("u_halo",1),o.setUniform1f("u_edgeDistance",h),o.setUniform1f("u_edgeBlur",f),e.drawElements(4,t[1],5125,12*t[0])}this._sdfColor[3]>0&&(o.setUniform4fv("u_color",this._sdfColor),o.setUniform1f("u_halo",0),o.setUniform1f("u_edgeDistance",0),o.setUniform1f("u_edgeBlur",0),e.drawElements(4,t[1],5125,12*t[0]))},e.prototype._initialize=function(e){return!!this._initialized||(this._vertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:16,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:16,normalized:!1,divisor:0},{name:"a_tex",count:4,type:5121,offset:8,stride:16,normalized:!1,divisor:0},{name:"a_levelInfo",count:4,type:5121,offset:12,stride:16,normalized:!1,divisor:0}]},this._vertexAttributesDD={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:24,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:24,normalized:!1,divisor:0},{name:"a_tex",count:4,type:5121,offset:8,stride:24,normalized:!1,divisor:0},{name:"a_levelInfo",count:4,type:5121,offset:12,stride:24,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:16,stride:24,normalized:!0,divisor:0},{name:"a_size",count:1,type:5126,offset:20,stride:24,normalized:!1,divisor:0}]},this._initialized=!0,!0)},e.prototype._getSDFVAO=function(e,t,r){if(r){if(t.textDDVertexArrayObject)return t.textDDVertexArrayObject;var i=t.textDDVertexBuffer,n=t.textIndexBuffer;return i&&n?(t.textDDVertexArrayObject=new l.VertexArrayObject(e,this._programCache.getProgramAttributes(6),this._vertexAttributesDD,{geometry:i},n),t.textDDVertexArrayObject):null}if(t.textVertexArrayObject)return t.textVertexArrayObject;i=t.textVertexBuffer,n=t.textIndexBuffer;return i&&n?(t.textVertexArrayObject=new l.VertexArrayObject(e,this._programCache.getProgramAttributes(6),this._vertexAttributes,{geometry:i},n),t.textVertexArrayObject):null},e}()}.apply(null,i))||(e.exports=n)},2078:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(928),r(826),r(880)],void 0===(n=function(e,t,r,i,n){return i.enums.CompareFunction,i.enums.DataType,i.enums.PixelFormat,i.enums.PixelType,i.enums.PrimitiveType,i.enums.TextureSamplingMode,i.enums.TextureType,i.enums.Usage,function(){function e(e){this._initialized=!1,this._color=r.vec4f32.fromValues(1,0,0,1),this._maxWidth=0,this._programOptions={id:!1,pattern:!1},this._programCache=e}return e.prototype.dispose=function(){this._outlineVertexArrayObject&&(this._outlineVertexArrayObject.dispose(),this._outlineVertexArrayObject=null),this._tileInfoVertexArrayObject&&(this._tileInfoVertexArrayObject.dispose(),this._tileInfoVertexArrayObject=null)},e.prototype.render=function(e,t){this._initialized||this._initialize(e);var r=this._programCache.getProgram(0,0,this._programOptions);if(r){e.bindVAO(this._outlineVertexArrayObject),e.bindProgram(r),r.setUniformMatrix4fv("u_transformMatrix",t.tileTransform.transform),r.setUniform2fv("u_normalized_origin",t.tileTransform.displayCoord),r.setUniform1f("u_coord_range",t.coordRange),r.setUniform1f("u_depth",0),r.setUniform4fv("u_color",this._color),e.drawArrays(3,0,4),e.bindVAO(),t.triangleCount>1e5&&(e.setStencilFunction(514,t.stencilData.reference,t.stencilData.mask),e.setStencilTestEnabled(!0),e.bindVAO(this._quadVertexArrayObject),r.setUniform4f("u_color",.9,0,0,.35),e.drawArrays(5,0,4),e.bindVAO(),e.setStencilTestEnabled(!1));var i=this._getTexture(e,t);if(i){var n=this._programCache.getProgram(7,0,null);n&&(e.bindVAO(this._tileInfoVertexArrayObject),e.bindProgram(n),e.bindTexture(i,0),n.setUniformMatrix4fv("u_transformMatrix",t.tileTransform.transform),n.setUniform2fv("u_normalized_origin",t.tileTransform.displayCoord),n.setUniform1f("u_depth",0),n.setUniform1f("u_coord_ratio",t.coordRange/512),n.setUniform2f("u_delta",8,8),n.setUniform2f("u_dimensions",i.descriptor.width,i.descriptor.height),e.drawArrays(5,0,4),e.bindVAO())}}},e.prototype._initialize=function(e){if(this._initialized)return!0;var t={geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:2,normalized:!1,divisor:0}]},r=new Int8Array([0,0,1,0,1,1,0,1]),n=i.BufferObject.createVertex(e,35044,r),o=new i.VertexArrayObject(e,this._programCache.getProgramAttributes(0),t,{geometry:n}),a=new Int8Array([0,0,0,1,1,0,1,1]),s=i.BufferObject.createVertex(e,35044,a),l=new i.VertexArrayObject(e,this._programCache.getProgramAttributes(0),t,{geometry:s}),u=new Int8Array([0,0,1,0,0,1,1,1]),c=i.BufferObject.createVertex(e,35044,u),d=new i.VertexArrayObject(e,this._programCache.getProgramAttributes(7),t,{geometry:c});return this._outlineVertexArrayObject=o,this._quadVertexArrayObject=l,this._tileInfoVertexArrayObject=d,this._initialized=!0,!0},e.prototype._getTexture=function(e,t){if(t.texture)return t.texture;this._canvas||(this._canvas=document.createElement("canvas"),this._canvas.setAttribute("id","canvas2d"),this._canvas.setAttribute("width","512"),this._canvas.setAttribute("height","32"),this._canvas.setAttribute("style","display:none"));var r=t.key.id+", "+t.triangleCount,o=this._canvas.getContext("2d");o.font="24px sans-serif",o.textAlign="left",o.textBaseline="middle";var a=o.measureText(r),s=Math.pow(2,Math.ceil(n.log2(a.width+2)));s>this._maxWidth&&(this._maxWidth=s),o.clearRect(0,0,this._maxWidth,32),o.fillStyle="blue";var l,u=0,c=0;if(t.refKeys)for(var d=0,f=Object.keys(t.refKeys);d<f.length;d++){var h=f[d],p=t.refKeys[h].match(/\d+/);l=parseInt(p[0],10),isNaN(l)||(c++,t.key.level>l&&u++)}return u===c?o.fillStyle="red":u>0&&(o.fillStyle="purple"),o.fillText(r,0,16),t.texture=new i.Texture(e,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728},this._canvas),t.texture},e}()}.apply(null,i))||(e.exports=n)},2079:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(826),r(2080)],void 0===(n=function(e,t,r,i){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this._cache=new Array(8);for(var e=0;e<8;e++)this._cache[e]={}}return e.prototype.dispose=function(){this._programRepo&&(this._programRepo.dispose(),this._programRepo=null)},e.prototype.getProgram=function(e,t,r){var i=this._cache[e];if(!i[t]){var n=this._programRepo.getProgram(this._getProgramTemplate(e),r);i[t]=n}return i[t]},e.prototype.getProgramAttributes=function(e){switch(e){case 0:return i.background.attributes;case 5:return i.circle.attributes;case 1:return i.fill.attributes;case 4:return i.icon.attributes;case 3:return i.line.attributes;case 2:return i.outline.attributes;case 6:return i.text.attributes;case 7:return i.tileInfo.attributes}},e.prototype.initialize=function(e){this._programRepo||(this._programRepo=new r.ProgramCache(e))},e.prototype._getProgramTemplate=function(e){switch(e){case 0:return i.background;case 5:return i.circle;case 1:return i.fill;case 4:return i.icon;case 3:return i.line;case 2:return i.outline;case 6:return i.text;case 7:return i.tileInfo}},e}();t.default=n}.apply(null,i))||(e.exports=n)},2080:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(826),r(2081)],void 0===(n=function(e,t,r,i){Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return r.glslifyDefineMap({ID:e.id,PATTERN:e.pattern})};t.background={name:"background",shaders:function(e){return{vertexShader:n(e)+i.resolveIncludes("background/background.vert"),fragmentShader:n(e)+i.resolveIncludes("background/background.frag")}},attributes:{a_pos:0}};var o=function(e){return r.glslifyDefineMap({ID:e.id})};t.circle={name:"circle",shaders:function(e){return{vertexShader:o(e)+i.resolveIncludes("circle/circle.vert"),fragmentShader:o(e)+i.resolveIncludes("circle/circle.frag")}},attributes:{a_pos:0,a_color:1,a_stroke_color:2,a_data:3}};var a=function(e){return r.glslifyDefineMap({ID:e.id,DD:e.dd,PATTERN:e.pattern})};t.fill={name:"fill",shaders:function(e){return{vertexShader:a(e)+i.resolveIncludes("fill/fill.vert"),fragmentShader:a(e)+i.resolveIncludes("fill/fill.frag")}},attributes:{a_pos:0,a_color:1}};var s=function(e){return r.glslifyDefineMap({ID:e.id,DD:e.dd})};t.outline={name:"outline",shaders:function(e){return{vertexShader:s(e)+i.resolveIncludes("outline/outline.vert"),fragmentShader:s(e)+i.resolveIncludes("outline/outline.frag")}},attributes:{a_pos:0,a_offset:1,a_xnormal:2,a_color:3}};var l=function(e){return r.glslifyDefineMap({ID:e.id,DD:e.dd,SDF:e.sdf})};t.icon={name:"icon",shaders:function(e){return{vertexShader:l(e)+i.resolveIncludes("icon/icon.vert"),fragmentShader:l(e)+i.resolveIncludes("icon/icon.frag")}},attributes:{a_pos:0,a_vertexOffset:1,a_tex:2,a_levelInfo:3,a_color:4,a_size:5}};var u=function(e){return r.glslifyDefineMap({ID:e.id,DD:e.dd,PATTERN:e.pattern})};t.line={name:"line",shaders:function(e){return{vertexShader:u(e)+i.resolveIncludes("line/line.vert"),fragmentShader:u(e)+i.resolveIncludes("line/line.frag")}},attributes:{a_pos:0,a_offsetAndNormal:1,a_accumulatedDistance:2,a_color:3,a_width:4}};var c=function(e){return r.glslifyDefineMap({ID:e.id,DD:e.dd})};t.text={name:"text",shaders:function(e){return{vertexShader:c(e)+i.resolveIncludes("text/text.vert"),fragmentShader:c(e)+i.resolveIncludes("text/text.frag")}},attributes:{a_pos:0,a_vertexOffset:1,a_tex:2,a_levelInfo:3,a_color:4,a_size:5}},t.tileInfo={name:"tileInfo",shaders:{vertexShader:i.resolveIncludes("tileInfo/tileInfo.vert"),fragmentShader:i.resolveIncludes("tileInfo/tileInfo.frag")},attributes:{a_pos:0}}}.apply(null,i))||(e.exports=n)},2081:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(826),r(2082)],void 0===(n=function(e,t,r,i){Object.defineProperty(t,"__esModule",{value:!0});var n=new r.ShaderCompiler((function(e){var t=i;return e.split("/").forEach((function(e){t&&(t=t[e])})),t}));t.resolveIncludes=function(e){return n.resolveIncludes(e)}}.apply(null,i))||(e.exports=n)},2082:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){return{background:{"background.frag":"#ifdef PATTERN\nuniform lowp float u_opacity;\nuniform mediump vec2 u_pattern_tl;\nuniform mediump vec2 u_pattern_br;\nuniform sampler2D u_texture;\nvarying mediump vec2 v_tileTextureCoord;\n#else\nuniform lowp vec4 u_color;\n#endif\n#ifdef ID\nvarying mediump vec4 v_id;\n#endif\nvoid main() {\n#ifdef PATTERN\n  mediump vec2 normalizedTextureCoord = mod(v_tileTextureCoord, 1.0);\n  mediump vec2 samplePos = mix(u_pattern_tl, u_pattern_br, normalizedTextureCoord);\n  lowp vec4 color = texture2D(u_texture, samplePos);\n  gl_FragColor = u_opacity * color;\n#else\n  gl_FragColor = u_color;\n#endif\n#ifdef ID\n  if (gl_FragColor.a < 1.0 / 255.0) {\n    discard;\n  }\n  gl_FragColor = v_id;\n#endif\n}","background.vert":"precision mediump float;\nattribute vec2 a_pos;\n#ifdef ID\nuniform mediump vec4 u_id;\nvarying mediump vec4 v_id;\n#endif\nuniform highp mat4 u_transformMatrix;\nuniform mediump vec2 u_normalized_origin;\nuniform mediump float u_coord_range;\nuniform mediump float u_depth;\n#ifdef PATTERN\nuniform mediump mat3 u_pattern_matrix;\nvarying mediump vec2 v_tileTextureCoord;\n#endif\nvoid main() {\n  gl_Position = vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(u_coord_range * a_pos, 0.0, 1.0);\n#ifdef PATTERN\n  v_tileTextureCoord = (u_pattern_matrix * vec3(a_pos, 1.0)).xy;\n#endif\n#ifdef ID\n  v_id = u_id / 255.0;\n#endif\n}"},circle:{"circle.frag":"precision lowp float;\nvarying lowp vec4 v_color;\nvarying lowp vec4 v_stroke_color;\nvarying mediump float v_blur;\nvarying mediump float v_stroke_width;\nvarying mediump float v_radius;\nvarying mediump vec2 v_offset;\n#ifdef ID\nvarying mediump vec4 v_id;\n#endif\nvoid main()\n{\n  mediump float dist = length(v_offset);\n  mediump float alpha = smoothstep(0.0, -v_blur, dist - 1.0);\n  lowp float color_mix_ratio = v_stroke_width < 0.01 ? 0.0 : smoothstep(-v_blur, 0.0, dist - v_radius / (v_radius + v_stroke_width));\n  gl_FragColor = alpha * mix(v_color, v_stroke_color, color_mix_ratio);\n#ifdef ID\n  if (gl_FragColor.a < 1.0 / 255.0) {\n    discard;\n  }\n  gl_FragColor = v_id;\n#endif\n}","circle.vert":"precision mediump float;\nattribute vec2 a_pos;\nattribute vec4 a_color;\nattribute vec4 a_stroke_color;\nattribute vec4 a_data;\nconst float sizePrecision = 0.25;\nconst float blurPrecision = 0.03125;\nvarying lowp vec4 v_color;\nvarying lowp vec4 v_stroke_color;\nvarying mediump float v_blur;\nvarying mediump float v_stroke_width;\nvarying mediump float v_radius;\nvarying mediump vec2 v_offset;\n#ifdef ID\nuniform mediump vec4 u_id;\nvarying mediump vec4 v_id;\n#endif\nuniform highp mat4 u_transformMatrix;\nuniform highp mat4 u_extrudeMatrix;\nuniform highp vec2 u_normalized_origin;\nuniform mediump float u_depth;\nuniform mediump float u_radius;\nuniform lowp vec4 u_color;\nuniform mediump float u_blur;\nuniform mediump float u_stroke_width;\nuniform lowp vec4 u_stroke_color;\nuniform mediump float u_antialiasingWidth;\nvoid main()\n{\n  v_color = a_color * u_color;\n  v_stroke_color = a_stroke_color * u_stroke_color;\n  v_stroke_width = a_data[1] * sizePrecision * u_stroke_width;\n  v_radius = a_data[2] * u_radius;\n  v_blur = max(a_data[0] * blurPrecision + u_blur, u_antialiasingWidth / (v_radius + v_stroke_width));\n  mediump vec2 offset = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n  v_offset = offset;\n#ifdef ID\n  v_id = u_id / 255.0;\n#endif\n  gl_Position = vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos * 0.5, 0.0, 1.0) + u_extrudeMatrix * (v_radius + v_stroke_width) * vec4(offset, 0.0, 0.0);\n}"},fill:{"fill.frag":"precision lowp float;\n#ifdef PATTERN\nuniform mediump vec2 u_pattern_tl;\nuniform mediump vec2 u_pattern_br;\nuniform lowp sampler2D u_texture;\nvarying mediump vec2 v_tileTextureCoord;\n#endif\n#ifdef ID\nvarying mediump vec4 v_id;\n#endif\nvarying lowp vec4 v_color;\nvec4 mixColors(vec4 color1, vec4 color2) {\n  float compositeAlpha = color2.a + color1.a * (1.0 - color2.a);\n  vec3 compositeColor = color2.rgb + color1.rgb * (1.0 - color2.a);\n  return vec4(compositeColor, compositeAlpha);\n}\nvoid main()\n{\n#ifdef PATTERN\n  mediump vec2 normalizedTextureCoord = fract(v_tileTextureCoord);\n  mediump vec2 samplePos = mix(u_pattern_tl, u_pattern_br, normalizedTextureCoord);\n  lowp vec4 color = texture2D(u_texture, samplePos);\n  gl_FragColor = v_color[3] * color;\n#else\n  gl_FragColor = v_color;\n#endif\n#ifdef ID\n  if (gl_FragColor.a < 1.0 / 255.0) {\n    discard;\n  }\n  gl_FragColor = v_id;\n#endif\n}","fill.vert":"precision mediump float;\nattribute vec2 a_pos;\nuniform highp mat4 u_transformMatrix;\nuniform highp vec2 u_normalized_origin;\nuniform mediump float u_depth;\n#ifdef PATTERN\nuniform mediump mat3 u_pattern_matrix;\nvarying mediump vec2 v_tileTextureCoord;\n#endif\n#ifdef ID\nuniform mediump vec4 u_id;\nvarying mediump vec4 v_id;\n#endif\n#ifdef DD\nattribute vec4 a_color;\n#endif\nuniform lowp vec4 u_color;\nvarying lowp vec4 v_color;\nvoid main()\n{\n#ifdef DD\n  v_color = a_color * u_color;\n#else\n  v_color = u_color;\n#endif\n#ifdef ID\n  v_id = u_id / 255.0;\n#endif\n#ifdef PATTERN\n  v_tileTextureCoord = (u_pattern_matrix * vec3(a_pos, 1.0)).xy;\n#endif\n  gl_Position = vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0, 1.0);\n}"},icon:{"icon.frag":"precision mediump float;\nuniform lowp sampler2D u_texture;\n#ifdef SDF\nuniform lowp vec4 u_color;\nuniform lowp vec4 u_outlineColor;\nuniform mediump float u_outlineSize;\n#endif\nvarying mediump vec2 v_tex;\nvarying lowp float v_transparency;\nvarying mediump vec2 v_size;\nvarying lowp vec4 v_color;\n#ifdef ID\nvarying mediump vec4 v_id;\n#endif\n#include <util/encoding.glsl>\nvec4 mixColors(vec4 color1, vec4 color2) {\n  float compositeAlpha = color2.a + color1.a * (1.0 - color2.a);\n  vec3 compositeColor = color2.rgb + color1.rgb * (1.0 - color2.a);\n  return vec4(compositeColor, compositeAlpha);\n}\nvoid main()\n{\n#ifdef SDF\n  lowp vec4 fillPixelColor = v_color;\n  float d = rgba2float(texture2D(u_texture, v_tex)) - 0.5;\n  const float sofetEdgeRatio = 0.248062016;\n  float size = max(v_size.x, v_size.y);\n  float dist = d * sofetEdgeRatio * size;\n  fillPixelColor *= clamp(0.5 - dist, 0.0, 1.0);\n  if (u_outlineSize > 0.25) {\n    lowp vec4 outlinePixelColor = u_outlineColor;\n    const float outlineLimitRatio = (16.0 / 86.0);\n    float clampedOutlineSize = sofetEdgeRatio * min(u_outlineSize, outlineLimitRatio * max(v_size.x, v_size.y));\n    outlinePixelColor *= clamp(0.5 - (abs(dist) - clampedOutlineSize), 0.0, 1.0);\n    gl_FragColor = v_transparency * mixColors(fillPixelColor, outlinePixelColor);\n  }\n  else {\n    gl_FragColor = v_transparency * fillPixelColor;\n  }\n#else\n  lowp vec4 texColor = texture2D(u_texture, v_tex);\n  gl_FragColor = v_transparency * texColor;\n#endif\n#ifdef ID\n  if (gl_FragColor.a < 1.0 / 255.0) {\n    discard;\n  }\n  gl_FragColor = v_id;\n#endif\n}","icon.vert":"attribute vec2 a_pos;\nattribute vec2 a_vertexOffset;\nattribute vec4 a_tex;\nattribute vec4 a_levelInfo;\n#ifdef DD\nattribute vec4 a_color;\nattribute mediump float a_size;\n#endif\nuniform lowp vec4 u_color;\nuniform mediump float u_size;\n#ifdef ID\nuniform mediump vec4 u_id;\nvarying mediump vec4 v_id;\n#endif\nvarying lowp vec4 v_color;\nuniform highp mat4 u_transformMatrix;\nuniform highp mat4 u_extrudeMatrix;\nuniform highp vec2 u_normalized_origin;\nuniform vec2 u_mosaicSize;\nuniform mediump float u_depth;\nuniform mediump float u_mapRotation;\nuniform mediump float u_level;\nuniform lowp float u_keepUpright;\nuniform mediump float u_fadeSpeed;\nuniform mediump float u_minfadeLevel;\nuniform mediump float u_maxfadeLevel;\nuniform mediump float u_fadeChange;\nuniform mediump float u_opacity;\nvarying mediump vec2 v_tex;\nvarying lowp float v_transparency;\nvarying mediump vec2 v_size;\nconst float C_OFFSET_PRECISION = 1.0 / 8.0;\nconst float C_256_TO_RAD = 3.14159265359 / 128.0;\nconst float C_DEG_TO_RAD = 3.14159265359 / 180.0;\nconst float tileCoordRatio = 1.0 / 8.0;\nvoid main()\n{\n  mediump float a_labelMinLevel = a_levelInfo[0];\n  mediump float a_angle         = a_levelInfo[1];\n  mediump float a_minLevel      = a_levelInfo[2];\n  mediump float a_maxLevel      = a_levelInfo[3];\n  mediump float delta_z = 0.0;\n  mediump float rotated = mod(a_angle + u_mapRotation, 256.0);\n  delta_z += (1.0 - step(u_keepUpright, 0.0)) * step(64.0, rotated) * (1.0 - step(192.0, rotated));\n  delta_z += 1.0 - step(a_minLevel, u_level);\n  delta_z += step(a_maxLevel, u_level);\n  mediump float alpha = u_fadeSpeed != 0.0 ? clamp((u_fadeChange - a_labelMinLevel) / u_fadeSpeed, 0.0, 1.0) : 1.0;\n  v_transparency = (u_fadeSpeed >= 0.0 ? alpha : 1.0 - alpha);\n  if (u_maxfadeLevel < a_labelMinLevel)\n  {\n    v_transparency = 0.0;\n  }\n  if (u_minfadeLevel >= a_labelMinLevel)\n  {\n    v_transparency = 1.0;\n  }\n  delta_z += step(v_transparency, 0.0);\n  vec2 offset = C_OFFSET_PRECISION * a_vertexOffset;\n  v_size = abs(offset);\n#ifdef SDF\n  offset = (120.0 / 86.0) * offset;\n#endif\n#ifdef DD\n  mediump float icon_size = a_size * u_size;\n#else\n  mediump float icon_size = u_size;\n#endif\n  gl_Position = vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * icon_size * vec4(offset, delta_z, 0.0);\n#ifdef DD\n  v_color = a_color * u_color;\n#else\n  v_color = u_color;\n#endif\n#ifdef ID\n  v_id = u_id / 255.0;\n#endif\n  v_tex = a_tex.xy / u_mosaicSize;\n  v_transparency *= v_color.w;\n}"},line:{"line.frag":"varying mediump vec2 v_normal;\nvarying highp float v_accumulatedDistance;\nvarying mediump float v_lineHalfWidth;\nvarying lowp vec4 v_color;\nvarying mediump float v_blur;\n#ifdef PATTERN\nuniform mediump vec2 u_pattern_tl;\nuniform mediump vec2 u_pattern_br;\nuniform mediump vec2 u_spriteSize;\nuniform sampler2D u_texture;\nconst mediump float tileCoordRatio = 8.0;\n#else\nvarying mediump vec2 v_dasharray;\n#endif\n#ifdef ID\nvarying mediump vec4 v_id;\n#endif\nvoid main()\n{\n  mediump float fragDist = length(v_normal) * v_lineHalfWidth;\n  lowp float alpha = clamp((v_lineHalfWidth - fragDist) / v_blur, 0.0, 1.0);\n#ifdef PATTERN\n  mediump float relativeTexX = mod((v_accumulatedDistance + v_normal.x * v_lineHalfWidth * tileCoordRatio) / u_spriteSize.x, 1.0);\n  mediump float relativeTexY = 0.5 + (v_normal.y * v_lineHalfWidth / u_spriteSize.y);\n  mediump vec2 texCoord = mix(u_pattern_tl, u_pattern_br, vec2(relativeTexX, relativeTexY));\n  lowp vec4 color = texture2D(u_texture, texCoord);\n  gl_FragColor = alpha * v_color[3] * color;\n#else\n  lowp float dashPos =  mod(v_accumulatedDistance, v_dasharray.x + v_dasharray.y);\n  lowp float dashAlpha = clamp(min(dashPos, v_dasharray.x - dashPos) + 0.5, 0.0, 1.0);\n  dashAlpha = max(sign(-v_dasharray.y), dashAlpha);\n  alpha *= dashAlpha;\n  gl_FragColor = alpha * v_color;\n#endif\n#ifdef ID\n  if (gl_FragColor.a < 1.0 / 255.0) {\n    discard;\n  }\n  gl_FragColor = v_id;\n#endif\n}","line.vert":"attribute vec2 a_pos;\nattribute vec4 a_offsetAndNormal;\nattribute vec2 a_accumulatedDistance;\nuniform highp mat4 u_transformMatrix;\nuniform highp mat4 u_extrudeMatrix;\nuniform highp vec2 u_normalized_origin;\nuniform mediump float u_blur;\nuniform mediump float u_antialiasing;\nuniform mediump float u_depth;\nvarying mediump vec2 v_normal;\nvarying highp float v_accumulatedDistance;\nconst float scale = 1.0 / 31.0;\n#ifdef DD\nattribute vec4 a_color;\nattribute mediump float a_width;\n#endif\nuniform lowp vec4 u_color;\nuniform mediump float u_width;\n#ifdef ID\nuniform mediump vec4 u_id;\nvarying mediump vec4 v_id;\n#endif\nvarying lowp vec4 v_color;\nvarying mediump float v_lineHalfWidth;\nvarying mediump float v_blur;\n#ifndef PATTERN\nuniform mediump vec2 u_dasharray;\nvarying mediump vec2 v_dasharray;\n#endif\nvoid main()\n{\n  v_normal = a_offsetAndNormal.zw * scale;\n#ifdef DD\n  v_lineHalfWidth = a_width * u_width;\n#else\n  v_lineHalfWidth = u_width;\n#endif\n  v_lineHalfWidth += u_antialiasing;\n  v_lineHalfWidth *= 0.5;\n#ifndef PATTERN\n#ifdef DD\n  v_dasharray = u_dasharray * a_width;\n#else\n  v_dasharray = u_dasharray * u_width;\n#endif\n#endif\n  mediump vec2 dist = v_lineHalfWidth * a_offsetAndNormal.xy * scale;\n  gl_Position = vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * vec4(dist, 0.0, 0.0);\n  v_accumulatedDistance = a_accumulatedDistance.x;\n  v_blur = u_blur + u_antialiasing;\n  #ifdef DD\n    v_color = a_color * u_color;\n  #else\n    v_color = u_color;\n  #endif\n  #ifdef ID\n    v_id = u_id / 255.0;\n  #endif\n}"},outline:{"outline.frag":"varying lowp vec4 v_color;\nvarying mediump vec2 v_normal;\n#ifdef ID\nvarying mediump vec4 v_id;\n#endif\nvoid main()\n{\n  lowp float dist = abs(v_normal.y);\n  lowp float alpha = smoothstep(1.0, 0.0, dist);\n  gl_FragColor = alpha * v_color;\n#ifdef ID\n  if (gl_FragColor.a < 1.0 / 255.0) {\n    discard;\n  }\n  gl_FragColor = v_id;\n#endif\n}","outline.vert":"attribute vec2 a_pos;\nattribute vec2 a_offset;\nattribute vec2 a_xnormal;\n#ifdef DD\nattribute vec4 a_color;\n#endif\nuniform lowp vec4 u_color;\nvarying lowp vec4 v_color;\n#ifdef ID\nuniform mediump vec4 u_id;\nvarying mediump vec4 v_id;\n#endif\nuniform highp mat4 u_transformMatrix;\nuniform highp mat4 u_extrudeMatrix;\nuniform highp vec2 u_normalized_origin;\nuniform mediump float u_depth;\nuniform mediump float u_outline_width;\nvarying lowp vec2 v_normal;\nconst float scale = 1.0 / 15.0;\nvoid main()\n{\n#ifdef DD\n  v_color = a_color * u_color;\n#else\n  v_color = u_color;\n#endif\n#ifdef ID\n  v_id = u_id / 255.0;\n#endif\n  v_normal = a_xnormal;\n  mediump vec4 dist = vec4(u_outline_width * a_offset * scale, 0.0, 0.0);\n  gl_Position = vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * dist;\n}"},text:{"text.frag":"uniform lowp sampler2D u_texture;\nuniform mediump float u_edgeDistance;\nvarying lowp vec2 v_tex;\nvarying lowp float v_transparency;\nvarying lowp vec4 v_color;\nvarying mediump float v_edgeWidth;\nvarying mediump float v_edgeDistance;\n#ifdef ID\nvarying mediump vec4 v_id;\n#endif\nvoid main()\n{\n  lowp float dist = texture2D(u_texture, v_tex).a;\n  mediump float alpha = smoothstep(v_edgeDistance - v_edgeWidth, v_edgeDistance + v_edgeWidth, dist) * v_transparency;\n  gl_FragColor = alpha * v_color;\n#ifdef ID\n  if (gl_FragColor.a < 1.0 / 255.0) {\n    discard;\n  }\n  gl_FragColor = v_id;\n#endif\n}","text.vert":"attribute vec2 a_pos;\nattribute vec2 a_vertexOffset;\nattribute vec4 a_tex;\nattribute vec4 a_levelInfo;\nuniform lowp vec4 u_color;\n#ifdef DD\nattribute vec4 a_color;\n#endif\nvarying lowp vec4 v_color;\nuniform mediump float u_size;\n#ifdef DD\nattribute mediump float a_size;\n#endif\nvarying mediump float v_size;\n#ifdef ID\nuniform mediump vec4 u_id;\nvarying mediump vec4 v_id;\n#endif\nuniform highp mat4 u_transformMatrix;\nuniform highp mat4 u_extrudeMatrix;\nuniform highp vec2 u_normalized_origin;\nuniform vec2 u_mosaicSize;\nuniform mediump float u_depth;\nuniform mediump float u_mapRotation;\nuniform mediump float u_level;\nuniform lowp float u_keepUpright;\nuniform mediump float u_fadeSpeed;\nuniform mediump float u_minfadeLevel;\nuniform mediump float u_maxfadeLevel;\nuniform mediump float u_fadeChange;\nuniform mediump float u_opacity;\nvarying lowp vec2 v_tex;\nvarying lowp float v_transparency;\nconst float offsetPrecision = 1.0 / 8.0;\nconst mediump float edgePos = 0.75;\nuniform mediump float u_edgeDistance;\nuniform mediump float u_edgeBlur;\nuniform mediump float u_antialiasingWidth;\nvarying mediump float v_edgeDistance;\nvarying mediump float v_edgeWidth;\nuniform lowp float u_halo;\nvoid main()\n{\n  mediump float a_labelMinLevel = a_levelInfo[0];\n  mediump float a_angle        = a_levelInfo[1];\n  mediump float a_minLevel    = a_levelInfo[2];\n  mediump float a_maxLevel    = a_levelInfo[3];\n  mediump float delta_z = 0.0;\n  mediump float rotated = mod(a_angle + u_mapRotation, 256.0);\n  delta_z += (1.0 - step(u_keepUpright, 0.0)) * step(64.0, rotated) * (1.0 - step(192.0, rotated));\n  delta_z += 1.0 - step(a_minLevel, u_level);\n  delta_z += step(a_maxLevel, u_level);\n  mediump float alpha = u_fadeSpeed != 0.0 ? clamp((u_fadeChange - a_labelMinLevel) / u_fadeSpeed, 0.0, 1.0) : 1.0;\n  v_transparency = (u_fadeSpeed >= 0.0 ? alpha : 1.0 - alpha);\n  if (u_maxfadeLevel < a_labelMinLevel)\n  {\n    v_transparency = 0.0;\n  }\n  if (u_minfadeLevel >= a_labelMinLevel)\n  {\n    v_transparency = 1.0;\n  }\n  delta_z += step(v_transparency, 0.0);\n  v_tex = a_tex.xy / u_mosaicSize;\n#ifdef DD\n  if (u_halo > 0.5)\n  {\n    v_color = u_color;\n  }\n  else\n  {\n    v_color = a_color * u_color;\n  }\n#else\n  v_color = u_color;\n#endif\n#ifdef DD\n  v_size = a_size * u_size;\n#else\n  v_size = u_size;\n#endif\n#ifdef ID\n  v_id = u_id / 255.0;\n#endif\n  v_edgeDistance = edgePos - u_edgeDistance / v_size;\n  v_edgeWidth = (u_antialiasingWidth + u_edgeBlur) / v_size;\n  gl_Position = vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * v_size * vec4(offsetPrecision * a_vertexOffset, delta_z, 0.0);\n}"},tileInfo:{"tileInfo.frag":"uniform mediump sampler2D u_texture;\nvarying mediump vec2 v_tex;\nvoid main(void) {\n  lowp vec4 color = texture2D(u_texture, v_tex);\n  gl_FragColor = 0.75 * color;\n}","tileInfo.vert":"attribute vec2 a_pos;\nuniform highp mat4 u_transformMatrix;\nuniform mediump vec2 u_normalized_origin;\nuniform mediump float u_depth;\nuniform mediump float u_coord_ratio;\nuniform mediump vec2 u_delta;\nuniform mediump vec2 u_dimensions;\nvarying mediump vec2 v_tex;\nvoid main() {\n  mediump vec2 offests = u_coord_ratio * vec2(u_delta + a_pos * u_dimensions);\n  gl_Position = vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(offests, 0.0, 1.0);\n  v_tex = a_pos;\n}"},util:{"encoding.glsl":"const vec4 rgba2float_factors = vec4(\n    255.0 / (256.0),\n    255.0 / (256.0 * 256.0),\n    255.0 / (256.0 * 256.0 * 256.0),\n    255.0 / (256.0 * 256.0 * 256.0 * 256.0)\n  );\nfloat rgba2float(vec4 rgba) {\n  return dot(rgba, rgba2float_factors);\n}"}}}.apply(null,i))||(e.exports=n)},2083:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(18),r(0),r(174),r(291),r(89)],void 0===(n=function(e,t,r,i,n,o,a){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._fullCacheLodInfos=null,t._levelByScale={},t}return r(t,e),t.prototype.getTileParentId=function(e){var t=a.pool.acquire(e),r=0===t.level?null:a.getId(t.level-1,t.row>>1,t.col>>1,t.world);return a.pool.release(t),r},t.prototype.getTileCoverage=function(t,r,i){var n=e.prototype.getTileCoverage.call(this,t,r,i);if(!n)return n;var o=1<<n.lodInfo.level;return n.spans=n.spans.filter((function(e){return e.row>=0&&e.row<o})),n},t.prototype.scaleToLevel=function(e){if(this._fullCacheLodInfos||this._initializeFullCacheLODs(this._lodInfos),this._levelByScale[e])return this._levelByScale[e];var t=this._fullCacheLodInfos;if(e>t[0].scale)return t[0].level;for(var r=void 0,i=void 0,n=0;n<t.length-1;n++)if(e>(i=t[n+1]).scale)return(r=t[n]).level+(r.scale-e)/(r.scale-i.scale);return t[t.length-1].level},t.prototype._initializeFullCacheLODs=function(e){var t;if(0===e[0].level)t=e.map((function(e){return{level:e.level,resolution:e.resolution,scale:e.scale}}));else{var r=this.tileInfo.size[0],i=this.tileInfo.spatialReference;t=n.create({size:r,spatialReference:i}).lods.map((function(e){return{level:e.level,resolution:e.resolution,scale:e.scale}}))}for(var o=0;o<t.length;o++)this._levelByScale[t[o].scale]=t[o].level;this._fullCacheLodInfos=t},t}(o)}.apply(null,i))||(e.exports=n)},876:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){void 0===e&&(e=[]),void 0===t&&(t=[]),this.lengths=e,this.coords=t};t.default=r}.apply(null,i))||(e.exports=n)},877:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(0),r(1),r(3),r(2)],void 0===(n=function(e,t,r,i,n,o){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),r([o.subclass("esri.views.layers.support.ClipArea")],t)}(o.declared(n.JSONSupport))}.apply(null,i))||(e.exports=n)},878:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(888)],void 0===(n=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.mat4=r}.apply(null,i))||(e.exports=n)},883:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,r,i){void 0===e&&(e=null),void 0===t&&(t={}),this.geometry=e,t&&(this.attributes=t),r&&(this.centroid=r),null!=i&&(this.objectId=i)};t.default=r}.apply(null,i))||(e.exports=n)},884:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(55)],void 0===(n=function(e,t,r){function i(e){return e&&"upperLeft"===e.originPosition}function n(e,t){var r=e.scale,i=e.translate;return Math.round((t-i[0])/r[0])}function o(e,t){var r=e.scale,i=e.translate;return Math.round((i[1]-t)/r[1])}function a(e,t,r){for(var i,a,s,l,u=[],c=0;c<r.length;c++){var d=r[c];c>0?(s=n(e,d[0]),l=o(e,d[1]),s===i&&l===a||(u.push(t(d,s-i,l-a)),i=s,a=l)):(i=n(e,d[0]),a=o(e,d[1]),u.push(t(d,i,a)))}return u.length>0?u:null}function s(e,t,r,i){return a(e,r?i?V:T:i?T:M,t)}function l(e,t,r,i){for(var n=[],o=r?i?V:T:i?T:M,s=0;s<t.length;s++){var l=a(e,o,t[s]);l&&l.length>=3&&n.push(l)}return n.length?n:null}function u(e,t,r,i){for(var n=[],o=r?i?V:T:i?T:M,s=0;s<t.length;s++){var l=a(e,o,t[s]);l&&l.length>=2&&n.push(l)}return n.length?n:null}function c(e,t){var r=e.scale,i=e.translate;return t*r[0]+i[0]}function d(e,t){var r=e.scale;return e.translate[1]-t*r[1]}function f(e,t,r){var i=new Array(r.length);if(!r.length)return i;var n=e.scale,o=n[0],a=n[1],s=c(e,r[0][0]),l=d(e,r[0][1]);i[0]=t(r[0],s,l);for(var u=1;u<r.length;u++){var f=r[u];s+=f[0]*o,l-=f[1]*a,i[u]=t(f,s,l)}return i}function h(e,t,r){for(var i=new Array(r.length),n=0;n<r.length;n++)i[n]=f(e,t,r[n]);return i}function p(e,t,r,i){return f(e,r?i?V:T:i?T:M,t)}function _(e,t,r,i){return h(e,r?i?V:T:i?T:M,t)}function v(e,t,r,i){return h(e,r?i?V:T:i?T:M,t)}function m(e,t,r){for(var i=r[0],n=i[0],o=i[1],a=Math.min(n,t[0]),s=Math.min(o,t[1]),l=Math.max(n,t[2]),u=Math.max(o,t[3]),c=1;c<r.length;c++){var d=r[c],f=d[0],h=d[1];n+=f,o+=h,f<0&&(a=Math.min(a,n)),f>0&&(l=Math.max(l,n)),h<0?s=Math.min(s,o):h>0&&(u=Math.max(u,o))}return e[0]=a,e[1]=s,e[2]=l,e[3]=u,e}function g(e,t){if(!t.length)return null;e[0]=e[1]=Number.POSITIVE_INFINITY,e[2]=e[3]=Number.NEGATIVE_INFINITY;for(var r=0;r<t.length;r++)m(e,e,t[r]);return e}function y(e,t,r,i,a){return t.xmin=n(e,r.xmin),t.ymin=o(e,r.ymin),t.xmax=n(e,r.xmax),t.ymax=o(e,r.ymax),t!==r&&(i&&(t.zmin=r.zmin,t.zmax=r.zmax),a&&(t.mmin=r.mmin,t.mmax=r.mmax)),t}function x(e,t,r,i,n){return t.points=s(e,r.points,i,n),t}function b(e,t,r,i,a){return t.x=n(e,r.x),t.y=o(e,r.y),t!==r&&(i&&(t.z=r.z),a&&(t.m=r.m)),t}function w(e,t,r,i,n){var o=l(e,r.rings,i,n);return o?(t.rings=o,t):null}function D(e,t,r,i,n){var o=u(e,r.paths,i,n);return o?(t.paths=o,t):null}Object.defineProperty(t,"__esModule",{value:!0});var M=function(e,t,r){return[t,r]},T=function(e,t,r){return[t,r,e[2]]},V=function(e,t,r){return[t,r,e[2],e[3]]};t.toQuantizationTransform=function(e){return e?{originPosition:"upperLeft",scale:[e.tolerance,e.tolerance],translate:[e.extent.xmin,e.extent.ymax]}:null},t.equals=function(e,t){return e===t||null==e&&null==t||null!=e&&null!=t&&(i(e)?(r=e.translate[0],n=e.translate[1],o=e.scale[0]):(r=e.extent.xmin,n=e.extent.ymax,o=e.tolerance),i(t)?(a=t.translate[0],s=t.translate[1],l=t.scale[0]):(a=t.extent.xmin,s=t.extent.ymax,l=t.tolerance),r===a&&n===s&&o===l);var r,n,o,a,s,l},t.quantizeX=n,t.quantizeY=o,t.quantizeBounds=function(e,t,r){return t[0]=n(e,r[0]),t[3]=o(e,r[1]),t[2]=n(e,r[2]),t[1]=o(e,r[3]),t},t.quantizePoints=s,t.quantizeRings=l,t.quantizePaths=u,t.hydrateX=c,t.hydrateY=d,t.hydrateCoordsArray=f,t.hydrateCoordsArrayArray=h,t.hydrateBounds=function(e,t,r){return r?(t[0]=c(e,r[0]),t[1]=d(e,r[3]),t[2]=c(e,r[2]),t[3]=d(e,r[1]),t):[c(e,t[0]),d(e,t[3]),c(e,t[2]),d(e,t[1])]},t.hydratePoints=p,t.hydratePaths=_,t.hydrateRings=v,t.getQuantizedBoundsCoordsArray=m,t.getQuantizedBoundsCoordsArrayArray=g,t.getQuantizedBoundsPoints=function(e){var t=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return m(t,t,e)},t.getQuantizedBoundsPaths=function(e){return g([0,0,0,0],e)},t.getQuantizedBoundsRings=function(e){return g([0,0,0,0],e)},t.quantizeExtent=y,t.quantizeMultipoint=x,t.quantizePoint=b,t.quantizePolygon=w,t.quantizePolyline=D,t.quantizeGeometry=function(e,t){return e&&t?r.isPoint(t)?b(e,{},t,!1,!1):r.isPolyline(t)?D(e,{},t,!1,!1):r.isPolygon(t)?w(e,{},t,!1,!1):r.isMultipoint(t)?x(e,{},t,!1,!1):r.isExtent(t)?y(e,{},t,!1,!1):null:null},t.hydrateExtent=function(e,t,r,i,n){return t.xmin=c(e,r.xmin),t.ymin=d(e,r.ymin),t.xmax=c(e,r.xmax),t.ymax=d(e,r.ymax),t!==r&&(i&&(t.zmin=r.zmin,t.zmax=r.zmax),n&&(t.mmin=r.mmin,t.mmax=r.mmax)),t},t.hydrateMultipoint=function(e,t,r,i,n){return t.points=p(e,r.points,i,n),t},t.hydratePoint=function(e,t,r,i,n){return t.x=c(e,r.x),t.y=d(e,r.y),t!==r&&(i&&(t.z=r.z),n&&(t.m=r.m)),t},t.hydratePolygon=function(e,t,r,i,n){return t.rings=v(e,r.rings,i,n),t},t.hydratePolyline=function(e,t,r,i,n){return t.paths=_(e,r.paths,i,n),t}}.apply(null,i))||(e.exports=n)},888:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(180),r(76)],void 0===(n=function(e,t,r,i){function n(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function o(e,t,r){var i=t[0],n=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],d=t[8],f=t[9],h=t[10],p=t[11],_=t[12],v=t[13],m=t[14],g=t[15],y=r[0],x=r[1],b=r[2],w=r[3];return e[0]=y*i+x*s+b*d+w*_,e[1]=y*n+x*l+b*f+w*v,e[2]=y*o+x*u+b*h+w*m,e[3]=y*a+x*c+b*p+w*g,y=r[4],x=r[5],b=r[6],w=r[7],e[4]=y*i+x*s+b*d+w*_,e[5]=y*n+x*l+b*f+w*v,e[6]=y*o+x*u+b*h+w*m,e[7]=y*a+x*c+b*p+w*g,y=r[8],x=r[9],b=r[10],w=r[11],e[8]=y*i+x*s+b*d+w*_,e[9]=y*n+x*l+b*f+w*v,e[10]=y*o+x*u+b*h+w*m,e[11]=y*a+x*c+b*p+w*g,y=r[12],x=r[13],b=r[14],w=r[15],e[12]=y*i+x*s+b*d+w*_,e[13]=y*n+x*l+b*f+w*v,e[14]=y*o+x*u+b*h+w*m,e[15]=y*a+x*c+b*p+w*g,e}function a(e,t,r){var i=t[0],n=t[1],o=t[2],a=t[3],s=i+i,l=n+n,u=o+o,c=i*s,d=i*l,f=i*u,h=n*l,p=n*u,_=o*u,v=a*s,m=a*l,g=a*u;return e[0]=1-(h+_),e[1]=d+g,e[2]=f-m,e[3]=0,e[4]=d-g,e[5]=1-(c+_),e[6]=p+v,e[7]=0,e[8]=f+m,e[9]=p-v,e[10]=1-(c+h),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function s(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e}Object.defineProperty(t,"__esModule",{value:!0}),t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.set=function(e,t,r,i,n,o,a,s,l,u,c,d,f,h,p,_,v){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e[4]=o,e[5]=a,e[6]=s,e[7]=l,e[8]=u,e[9]=c,e[10]=d,e[11]=f,e[12]=h,e[13]=p,e[14]=_,e[15]=v,e},t.identity=n,t.transpose=function(e,t){if(e===t){var r=t[1],i=t[2],n=t[3],o=t[6],a=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=i,e[9]=o,e[11]=t[14],e[12]=n,e[13]=a,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e},t.invert=function(e,t){var r=t[0],i=t[1],n=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],d=t[9],f=t[10],h=t[11],p=t[12],_=t[13],v=t[14],m=t[15],g=r*s-i*a,y=r*l-n*a,x=r*u-o*a,b=i*l-n*s,w=i*u-o*s,D=n*u-o*l,M=c*_-d*p,T=c*v-f*p,V=c*m-h*p,P=d*v-f*_,O=d*m-h*_,I=f*m-h*v,C=g*I-y*O+x*P+b*V-w*T+D*M;return C?(C=1/C,e[0]=(s*I-l*O+u*P)*C,e[1]=(n*O-i*I-o*P)*C,e[2]=(_*D-v*w+m*b)*C,e[3]=(f*w-d*D-h*b)*C,e[4]=(l*V-a*I-u*T)*C,e[5]=(r*I-n*V+o*T)*C,e[6]=(v*x-p*D-m*y)*C,e[7]=(c*D-f*x+h*y)*C,e[8]=(a*O-s*V+u*M)*C,e[9]=(i*V-r*O-o*M)*C,e[10]=(p*w-_*x+m*g)*C,e[11]=(d*x-c*w-h*g)*C,e[12]=(s*T-a*P-l*M)*C,e[13]=(r*P-i*T+n*M)*C,e[14]=(_*y-p*b-v*g)*C,e[15]=(c*b-d*y+f*g)*C,e):null},t.adjoint=function(e,t){var r=t[0],i=t[1],n=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],d=t[9],f=t[10],h=t[11],p=t[12],_=t[13],v=t[14],m=t[15];return e[0]=s*(f*m-h*v)-d*(l*m-u*v)+_*(l*h-u*f),e[1]=-(i*(f*m-h*v)-d*(n*m-o*v)+_*(n*h-o*f)),e[2]=i*(l*m-u*v)-s*(n*m-o*v)+_*(n*u-o*l),e[3]=-(i*(l*h-u*f)-s*(n*h-o*f)+d*(n*u-o*l)),e[4]=-(a*(f*m-h*v)-c*(l*m-u*v)+p*(l*h-u*f)),e[5]=r*(f*m-h*v)-c*(n*m-o*v)+p*(n*h-o*f),e[6]=-(r*(l*m-u*v)-a*(n*m-o*v)+p*(n*u-o*l)),e[7]=r*(l*h-u*f)-a*(n*h-o*f)+c*(n*u-o*l),e[8]=a*(d*m-h*_)-c*(s*m-u*_)+p*(s*h-u*d),e[9]=-(r*(d*m-h*_)-c*(i*m-o*_)+p*(i*h-o*d)),e[10]=r*(s*m-u*_)-a*(i*m-o*_)+p*(i*u-o*s),e[11]=-(r*(s*h-u*d)-a*(i*h-o*d)+c*(i*u-o*s)),e[12]=-(a*(d*v-f*_)-c*(s*v-l*_)+p*(s*f-l*d)),e[13]=r*(d*v-f*_)-c*(i*v-n*_)+p*(i*f-n*d),e[14]=-(r*(s*v-l*_)-a*(i*v-n*_)+p*(i*l-n*s)),e[15]=r*(s*f-l*d)-a*(i*f-n*d)+c*(i*l-n*s),e},t.determinant=function(e){var t=e[0],r=e[1],i=e[2],n=e[3],o=e[4],a=e[5],s=e[6],l=e[7],u=e[8],c=e[9],d=e[10],f=e[11],h=e[12],p=e[13],_=e[14],v=e[15];return(t*a-r*o)*(d*v-f*_)-(t*s-i*o)*(c*v-f*p)+(t*l-n*o)*(c*_-d*p)+(r*s-i*a)*(u*v-f*h)-(r*l-n*a)*(u*_-d*h)+(i*l-n*s)*(u*p-c*h)},t.multiply=o,t.translate=function(e,t,r){var i=r[0],n=r[1],o=r[2],a=void 0,s=void 0,l=void 0,u=void 0,c=void 0,d=void 0,f=void 0,h=void 0,p=void 0,_=void 0,v=void 0,m=void 0;return t===e?(e[12]=t[0]*i+t[4]*n+t[8]*o+t[12],e[13]=t[1]*i+t[5]*n+t[9]*o+t[13],e[14]=t[2]*i+t[6]*n+t[10]*o+t[14],e[15]=t[3]*i+t[7]*n+t[11]*o+t[15]):(a=t[0],s=t[1],l=t[2],u=t[3],c=t[4],d=t[5],f=t[6],h=t[7],p=t[8],_=t[9],v=t[10],m=t[11],e[0]=a,e[1]=s,e[2]=l,e[3]=u,e[4]=c,e[5]=d,e[6]=f,e[7]=h,e[8]=p,e[9]=_,e[10]=v,e[11]=m,e[12]=a*i+c*n+p*o+t[12],e[13]=s*i+d*n+_*o+t[13],e[14]=l*i+f*n+v*o+t[14],e[15]=u*i+h*n+m*o+t[15]),e},t.scale=function(e,t,r){var i=r[0],n=r[1],o=r[2];return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.rotate=function(e,t,r,n){var o=n[0],a=n[1],s=n[2],l=Math.sqrt(o*o+a*a+s*s),u=void 0,c=void 0,d=void 0,f=void 0,h=void 0,p=void 0,_=void 0,v=void 0,m=void 0,g=void 0,y=void 0,x=void 0,b=void 0,w=void 0,D=void 0,M=void 0,T=void 0,V=void 0,P=void 0,O=void 0,I=void 0,C=void 0,z=void 0,S=void 0;return l<i.EPSILON?null:(o*=l=1/l,a*=l,s*=l,u=Math.sin(r),d=1-(c=Math.cos(r)),f=t[0],h=t[1],p=t[2],_=t[3],v=t[4],m=t[5],g=t[6],y=t[7],x=t[8],b=t[9],w=t[10],D=t[11],M=o*o*d+c,T=a*o*d+s*u,V=s*o*d-a*u,P=o*a*d-s*u,O=a*a*d+c,I=s*a*d+o*u,C=o*s*d+a*u,z=a*s*d-o*u,S=s*s*d+c,e[0]=f*M+v*T+x*V,e[1]=h*M+m*T+b*V,e[2]=p*M+g*T+w*V,e[3]=_*M+y*T+D*V,e[4]=f*P+v*O+x*I,e[5]=h*P+m*O+b*I,e[6]=p*P+g*O+w*I,e[7]=_*P+y*O+D*I,e[8]=f*C+v*z+x*S,e[9]=h*C+m*z+b*S,e[10]=p*C+g*z+w*S,e[11]=_*C+y*z+D*S,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)},t.rotateX=function(e,t,r){var i=Math.sin(r),n=Math.cos(r),o=t[4],a=t[5],s=t[6],l=t[7],u=t[8],c=t[9],d=t[10],f=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*n+u*i,e[5]=a*n+c*i,e[6]=s*n+d*i,e[7]=l*n+f*i,e[8]=u*n-o*i,e[9]=c*n-a*i,e[10]=d*n-s*i,e[11]=f*n-l*i,e},t.rotateY=function(e,t,r){var i=Math.sin(r),n=Math.cos(r),o=t[0],a=t[1],s=t[2],l=t[3],u=t[8],c=t[9],d=t[10],f=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*n-u*i,e[1]=a*n-c*i,e[2]=s*n-d*i,e[3]=l*n-f*i,e[8]=o*i+u*n,e[9]=a*i+c*n,e[10]=s*i+d*n,e[11]=l*i+f*n,e},t.rotateZ=function(e,t,r){var i=Math.sin(r),n=Math.cos(r),o=t[0],a=t[1],s=t[2],l=t[3],u=t[4],c=t[5],d=t[6],f=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*n+u*i,e[1]=a*n+c*i,e[2]=s*n+d*i,e[3]=l*n+f*i,e[4]=u*n-o*i,e[5]=c*n-a*i,e[6]=d*n-s*i,e[7]=f*n-l*i,e},t.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},t.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromRotation=function(e,t,r){var n=r[0],o=r[1],a=r[2],s=Math.sqrt(n*n+o*o+a*a),l=void 0,u=void 0,c=void 0;return s<i.EPSILON?null:(n*=s=1/s,o*=s,a*=s,l=Math.sin(t),c=1-(u=Math.cos(t)),e[0]=n*n*c+u,e[1]=o*n*c+a*l,e[2]=a*n*c-o*l,e[3]=0,e[4]=n*o*c-a*l,e[5]=o*o*c+u,e[6]=a*o*c+n*l,e[7]=0,e[8]=n*a*c+o*l,e[9]=o*a*c-n*l,e[10]=a*a*c+u,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)},t.fromXRotation=function(e,t){var r=Math.sin(t),i=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromYRotation=function(e,t){var r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromZRotation=function(e,t){var r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromRotationTranslation=a,t.fromQuat2=function(e,t){var r=l,i=-t[0],n=-t[1],o=-t[2],s=t[3],u=t[4],c=t[5],d=t[6],f=t[7],h=i*i+n*n+o*o+s*s;return h>0?(r[0]=2*(u*s+f*i+c*o-d*n)/h,r[1]=2*(c*s+f*n+d*i-u*o)/h,r[2]=2*(d*s+f*o+u*n-c*i)/h):(r[0]=2*(u*s+f*i+c*o-d*n),r[1]=2*(c*s+f*n+d*i-u*o),r[2]=2*(d*s+f*o+u*n-c*i)),a(e,t,r),e};var l=r.create();t.getTranslation=function(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e},t.getScaling=function(e,t){var r=t[0],i=t[1],n=t[2],o=t[4],a=t[5],s=t[6],l=t[8],u=t[9],c=t[10];return e[0]=Math.sqrt(r*r+i*i+n*n),e[1]=Math.sqrt(o*o+a*a+s*s),e[2]=Math.sqrt(l*l+u*u+c*c),e},t.getRotation=function(e,t){var r=t[0]+t[5]+t[10],i=0;return r>0?(i=2*Math.sqrt(r+1),e[3]=.25*i,e[0]=(t[6]-t[9])/i,e[1]=(t[8]-t[2])/i,e[2]=(t[1]-t[4])/i):t[0]>t[5]&&t[0]>t[10]?(i=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/i,e[0]=.25*i,e[1]=(t[1]+t[4])/i,e[2]=(t[8]+t[2])/i):t[5]>t[10]?(i=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/i,e[0]=(t[1]+t[4])/i,e[1]=.25*i,e[2]=(t[6]+t[9])/i):(i=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/i,e[0]=(t[8]+t[2])/i,e[1]=(t[6]+t[9])/i,e[2]=.25*i),e},t.fromRotationTranslationScale=function(e,t,r,i){var n=t[0],o=t[1],a=t[2],s=t[3],l=n+n,u=o+o,c=a+a,d=n*l,f=n*u,h=n*c,p=o*u,_=o*c,v=a*c,m=s*l,g=s*u,y=s*c,x=i[0],b=i[1],w=i[2];return e[0]=(1-(p+v))*x,e[1]=(f+y)*x,e[2]=(h-g)*x,e[3]=0,e[4]=(f-y)*b,e[5]=(1-(d+v))*b,e[6]=(_+m)*b,e[7]=0,e[8]=(h+g)*w,e[9]=(_-m)*w,e[10]=(1-(d+p))*w,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e},t.fromRotationTranslationScaleOrigin=function(e,t,r,i,n){var o=t[0],a=t[1],s=t[2],l=t[3],u=o+o,c=a+a,d=s+s,f=o*u,h=o*c,p=o*d,_=a*c,v=a*d,m=s*d,g=l*u,y=l*c,x=l*d,b=i[0],w=i[1],D=i[2],M=n[0],T=n[1],V=n[2],P=(1-(_+m))*b,O=(h+x)*b,I=(p-y)*b,C=(h-x)*w,z=(1-(f+m))*w,S=(v+g)*w,R=(p+y)*D,A=(v-g)*D,k=(1-(f+_))*D;return e[0]=P,e[1]=O,e[2]=I,e[3]=0,e[4]=C,e[5]=z,e[6]=S,e[7]=0,e[8]=R,e[9]=A,e[10]=k,e[11]=0,e[12]=r[0]+M-(P*M+C*T+R*V),e[13]=r[1]+T-(O*M+z*T+A*V),e[14]=r[2]+V-(I*M+S*T+k*V),e[15]=1,e},t.fromQuat=function(e,t){var r=t[0],i=t[1],n=t[2],o=t[3],a=r+r,s=i+i,l=n+n,u=r*a,c=i*a,d=i*s,f=n*a,h=n*s,p=n*l,_=o*a,v=o*s,m=o*l;return e[0]=1-d-p,e[1]=c+m,e[2]=f-v,e[3]=0,e[4]=c-m,e[5]=1-u-p,e[6]=h+_,e[7]=0,e[8]=f+v,e[9]=h-_,e[10]=1-u-d,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.frustum=function(e,t,r,i,n,o,a){var s=1/(r-t),l=1/(n-i),u=1/(o-a);return e[0]=2*o*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*l,e[6]=0,e[7]=0,e[8]=(r+t)*s,e[9]=(n+i)*l,e[10]=(a+o)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*o*2*u,e[15]=0,e},t.perspective=function(e,t,r,i,n){var o=1/Math.tan(t/2),a=void 0;return e[0]=o/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=n&&n!==1/0?(a=1/(i-n),e[10]=(n+i)*a,e[14]=2*n*i*a):(e[10]=-1,e[14]=-2*i),e},t.perspectiveFromFieldOfView=function(e,t,r,i){var n=Math.tan(t.upDegrees*Math.PI/180),o=Math.tan(t.downDegrees*Math.PI/180),a=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),l=2/(a+s),u=2/(n+o);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=u,e[6]=0,e[7]=0,e[8]=-(a-s)*l*.5,e[9]=(n-o)*u*.5,e[10]=i/(r-i),e[11]=-1,e[12]=0,e[13]=0,e[14]=i*r/(r-i),e[15]=0,e},t.ortho=function(e,t,r,i,n,o,a){var s=1/(t-r),l=1/(i-n),u=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+r)*s,e[13]=(n+i)*l,e[14]=(a+o)*u,e[15]=1,e},t.lookAt=function(e,t,r,o){var a=void 0,s=void 0,l=void 0,u=void 0,c=void 0,d=void 0,f=void 0,h=void 0,p=void 0,_=void 0,v=t[0],m=t[1],g=t[2],y=o[0],x=o[1],b=o[2],w=r[0],D=r[1],M=r[2];return Math.abs(v-w)<i.EPSILON&&Math.abs(m-D)<i.EPSILON&&Math.abs(g-M)<i.EPSILON?n(e):(f=v-w,h=m-D,p=g-M,a=x*(p*=_=1/Math.sqrt(f*f+h*h+p*p))-b*(h*=_),s=b*(f*=_)-y*p,l=y*h-x*f,(_=Math.sqrt(a*a+s*s+l*l))?(a*=_=1/_,s*=_,l*=_):(a=0,s=0,l=0),u=h*l-p*s,c=p*a-f*l,d=f*s-h*a,(_=Math.sqrt(u*u+c*c+d*d))?(u*=_=1/_,c*=_,d*=_):(u=0,c=0,d=0),e[0]=a,e[1]=u,e[2]=f,e[3]=0,e[4]=s,e[5]=c,e[6]=h,e[7]=0,e[8]=l,e[9]=d,e[10]=p,e[11]=0,e[12]=-(a*v+s*m+l*g),e[13]=-(u*v+c*m+d*g),e[14]=-(f*v+h*m+p*g),e[15]=1,e)},t.targetTo=function(e,t,r,i){var n=t[0],o=t[1],a=t[2],s=i[0],l=i[1],u=i[2],c=n-r[0],d=o-r[1],f=a-r[2],h=c*c+d*d+f*f;h>0&&(c*=h=1/Math.sqrt(h),d*=h,f*=h);var p=l*f-u*d,_=u*c-s*f,v=s*d-l*c;return(h=p*p+_*_+v*v)>0&&(p*=h=1/Math.sqrt(h),_*=h,v*=h),e[0]=p,e[1]=_,e[2]=v,e[3]=0,e[4]=d*v-f*_,e[5]=f*p-c*v,e[6]=c*_-d*p,e[7]=0,e[8]=c,e[9]=d,e[10]=f,e[11]=0,e[12]=n,e[13]=o,e[14]=a,e[15]=1,e},t.str=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},t.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))},t.add=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e},t.subtract=s,t.multiplyScalar=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12]*r,e[13]=t[13]*r,e[14]=t[14]*r,e[15]=t[15]*r,e},t.multiplyScalarAndAdd=function(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e[4]=t[4]+r[4]*i,e[5]=t[5]+r[5]*i,e[6]=t[6]+r[6]*i,e[7]=t[7]+r[7]*i,e[8]=t[8]+r[8]*i,e[9]=t[9]+r[9]*i,e[10]=t[10]+r[10]*i,e[11]=t[11]+r[11]*i,e[12]=t[12]+r[12]*i,e[13]=t[13]+r[13]*i,e[14]=t[14]+r[14]*i,e[15]=t[15]+r[15]*i,e},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]},t.equals=function(e,t){var r=e[0],n=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],d=e[8],f=e[9],h=e[10],p=e[11],_=e[12],v=e[13],m=e[14],g=e[15],y=t[0],x=t[1],b=t[2],w=t[3],D=t[4],M=t[5],T=t[6],V=t[7],P=t[8],O=t[9],I=t[10],C=t[11],z=t[12],S=t[13],R=t[14],A=t[15];return Math.abs(r-y)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(n-x)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(x))&&Math.abs(o-b)<=i.EPSILON*Math.max(1,Math.abs(o),Math.abs(b))&&Math.abs(a-w)<=i.EPSILON*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(s-D)<=i.EPSILON*Math.max(1,Math.abs(s),Math.abs(D))&&Math.abs(l-M)<=i.EPSILON*Math.max(1,Math.abs(l),Math.abs(M))&&Math.abs(u-T)<=i.EPSILON*Math.max(1,Math.abs(u),Math.abs(T))&&Math.abs(c-V)<=i.EPSILON*Math.max(1,Math.abs(c),Math.abs(V))&&Math.abs(d-P)<=i.EPSILON*Math.max(1,Math.abs(d),Math.abs(P))&&Math.abs(f-O)<=i.EPSILON*Math.max(1,Math.abs(f),Math.abs(O))&&Math.abs(h-I)<=i.EPSILON*Math.max(1,Math.abs(h),Math.abs(I))&&Math.abs(p-C)<=i.EPSILON*Math.max(1,Math.abs(p),Math.abs(C))&&Math.abs(_-z)<=i.EPSILON*Math.max(1,Math.abs(_),Math.abs(z))&&Math.abs(v-S)<=i.EPSILON*Math.max(1,Math.abs(v),Math.abs(S))&&Math.abs(m-R)<=i.EPSILON*Math.max(1,Math.abs(m),Math.abs(R))&&Math.abs(g-A)<=i.EPSILON*Math.max(1,Math.abs(g),Math.abs(A))},t.mul=o,t.sub=s}.apply(null,i))||(e.exports=n)},891:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(1),r(0),r(10),r(49),r(116),r(175),r(9),r(91),r(4),r(2)],void 0===(n=function(e,t,r,i,n,o,a,s,l,u,c,d){return function(e){function t(t){var r=e.call(this)||this;return r.layer=null,r.parent=null,r}return r(t,e),t.prototype.initialize=function(){var e=this;this.addResolvingPromise(this.layer),this.when().catch((function(t){if("layerview:create-error"!==t.name){var r=e.layer&&e.layer.id||"no id",i=e.layer&&e.layer.title||"no title";return l.getLogger(e.declaredClass).error("#resolve()","Failed to resolve layer view (layer title: '"+i+"', id: '"+r+"')",t),c.reject(t)}}))},t.prototype.destroy=function(){this.layer=this.parent=null},Object.defineProperty(t.prototype,"fullOpacity",{get:function(){var e=function(e){return null==e?1:e};return e(this.get("layer.opacity"))*e(this.get("parent.fullOpacity"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"suspended",{get:function(){return!this.canResume()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updating",{get:function(){return!!(this.updatingHandles&&this.updatingHandles.updating||this.isUpdating())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return!0===this.get("layer.visible")},set:function(e){void 0!==e?this._override("visible",e):this._clearOverride("visible")},enumerable:!0,configurable:!0}),t.prototype.canResume=function(){return!this.get("parent.suspended")&&this.get("view.ready")&&this.get("layer.loaded")&&this.visible||!1},t.prototype.isUpdating=function(){return!1},i([d.property({dependsOn:["layer.opacity","parent.fullOpacity"]})],t.prototype,"fullOpacity",null),i([d.property()],t.prototype,"layer",void 0),i([d.property()],t.prototype,"parent",void 0),i([d.property({readOnly:!0,dependsOn:["visible","layer.loaded","parent.suspended"]})],t.prototype,"suspended",null),i([d.property({type:Boolean,dependsOn:["updatingHandles.updating"],readOnly:!0})],t.prototype,"updating",null),i([d.property({dependsOn:["layer.visible"]})],t.prototype,"visible",null),i([d.subclass("esri.views.layers.LayerView")],t)}(d.declared(a.HandleOwnerMixin(s.IdentifiableMixin(u.EsriPromiseMixin(o.EventedMixin(n))))))}.apply(null,i))||(e.exports=n)},892:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1};t.default=r}.apply(null,i))||(e.exports=n)},893:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(15),r(58)],void 0===(n=function(e,t,r,i){var n=r("esri-text-decoder")?new TextDecoder("utf-8"):null,o=r("safari")?6:r("ff")?12:32;return function(){function e(e,t,r,i){void 0===r&&(r=0),void 0===i&&(i=e?e.byteLength:0),this._tag=0,this._dataType=99,this.init(e,t,r,i)}return e.prototype.init=function(e,t,r,i){this._data=e,this._dataView=t,this._pos=r,this._end=i},e.prototype.clone=function(){return new e(this._data,this._dataView,this._pos,this._end)},e.prototype.pos=function(){return this._pos},e.prototype.next=function(e){for(;;){if(this._pos===this._end)return!1;var t=this._decodeVarint();if(this._tag=t>>3,this._dataType=7&t,!e||e===this._tag)break;this.skip()}return!0},e.prototype.empty=function(){return this._pos>=this._end},e.prototype.tag=function(){return this._tag},e.prototype.getInt32=function(){return this._decodeVarint()},e.prototype.getInt64=function(){return this._decodeVarint()},e.prototype.getUInt32=function(){var e=4294967295;return e=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128?e:(e=(e|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128?e:void 0))))},e.prototype.getUInt64=function(){return this._decodeVarint()},e.prototype.getSInt32=function(){var e=this.getUInt32();return e>>>1^-(1&e)|0},e.prototype.getSInt64=function(){return this._decodeSVarint()},e.prototype.getBool=function(){var e=0!==this._data[this._pos];return this._skip(1),e},e.prototype.getEnum=function(){return this._decodeVarint()},e.prototype.getFixed64=function(){var e=this._dataView,t=this._pos,r=e.getUint32(t,!0)+4294967296*e.getUint32(t+4,!0);return this._skip(8),r},e.prototype.getSFixed64=function(){var e=this._dataView,t=this._pos,r=e.getUint32(t,!0)+4294967296*e.getInt32(t+4,!0);return this._skip(8),r},e.prototype.getDouble=function(){var e=this._dataView.getFloat64(this._pos,!0);return this._skip(8),e},e.prototype.getFixed32=function(){var e=this._dataView.getUint32(this._pos,!0);return this._skip(4),e},e.prototype.getSFixed32=function(){var e=this._dataView.getInt32(this._pos,!0);return this._skip(4),e},e.prototype.getFloat=function(){var e=this._dataView.getFloat32(this._pos,!0);return this._skip(4),e},e.prototype.getString=function(){var e=this._getLength(),t=this._pos,r=this._toString(this._data,t,t+e);return this._skip(e),r},e.prototype.getBytes=function(){var e=this._getLength(),t=this._pos,r=this._toBytes(this._data,t,t+e);return this._skip(e),r},e.prototype.processMessageWithArgs=function(e,t,r,i){var n=this.getMessage(),o=e(n,t,r,i);return n.release(),o},e.prototype.processMessage=function(e){var t=this.getMessage(),r=e(t);return t.release(),r},e.prototype.getMessage=function(){var t=this._getLength(),r=e.pool.acquire();return r.init(this._data,this._dataView,this._pos,this._pos+t),this._skip(t),r},e.prototype.release=function(){e.pool.release(this)},e.prototype.skip=function(){switch(this._dataType){case 0:this._decodeVarint();break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);break;default:throw new Error("Invalid data type!")}},e.prototype._skip=function(e){if(this._pos+e>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=e},e.prototype._decodeVarint=function(){var e,t=this._data,r=this._pos,i=0;if(this._end-r>=10)do{if(i|=127&(e=t[r++]),0==(128&e))break;if(i|=(127&(e=t[r++]))<<7,0==(128&e))break;if(i|=(127&(e=t[r++]))<<14,0==(128&e))break;if(i|=(127&(e=t[r++]))<<21,0==(128&e))break;if(i+=268435456*(127&(e=t[r++])),0==(128&e))break;if(i+=34359738368*(127&(e=t[r++])),0==(128&e))break;if(i+=4398046511104*(127&(e=t[r++])),0==(128&e))break;if(i+=562949953421312*(127&(e=t[r++])),0==(128&e))break;if(i+=72057594037927940*(127&(e=t[r++])),0==(128&e))break;if(i+=0x8000000000000000*(127&(e=t[r++])),0==(128&e))break;throw new Error("Varint too long!")}while(0);else{for(var n=1;r!==this._end&&0!=(128&(e=t[r]));)++r,i+=(127&e)*n,n*=128;if(r===this._end)throw new Error("Varint overrun!");++r,i+=e*n}return this._pos=r,i},e.prototype._decodeSVarint=function(){var e=this._decodeVarint();return e%2?-(e+1)/2:e/2},e.prototype._getLength=function(){if(2!==this._dataType)throw new Error("Not a delimited data type!");return this._decodeVarint()},e.prototype._toString=function(e,t,r){if((r=Math.min(this._end,r))-t>o&&n){var i=e.subarray(t,r);return n.decode(i)}for(var a="",s="",l=t;l<r;++l){var u=e[l];128&u?s+="%"+u.toString(16):(a+=decodeURIComponent(s)+String.fromCharCode(u),s="")}return s.length&&(a+=decodeURIComponent(s)),a},e.prototype._toBytes=function(e,t,r){return r=Math.min(this._end,r),new Uint8Array(e.buffer,t,r-t)},e.pool=new i(e,!1,(function(e){e._data=null,e._dataView=null})),e}()}.apply(null,i))||(e.exports=n)},901:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(1),r(0),r(17),r(94),r(14),r(2),r(877),r(909),r(910),r(911)],void 0===(n=function(e,t,r,i,n,o,a,s,l,u,c,d){Object.defineProperty(t,"__esModule",{value:!0});var f=n.ofType({key:"type",base:l,typeMap:{rect:u,path:d,geometry:c}});t.LayerView2D=function(e){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.clips=new f,t.moving=!1,t.attached=!1,t.lastUpdateId=-1,t.updateRequested=!1,t}return r(t,e),t.prototype.initialize=function(){var e=this;this.when((function(){e.requestUpdate()}),(function(){}));var t=function(){return e.notifyChange("rendering")};this.handles.add([a.init(this,"suspended",(function(t){e.container&&(e.container.visible=!t),e.view&&!t&&e.updateRequested&&e.view.requestLayerViewUpdate(e)}),!0),a.init(this,"fullOpacity",(function(t){e.container&&(e.container.opacity=t)}),!0),a.on(this,"container","post-render",t),a.on(this,"container","will-render",t)])},t.prototype.destroy=function(){this.attached&&(this.attached=!1,this.detach()),this.handles.remove("initialize"),this.updateRequested=!1,this.layer=null,this.view=null},Object.defineProperty(t.prototype,"rendering",{get:function(){return this.attached&&!this.suspended&&(this.moving||this.container.renderRequested||this.isRendering())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updating",{get:function(){return!this.suspended&&(!this.attached||this.updateRequested||this.isUpdating())},enumerable:!0,configurable:!0}),t.prototype.isVisibleAtScale=function(e){var t=!0,r=this.layer,i=r.minScale,n=r.maxScale;if(null!=i&&null!=n){var o=!i,a=!n;!o&&e<=i&&(o=!0),!a&&e>=n&&(a=!0),t=o&&a}return t},t.prototype.requestUpdate=function(){this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestLayerViewUpdate(this))},t.prototype.processUpdate=function(e){!this.isFulfilled()||this.isResolved()?(this._set("updateParameters",e),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(e))):this.updateRequested=!1},t.prototype.isUpdating=function(){return!1},t.prototype.isRendering=function(){return!1},t.prototype.canResume=function(){var e=this.inherited(arguments);return e&&(e=this.isVisibleAtScale(this.view.scale)),e},i([s.property({type:f,set:function(e){var t=o.referenceSetter(e,this._get("clips"),f);this._set("clips",t)}})],t.prototype,"clips",void 0),i([s.property()],t.prototype,"moving",void 0),i([s.property({dependsOn:["attached","suspended","moving"]})],t.prototype,"rendering",null),i([s.property()],t.prototype,"attached",void 0),i([s.property()],t.prototype,"container",void 0),i([s.property({dependsOn:["view.scale","layer.minScale","layer.maxScale"]})],t.prototype,"suspended",void 0),i([s.property({readOnly:!0})],t.prototype,"updateParameters",void 0),i([s.property()],t.prototype,"updateRequested",void 0),i([s.property({dependsOn:["updateRequested","attached","suspended"]})],t.prototype,"updating",null),i([s.property()],t.prototype,"view",void 0),i([s.subclass("esri.views.2d.layers.LayerView2D")],t)}(s.declared(e))}}.apply(null,i))||(e.exports=n)},909:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(0),r(1),r(2),r(877)],void 0===(n=function(e,t,r,i,n,o){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="rect",t.left=null,t.right=null,t.top=null,t.bottom=null,t}var o;return i(t,e),o=t,t.prototype.clone=function(){return new o({left:this.left,right:this.right,top:this.top,bottom:this.bottom})},Object.defineProperty(t.prototype,"version",{get:function(){return(this._get("version")||0)+1},enumerable:!0,configurable:!0}),r([n.property({type:[Number,String],json:{write:!0}})],t.prototype,"left",void 0),r([n.property({type:[Number,String],json:{write:!0}})],t.prototype,"right",void 0),r([n.property({type:[Number,String],json:{write:!0}})],t.prototype,"top",void 0),r([n.property({type:[Number,String],json:{write:!0}})],t.prototype,"bottom",void 0),r([n.property({readOnly:!0,dependsOn:["left","right","top","bottom"]})],t.prototype,"version",null),o=r([n.subclass("esri.views.layers.support.ClipRect")],t)}(n.declared(o))}.apply(null,i))||(e.exports=n)},910:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(0),r(1),r(20),r(2),r(46),r(55),r(877)],void 0===(n=function(e,t,r,i,n,o,a,s,l){var u={base:a,key:"type",typeMap:{extent:n.Extent,polygon:n.Polygon}};return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="geometry",t.geometry=null,t}var n;return i(t,e),n=t,Object.defineProperty(t.prototype,"version",{get:function(){return(this._get("version")||0)+1},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new n({geometry:this.geometry.clone()})},r([o.property({types:u,json:{read:s.fromJSON,write:!0}})],t.prototype,"geometry",void 0),r([o.property({readOnly:!0,dependsOn:["geometry"]})],t.prototype,"version",null),n=r([o.subclass("esri.views.layers.support.Geometry")],t)}(o.declared(l))}.apply(null,i))||(e.exports=n)},911:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(0),r(1),r(2),r(877)],void 0===(n=function(e,t,r,i,n,o){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="path",t.path=[],t}return i(t,e),Object.defineProperty(t.prototype,"version",{get:function(){return(this._get("version")||0)+1},enumerable:!0,configurable:!0}),r([n.property({type:[[[Number]]],json:{write:!0}})],t.prototype,"path",void 0),r([n.property({readOnly:!0,dependsOn:["path"]})],t.prototype,"version",null),r([n.subclass("esri.views.layers.support.Path")],t)}(n.declared(o))}.apply(null,i))||(e.exports=n)},934:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(1110)],void 0===(n=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.vec3f32=r}.apply(null,i))||(e.exports=n)},939:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(283)],void 0===(n=function(e,t,r){return function(){function e(e,t){this._storage=new r.MemCacheStorage,this._storage.maxSize=e,t&&this._storage.registerRemoveFunc("",t)}return e.prototype.put=function(e,t){this._storage.put(e,t,1,1)},e.prototype.pop=function(e){return this._storage.pop(e)},e.prototype.get=function(e){return this._storage.get(e)},e.prototype.clear=function(){this._storage.clearAll()},e.prototype.destroy=function(){this._storage.clearAll()},e}()}.apply(null,i))||(e.exports=n)},996:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=new Uint32Array(1),i=new Uint8Array(r.buffer);t.int32To4Bytes=function(e){return r[0]=0|e,[i[0],i[1],i[2],i[3]]},t.HIGH_RES_CUTOFF=1.15}.apply(null,i))||(e.exports=n)}}]);