(function(){(this||window).webpackJsonp.registerAbsMids({"esri/tasks/ServiceAreaTask":859,"esri/tasks/Task":883,"esri/tasks/support/GPMessage":963,"esri/core/queryUtils":999,"esri/tasks/mixins/NAServiceDescription":1e3,"esri/tasks/support/NAMessage":1001,"esri/tasks/support/ServiceAreaSolveResult":1727})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[74],{1e3:function(e,r,t){var o,i;o=[t.dj.c(e.i),r,t(0),t(1),t(6),t(8),t(41),t(11),t(16),t(43),t(23),t(2),t(883)],void 0===(i=function(e,r,t,o,i,s,n,a,l,u,p,c,f){function d(e){return s(this,void 0,void 0,(function(){var r,t,o,s;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,n(e+("/"===e[e.length-1]?"":"/")+"retrieveTravelModes",{query:{f:"json"}})];case 1:return r=i.sent().data,t=r.supportedTravelModes,o=r.defaultTravelMode,[2,{supportedTravelModes:t,defaultTravelMode:o}];case 2:throw s=i.sent(),new a("network-service:retrieveTravelModes","Could not get to the NAServer's retrieveTravelModes.",{error:s});case 3:return[2]}}))}))}function y(e){return s(this,void 0,void 0,(function(){var r,t,o,s,a,l,c,f,d,y,v,h,g,m,S,b;return i(this,(function(i){switch(i.label){case 0:return[4,n(e.substring(0,e.indexOf("/rest/")+6)+"info",{query:{f:"json"}})];case 1:return(r=i.sent().data)&&r.owningSystemUrl?(e=r.owningSystemUrl,[4,n(e+("/"===e[e.length-1]?"":"/")+"sharing/rest/portals/self",{query:{f:"json"}})]):[2,{supportedTravelModes:[],defaultTravelMode:null}];case 2:return t=i.sent().data,(o=u.getDeepValue("helperServices.routingUtilities.url",t))?(s=p.urlToObject(e),a=/\/solveClosestFacility$/.test(s.path)?"Route":/\/solveClosestFacility$/.test(s.path)?"ClosestFacility":"ServiceAreas",[4,n(o+("/"===o[o.length-1]?"":"/")+"GetTravelModes/execute",{query:{f:"json",serviceName:a}})]):[2,{supportedTravelModes:[],defaultTravelMode:null}];case 3:if(l=i.sent(),c=[],f=null,l&&l.data&&l.data.results&&l.data.results.length)for(d=l.data.results,y=0,v=d;y<v.length;y++)if("supportedTravelModes"===(h=v[y]).paramName){if(h.value&&h.value.features)for(g=0,m=h.value.features;g<m.length;g++)(S=m[g].attributes)&&(b=JSON.parse(S.TravelMode),c.push(b))}else"defaultTravelMode"===h.paramName&&(f=h.value);return[2,{supportedTravelModes:c,defaultTravelMode:f}]}}))}))}Object.defineProperty(r,"__esModule",{value:!0}),r.NAServiceDescriptionMixin=function(e){return function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return o(r,e),r.prototype.getServiceDescription=function(){return s(this,void 0,void 0,(function(){return i(this,(function(e){return this._serviceDescriptionPromise||(this._serviceDescriptionPromise=this._fetchServiceDescription()),[2,this._serviceDescriptionPromise]}))}))},r.prototype._fetchServiceDescription=function(){return s(this,void 0,void 0,(function(){var e,r,t,o,s,l;return i(this,(function(i){switch(i.label){case 0:if(!this.url||!this.parsedUrl)throw new a("network-service:missing-url","Url to Network service is missing");return e=this.url,[4,n(e,{query:{f:"json"}})];case 1:for((r=i.sent().data).supportedTravelModes||(r.supportedTravelModes=[]),t=0;t<r.supportedTravelModes.length;t++)r.supportedTravelModes[t].id||(r.supportedTravelModes[t].id=r.supportedTravelModes[t].itemId);return[4,r.currentVersion>=10.4?d(e):y(e)];case 2:return o=i.sent(),s=o.defaultTravelMode,l=o.supportedTravelModes,r.defaultTravelMode=s,r.supportedTravelModes=l,[2,r]}}))}))},r.prototype._isInputGeometryZAware=function(e,r){for(var t=0;t<r.length;t++){var o=e[r[t]];if(o&&o.length)for(var i=0,s=o;i<s.length;i++){var n=s[i];if(l.isSome(n)&&n.hasZ)return!0}}return!1},r.prototype._dropZValuesOffInputGeometry=function(e,r){for(var t=0;t<r.length;t++){var o=e[r[t]];if(o&&o.length)for(var i=0,s=o;i<s.length;i++){s[i].z=void 0}}console.log("The remote Network Analysis service is powered by a network dataset which is not Z-aware.\nZ-coordinates of the input geometry are ignored.")},t([c.subclass("esri.tasks.mixins.NAServiceDescription")],r)}(c.declared(e))};var v=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return o(r,e),t([c.subclass("esri.tasks.mixins.NAServiceDescription")],r)}(c.declared(r.NAServiceDescriptionMixin(f)));r.NAServiceDescription=v}.apply(null,o))||(e.exports=i)},1001:function(e,r,t){var o,i;o=[t.dj.c(e.i),r,t(1),t(0),t(12),t(2),t(963)],void 0===(i=function(e,r,t,o,i,s,n){var a=new i.default({0:"informative",1:"process-definition",2:"process-start",3:"process-stop",50:"warning",100:"error",101:"empty",200:"abort"});return function(e){function r(r){var t=e.call(this)||this;return t.type=null,t}return t(r,e),o([s.property({type:String,json:{read:a.read,write:a.write}})],r.prototype,"type",void 0),o([s.subclass("esri.tasks.support.NAMessage")],r)}(s.declared(n))}.apply(null,o))||(e.exports=i)},1727:function(e,r,t){var o,i;o=[t.dj.c(e.i),r,t(1),t(0),t(20),t(49),t(3),t(16),t(2),t(26),t(1001)],void 0===(i=function(e,r,t,o,i,s,n,a,l,u,p){function c(e){return e.features.map((function(r){var t=u.fromJSON(e.spatialReference),o=s.fromJSON(r);return a.expect(o.geometry).spatialReference=t,o}))}function f(e){return e.features.map((function(r){return r.geometry.spatialReference=e.spatialReference,i.fromJSON(r.geometry)}))}return function(e){function r(r){var t=e.call(this)||this;return t.facilities=null,t.messages=null,t.pointBarriers=null,t.polylineBarriers=null,t.polygonBarriers=null,t.serviceAreaPolylines=null,t.serviceAreaPolygons=null,t}return t(r,e),r.prototype.readFacilities=function(e){return f(e)},r.prototype.readPointBarriers=function(e,r){return f(r.barriers)},r.prototype.readPolylineBarriers=function(e){return f(e)},r.prototype.readPolygonBarriers=function(e){return f(e)},r.prototype.readIncidents=function(e,r){return c(r.saPolylines)},r.prototype.readServiceAreaPolygons=function(e,r){return c(r.saPolygons)},o([l.property({type:[i.Point]})],r.prototype,"facilities",void 0),o([l.reader("facilities")],r.prototype,"readFacilities",null),o([l.property({type:[p]})],r.prototype,"messages",void 0),o([l.property({type:[i.Point]})],r.prototype,"pointBarriers",void 0),o([l.reader("pointBarriers",["barriers"])],r.prototype,"readPointBarriers",null),o([l.property({type:[i.Polyline]})],r.prototype,"polylineBarriers",void 0),o([l.reader("polylineBarriers")],r.prototype,"readPolylineBarriers",null),o([l.property({type:[i.Polygon]})],r.prototype,"polygonBarriers",void 0),o([l.reader("polygonBarriers")],r.prototype,"readPolygonBarriers",null),o([l.property({type:[s]})],r.prototype,"serviceAreaPolylines",void 0),o([l.reader("serviceAreaPolylines",["saPolylines"])],r.prototype,"readIncidents",null),o([l.property({type:[s]})],r.prototype,"serviceAreaPolygons",void 0),o([l.reader("serviceAreaPolygons",["saPolygons"])],r.prototype,"readServiceAreaPolygons",null),o([l.subclass("esri.tasks.support.ServiceAreaSolveResult")],r)}(l.declared(n.JSONSupport))}.apply(null,o))||(e.exports=i)},859:function(e,r,t){var o,i;o=[t.dj.c(e.i),r,t(7),t(1),t(0),t(41),t(45),t(4),t(999),t(2),t(271),t(883),t(1e3),t(1727)],void 0===(i=function(e,r,t,o,i,s,n,a,l,u,p,c,f,d){var y=l.createQueryParamsHelper({accumulateAttributes:{name:"accumulateAttributeNames"},attributeParameterValues:!0,defaultBreaks:!0,facilities:!0,outSpatialReference:{name:"outSR",getter:function(e){return e.outSpatialReference.wkid}},pointBarriers:{name:"barriers"},polylineBarriers:!0,polygonBarriers:!0,restrictionAttributes:{name:"restrictionAttributeNames"},returnPointBarriers:{name:"returnBarriers"},travelMode:!0});return function(e){function r(r){var t=e.call(this)||this;return t.url=null,t}return o(r,e),r.prototype.solve=function(e,r){var o=this,i=[],l=[],u={},c={};return e.facilities&&e.facilities.features&&this._collectGeometries(e.facilities.features,l,"facilities.features",u),e.pointBarriers&&e.pointBarriers.features&&this._collectGeometries(e.pointBarriers.features,l,"pointBarriers.features",u),e.polylineBarriers&&e.polylineBarriers.features&&this._collectGeometries(e.polylineBarriers.features,l,"polylineBarriers.features",u),e.polygonBarriers&&e.polygonBarriers.features&&this._collectGeometries(e.polygonBarriers.features,l,"polygonBarriers.features",u),n.safeCast(p.normalizeCentralMeridian(l)).then((function(e){for(var r in u){var t=u[r];i.push(r),c[r]=e.slice(t[0],t[1])}return o._isInputGeometryZAware(c,i)?n.safeCast(o.getServiceDescription()):a.resolve({dontCheck:!0})})).then((function(n){for(var a in("dontCheck"in n?n.dontCheck:n.hasZ)||o._dropZValuesOffInputGeometry(c,i),c)!function(r){c[r].forEach((function(t,o){e.get(r)[o].geometry=t}))}(a);var l={query:t({},o.parsedUrl.query,{f:"json"},y.toQueryParams(e))};return(o.requestOptions||r)&&(l=t({},o.requestOptions,r,l)),s(o.parsedUrl.path+"/solveServiceArea",l)})).then((function(e){return d.fromJSON(e.data)}))},r.prototype._collectGeometries=function(e,r,t,o){o[t]=[r.length,r.length+e.length],e.forEach((function(e){r.push(e.geometry)}))},i([u.property()],r.prototype,"url",void 0),i([u.subclass("esri.tasks.ServiceAreaTask")],r)}(u.declared(f.NAServiceDescriptionMixin(c)))}.apply(null,o))||(e.exports=i)},883:function(e,r,t){var o,i;o=[t.dj.c(e.i),r,t(1),t(0),t(73),t(7),t(10),t(23),t(2)],void 0===(i=function(e,r,t,o,i,s,n,a,l){return function(e){function r(r){var t=e.call(this)||this;return t.requestOptions=null,t.url=null,t}return t(r,e),r.prototype.normalizeCtorArgs=function(e,r){return"string"!=typeof e?e:s({url:e},r)},Object.defineProperty(r.prototype,"parsedUrl",{get:function(){return this._parseUrl(this.url)},enumerable:!0,configurable:!0}),r.prototype._parseUrl=function(e){return e?a.urlToObject(e):null},r.prototype._encode=function(e,r,t){var o={};for(var i in e)if("declaredClass"!==i){var s=e[i];if(null!=s&&"function"!=typeof s)if(Array.isArray(s)){o[i]=[];for(var n=0;n<s.length;n++)o[i][n]=this._encode(s[n])}else if("object"==typeof s)if(s.toJSON){var a=s.toJSON(t&&t[i]);o[i]=r?a:JSON.stringify(a)}else o[i]=r?s:JSON.stringify(s);else o[i]=s}return o},o([l.property({readOnly:!0,dependsOn:["url"]})],r.prototype,"parsedUrl",null),o([l.property()],r.prototype,"requestOptions",void 0),o([l.property({type:String})],r.prototype,"url",void 0),o([l.subclass("esri.tasks.Task")],r)}(l.declared(n))}.apply(null,o))||(e.exports=i)},963:function(e,r,t){var o,i;o=[t.dj.c(e.i),r,t(1),t(0),t(12),t(3),t(2)],void 0===(i=function(e,r,t,o,i,s,n){var a=new i.default({esriJobMessageTypeInformative:"informative",esriJobMessageTypeProcessDefinition:"process-definition",esriJobMessageTypeProcessStart:"process-start",esriJobMessageTypeProcessStop:"process-stop",esriJobMessageTypeWarning:"warning",esriJobMessageTypeError:"error",esriJobMessageTypeEmpty:"empty",esriJobMessageTypeAbort:"abort"});return function(e){function r(r){var t=e.call(this)||this;return t.description=null,t.type=null,t}return t(r,e),o([n.property({type:String,json:{write:!0}})],r.prototype,"description",void 0),o([n.property({type:String,json:{read:a.read,write:a.write}})],r.prototype,"type",void 0),o([n.subclass("esri.tasks.support.GPMessage")],r)}(n.declared(s.JSONSupport))}.apply(null,o))||(e.exports=i)},999:function(e,r,t){var o,i;o=[t.dj.c(e.i),r],void 0===(i=function(e,r){Object.defineProperty(r,"__esModule",{value:!0});var t=function(){function e(e){void 0===e&&(e={}),this._options=e}return e.prototype.toQueryParams=function(e){var r=this;if(!e)return null;var t=e.toJSON(),o={};return Object.keys(t).forEach((function(e){var i=r._options[e];if(i){var s="boolean"!=typeof i&&i.name?i.name:e,n="boolean"!=typeof i&&i.getter?i.getter(t):t[e];null!=n&&(o[s]=function(e){if(!Array.isArray(e))return!1;var r=e[0];return"number"==typeof r||"string"==typeof r}(n)?n.join(","):"object"==typeof n?JSON.stringify(n):n)}else o[e]=t[e]}),this),o},e}();r.createQueryParamsHelper=function(e){return new t(e)}}.apply(null,o))||(e.exports=i)}}]);