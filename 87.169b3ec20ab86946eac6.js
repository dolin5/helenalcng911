(function(){(this||window).webpackJsonp.registerAbsMids({"esri/portal/support/portalLayers":845,"esri/layers/support/lazyLayerLoader":961,"esri/portal/support/mapNotesUtils":1032})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[87],{1032:function(e,n,r){var t,a;t=[r.dj.c(e.i),n],void 0===(a=function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isMapNotesLayer=function(e){var n=["TITLE","DESCRIPTION","IMAGE_URL","IMAGE_LINK_URL"],r=e.layers||e.featureCollection&&e.featureCollection.layers;if(r&&Array.isArray(r)){var t=r[0];return t.layerDefinition&&Array.isArray(t.layerDefinition.fields)&&t.layerDefinition.fields.forEach((function(e){var r=n.indexOf(e.name);r>-1&&n.splice(r,1)})),!n.length}}}.apply(null,t))||(e.exports=a)},845:function(e,n,r){var t,a;t=[r.dj.c(e.i),n,r(7),r(41),r(17),r(11),r(4),r(961),r(96),r(1032)],void 0===(a=function(e,n,r,t,a,u,i,c,o,l){function s(e){switch(e.type){case"Map Service":return function(e){return f(e).then((function(e){return e?{className:"TileLayer"}:{className:"MapImageLayer"}}))}(e);case"Feature Service":return function(e){return p(e).then((function(e){if("object"==typeof e){var n={outFields:["*"]};return null!=e.id&&(n.layerId=e.id),{className:"FeatureLayer",properties:n}}return{className:"GroupLayer"}}))}(e);case"Feature Collection":return function(e){return e.load().then((function(){return e.fetchData()})).then((function(e){if(e&&Array.isArray(e.layers)){if(l.isMapNotesLayer(e))return{className:"MapNotesLayer"};if(1===e.layers.length)return{className:"FeatureLayer"}}return{className:"GroupLayer"}}))}(e);case"Scene Service":return function(e){return p(e).then((function(n){if("object"==typeof n){var r={},t=void 0;if(null!=n.id?(r.layerId=n.id,t=e.url+"/layers/"+n.id):t=e.url,Array.isArray(e.typeKeywords)&&e.typeKeywords.length>0)for(var a={IntegratedMesh:"IntegratedMeshLayer","3DObject":"SceneLayer",Point:"SceneLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"},u=0,i=Object.keys(a);u<i.length;u++){var c=i[u];if(-1!==e.typeKeywords.indexOf(c))return{className:a[c]}}return h(t).then((function(e){var n="SceneLayer",t={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};return e&&e.layerType&&t[e.layerType]&&(n=t[e.layerType]),{className:n,properties:r}}))}return{className:"GroupLayer"}}))}(e);case"Image Service":return function(e){return f(e).then((function(n){var r=new a(e.typeKeywords);return n?r.find((function(e){return"elevation 3d layer"===e.toLowerCase()}))?{className:"ElevationLayer"}:{className:"TileLayer"}:{className:"ImageryLayer"}}))}(e);case"Stream Service":return{className:"StreamLayer"};case"Vector Tile Service":return{className:"VectorTileLayer"};case"KML":return{className:"KMLLayer"};case"WMTS":return{className:"WMTSLayer"};case"WMS":return{className:"WMSLayer"};default:return i.reject(new u("portal:unknown-item-type","Unknown item type '${type}'",{type:e.type}))}}function y(e){return(0,c.layerLookupMap[e.className])().then((function(n){return{constructor:n,properties:e.properties}}))}function f(e){return h(e.url).then((function(e){return e.tileInfo}))}function p(e){return!e.url||e.url.match(/\/\d+$/)?i.resolve({}):e.load().then((function(){return e.fetchData()})).then((function(n){return n&&Array.isArray(n.layers)?1===n.layers.length&&{id:n.layers[0].id}:h(e.url).then((function(e){return e&&Array.isArray(e.layers)?1===e.layers.length&&{id:e.layers[0].id}:{}}))}))}function h(e){return t(e,{responseType:"json",query:{f:"json"}}).then((function(e){return e.data}))}Object.defineProperty(n,"__esModule",{value:!0}),n.fromItem=function(e){return!e.portalItem||e.portalItem instanceof o||e.portalItem.constructor&&e.portalItem.constructor._meta||(e=r({},e,{portalItem:new o(e.portalItem)})),function(e){return e.load().then(s).then(y)}(e.portalItem).then((function(n){var t=r({portalItem:e.portalItem},n.properties),a=n.constructor;return i.resolve(new a(t))}))},n.selectLayerClassPath=s}.apply(null,t))||(e.exports=a)},961:function(e,n,r){var t,a;t=[r.dj.c(e.i),n,r(4)],void 0===(a=function(e,n,t){Object.defineProperty(n,"__esModule",{value:!0}),n.layerLookupMap={CSVLayer:function(){return t.create((function(e){return r.e(29).then(function(){var n=[r(837)];e.apply(null,n)}.bind(this)).catch(r.oe)}))},ElevationLayer:function(){return t.create((function(e){return r.e(14).then(function(){var n=[r(301)];e.apply(null,n)}.bind(this)).catch(r.oe)}))},FeatureLayer:function(){return t.create((function(e){return Promise.resolve().then(function(){var n=[r(178)];e.apply(null,n)}.bind(this)).catch(r.oe)}))},GroupLayer:function(){return t.create((function(e){return r.e(17).then(function(){var n=[r(832)];e.apply(null,n)}.bind(this)).catch(r.oe)}))},GeoRSSLayer:function(){return t.create((function(e){return r.e(37).then(function(){var n=[r(838)];e.apply(null,n)}.bind(this)).catch(r.oe)}))},ImageryLayer:function(){return t.create((function(e){return Promise.all([r.e(4),r.e(19)]).then(function(){var n=[r(833)];e.apply(null,n)}.bind(this)).catch(r.oe)}))},KMLLayer:function(){return t.create((function(e){return r.e(31).then(function(){var n=[r(840)];e.apply(null,n)}.bind(this)).catch(r.oe)}))},MapImageLayer:function(){return t.create((function(e){return r.e(12).then(function(){var n=[r(831)];e.apply(null,n)}.bind(this)).catch(r.oe)}))},MapNotesLayer:function(){return t.create((function(e){return r.e(94).then(function(){var n=[r(1068)];e.apply(null,n)}.bind(this)).catch(r.oe)}))},OpenStreetMapLayer:function(){return t.create((function(e){return r.e(32).then(function(){var n=[r(841)];e.apply(null,n)}.bind(this)).catch(r.oe)}))},PointCloudLayer:function(){return t.create((function(e){return r.e(20).then(function(){var n=[r(842)];e.apply(null,n)}.bind(this)).catch(r.oe)}))},SceneLayer:function(){return t.create((function(e){return r.e(25).then(function(){var n=[r(834)];e.apply(null,n)}.bind(this)).catch(r.oe)}))},BuildingSceneLayer:function(){return t.create((function(e){return r.e(21).then(function(){var n=[r(836)];e.apply(null,n)}.bind(this)).catch(r.oe)}))},IntegratedMeshLayer:function(){return t.create((function(e){return r.e(30).then(function(){var n=[r(839)];e.apply(null,n)}.bind(this)).catch(r.oe)}))},StreamLayer:function(){return t.create((function(e){return r.e(33).then(function(){var n=[r(835)];e.apply(null,n)}.bind(this)).catch(r.oe)}))},TileLayer:function(){return t.create((function(e){return r.e(11).then(function(){var n=[r(302)];e.apply(null,n)}.bind(this)).catch(r.oe)}))},UnknownLayer:function(){return t.create((function(e){return r.e(95).then(function(){var n=[r(1069)];e.apply(null,n)}.bind(this)).catch(r.oe)}))},UnsupportedLayer:function(){return t.create((function(e){return r.e(96).then(function(){var n=[r(1070)];e.apply(null,n)}.bind(this)).catch(r.oe)}))},VectorTileLayer:function(){return t.create((function(e){return Promise.all([r.e(13),r.e(23)]).then(function(){var n=[r(843)];e.apply(null,n)}.bind(this)).catch(r.oe)}))},WebTileLayer:function(){return t.create((function(e){return r.e(34).then(function(){var n=[r(830)];e.apply(null,n)}.bind(this)).catch(r.oe)}))},WMSLayer:function(){return t.create((function(e){return r.e(26).then(function(){var n=[r(844)];e.apply(null,n)}.bind(this)).catch(r.oe)}))},WMTSLayer:function(){return t.create((function(e){return r.e(75).then(function(){var n=[r(1071)];e.apply(null,n)}.bind(this)).catch(r.oe)}))},BingMapsLayer:function(){return t.create((function(e){return r.e(8).then(function(){var n=[r(187)];e.apply(null,n)}.bind(this)).catch(r.oe)}))}}}.apply(null,t))||(e.exports=a)}}]);