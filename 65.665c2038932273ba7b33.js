(function(){(this||window).webpackJsonp.registerAbsMids({"esri/layers/graphics/OptimizedGeometry":877,"esri/tasks/operations/urlUtils":882,"esri/tasks/Task":883,"esri/layers/graphics/OptimizedFeature":884,"esri/geometry/support/quantizationUtils":885,"esri/layers/graphics/OptimizedFeatureSet":893,"esri/tasks/operations/query":905,"esri/tasks/operations/queryAttachments":926,"esri/tasks/QueryTask":936,"esri/tasks/operations/queryRelatedRecords":937,"esri/layers/graphics/sources/StreamLayerSource":2053,"esri/layers/support/WebSocketConnector":2054})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[65,76,79,84],{2053:function(e,t,r){var n,o;n=[r(125),r(10),r(91),r(5),r(23),r(4),r(28),r(2054),r(936),r(41)],void 0===(o=function(e,t,r,n,o,i,s,u,a,c){return e([t,r.EsriPromise],{declaredClass:"esri.layers.graphics.sources.StreamLayerSource",constructor:function(e){var t=e&&e.layer;t&&(this.url=t.url)},initialize:function(){this.addResolvingPromise(this._fetchLayers())},properties:{connectionInfo:{get:function(){if(this.layer.hasMemorySource||this.layer.socketUrl)return{serviceSocketUrls:[this.layer.socketUrl]};if(this.sourceJSON){var e,t,r,n,i={},s=this.sourceJSON,u=[],a=[],c=[];if(s.streamUrls&&s.streamUrls.forEach((function(e){"ws"===e.transport&&(u=e.urls,i.token=e.token)}),this),u.forEach((function(e){0===e.lastIndexOf("wss",0)?c.push(e):a.push(e)})),(e="https"===o.appUrl.scheme||0===this.url.lastIndexOf("https:",0)?c:0===a.length?c:a)&&e.length>1)for(t=0;t<e.length-1;t++)n=e[r=t+Math.floor(Math.random()*(e.length-t))],e[r]=e[t],e[t]=n;return i.serviceSocketUrls=e,i}}},latestUrl:{get:function(){var e=this.sourceJSON,t=e.keepLatestArchive&&e.keepLatestArchive.featuresUrl;return t||null}},latestQueryTask:{get:function(){var e=this.latestUrl;return e?new a(e):null}},layer:{},relatedFeaturesInfo:{get:function(){var e=(this.sourceJSON||{}).relatedFeatures;return e&&e.featuresUrl?e:null}},relatedFeaturesQueryTask:{get:function(){var e=this.relatedFeaturesInfo,t=e?e.featuresUrl:null;return t?new a(t):null}},parsedUrl:{get:function(){return this.url?o.urlToObject(this.url):null}},url:null},createWebSocketConnector:function(e){var t=i.createDeferred();return this.when(function(){var r,o,i,s,a=this.connectionInfo,c=this.layer.spatialReference,l={};try{r=this.makeFilter()}catch(e){return void t.reject(e)}if(a){if(a.socketUrl?i=[a.socketUrl]:a.serviceSocketUrls&&(i=a.serviceSocketUrls.map(function(e){return e+"/"+this.layer.socketDirection}.bind(this))),l.socketUrls=i,r&&(r.where||r.geometry||r.outFields)){var d=r.geometry;d&&"string"!=typeof d&&(d=d.toJSON?JSON.stringify(d.toJSON()):JSON.stringify(d)),o=n.mixin(o||{},{where:r.where,geometry:d,outFields:r.outFields})}a.token&&(o=n.mixin(o||{},{token:a.token})),e&&c&&e.wkid!==c.wkid&&(o=n.mixin(o||{},{outSR:e.wkid})),l.queryParams=o,l.layerSource=this,s=new u(l),t.resolve(s)}else t.reject(new Error("No web socket urls found"))}.bind(this)),t.promise},getWebSocketToken:function(){return this._fetchStreamLayer().then(function(e){var t=e.data,r=null;return t.streamUrls&&t.streamUrls.some((function(e){if("ws"===e.transport)return r=e.token,!0}),this),r}.bind(this))},makeFilter:function(e){var t,r=this.layer,o=null;if(e){var i;if(t={},e.hasOwnProperty("where")&&(t.where=e.where),e.hasOwnProperty("geometry")){if((i=e.geometry)&&!i.hasOwnProperty("xmin"))throw new Error("Cannot make filter. Only Extent is supported for the geometry filter");i&&!i.declaredClass&&(i=new s(i)),t.geometry=i}}else{var u=r.filter||{};t={where:u.where,geometry:u.geometry};var a=this.relatedFeaturesInfo&&this.relatedFeaturesInfo.outFields||r.outFields;if(a&&-1===a.indexOf("*")){var c=r.fields.map((function(e){return e.name}));o=a.filter((function(e){return-1!==c.indexOf(e)})).join(","),t=n.mixin(t||{},{outFields:o})}}return t},queryFeatures:function(e,t){return i.reject()},_fetchLayers:function(){return this._fetchStreamLayer().then(function(e){return e.ssl&&(this.url=this.url.replace(/^http:/i,"https:")),this.sourceJSON=e.data,this._fetchArchiveLayer()}.bind(this)).then(function(e){return this.archivedLayerDefinition=e&&e.data,this._fetchRelatedLayer()}.bind(this)).then(function(e){this.relatedLayerDefinition=e&&e.data}.bind(this))},_fetchStreamLayer:function(){return this._requestServiceDefinition({url:this.layer.parsedUrl.path,content:n.mixin({f:"json"},this.layer.parsedUrl.query)})},_fetchArchiveLayer:function(){var e=this.latestUrl;return e?this._requestServiceDefinition({url:e}):i.resolve()},_fetchRelatedLayer:function(){var e=this.relatedFeaturesInfo;return e?this._requestServiceDefinition({url:e.featuresUrl}):i.resolve()},_requestServiceDefinition:function(e){return e&&e.url?c(e.url,{query:n.mixin(e.content||{},{f:"json"}),responseType:"json"}):i.reject(new Error("url is a required options property"))}})}.apply(null,n))||(e.exports=o)},2054:function(e,t,r){var n,o;n=[r(49),r(91),r(23),r(4),r(14),r(11)],void 0===(o=function(e,t,r,n,o,i){return(0,t.EsriPromiseMixin)(e.EventedAccessor).createSubclass({declaredClass:"esri.layers.support.WebSocketConnector",initialize:function(){var e=null;this.socketUrls.length||(e=new Error("No urls passed to WebSocketConnector. No live connection possible")),"WebSocket"in window||(e=new Error("The browser does not support Web Sockets. No live connection possible")),e&&this.addResolvingPromise(n.reject(e)),this.queryParams&&this.queryParams.token&&this._set("tokenNeeded",!0)},_socket:null,_connectPromise:null,_disconnectPromise:null,properties:{currentSocketUrl:{value:null,readOnly:!0},layerSource:null,queryParams:null,socketUrls:{value:[]},tokenNeeded:{value:!1},connectionError:{value:null,type:i,readOnly:!0},connectionStatus:{value:"disconnected",readOnly:!0}},connect:function(){var e=this.connectionStatus;return"connected"===e||"connecting"===e?this._connectPromise:"disconnected"===this.connectionStatus?(this._set("connectionStatus","connecting"),this._connect()):"disconnecting"===this.connectionStatus?(this._connectPromise=null,this._disconnectPromise||(this._disconnectPromise=o.once(this,"connectionStatus").then(function(e){if("disconnected"===e.value)return this._connect()}.bind(this))),this._disconnectPromise):void 0},disconnect:function(){var e=this.connectionStatus;"connected"===e?(this._set("connectionStatus","disconnecting"),this._socket?this._socket.close():this._set("connectionStatus","disconnected")):"connecting"===e&&this._connectPromise.then(function(){this.disconnect()}.bind(this))},send:function(e){this._socket&&("object"==typeof e&&(e=JSON.stringify(e)),this._socket.send(e))},_connect:function(){this._connectPromise&&(this._connectPromise=null);var e=n.createDeferred();return this._connectPromise=e,this._getWebSocketToken().then(function(e){e&&(this.queryParams.token=e);var t=this._makeCurrentUrl(),r=new WebSocket(t);r.onopen=this._handleSocketOpen.bind(this),r.onclose=this._handleSocketClose.bind(this),r.onmessage=this._handleSocketMessage.bind(this),this._socket=r}.bind(this)).catch(function(e){var t=new i("web-socket-connector:connect","Could not get websocket token for secured service",e);this._set("connectionError",t),this._connectPromise.reject(t)}.bind(this)),e.promise},_getWebSocketToken:function(){var e=this.queryParams,t=e&&e.token,r=this.tokenNeeded;return t?n.resolve(t):r?this.layerSource.getWebSocketToken():n.resolve()},_makeCurrentUrl:function(){var e,t,n=this.queryParams,o=this.socketUrls;return 1!==o.length&&this.currentSocketUrl?(e=o.indexOf(this.currentSocketUrl),t=o[e>=o.length-1?0:e+1]):t=o[0],this._set("currentSocketUrl",t),n&&(t+="?"+r.objectToQuery(n)),t},_handleSocketOpen:function(){this._set("connectionStatus","connected"),this._set("connectionError",null),this._disconnectPromise=null,this._connectPromise&&this._connectPromise.resolve()},_handleSocketClose:function(e){var t,r=null;this.queryParams&&(this.queryParams.token=null),e.wasClean&&!e.code||(1001===e.code?t="Service is going away.":4400===e.code?t=e.reason||"Invalid url parameters. Check filter properties.":4404===e.code?t="Service not found":4401===e.code||4403===e.code?t="Not authorized":e.wasClean||(t=e.reason||"Unknown reason"),t&&(r=new i("web-socket-connector:connection closed","Connection failed: "+t),this._set("connectionError",r),this._connectPromise&&this._connectPromise.reject(r))),this._connectPromise=null,this._set("connectionStatus","disconnected"),this._socket=null},_handleSocketMessage:function(e){this.emit("data-received",e.data)}})}.apply(null,n))||(e.exports=o)},877:function(e,t,r){var n,o;n=[r.dj.c(e.i),t],void 0===(o=function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){void 0===e&&(e=[]),void 0===t&&(t=[]),this.lengths=e,this.coords=t};t.default=r}.apply(null,n))||(e.exports=o)},882:function(e,t,r){var n,o;n=[r.dj.c(e.i),t],void 0===(o=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.mapParameters=function e(t){var r={};for(var n in t)if("declaredClass"!==n){var o=t[n];if(null!=o&&"function"!=typeof o)if(Array.isArray(o)){r[n]=[];for(var i=0;i<o.length;i++)r[n][i]=e(o[i])}else"object"==typeof o?o.toJSON&&(r[n]=JSON.stringify(o)):r[n]=o}return r}}.apply(null,n))||(e.exports=o)},883:function(e,t,r){var n,o;n=[r.dj.c(e.i),t,r(1),r(0),r(72),r(7),r(10),r(23),r(2)],void 0===(o=function(e,t,r,n,o,i,s,u,a){return function(e){function t(t){var r=e.call(this)||this;return r.requestOptions=null,r.url=null,r}return r(t,e),t.prototype.normalizeCtorArgs=function(e,t){return"string"!=typeof e?e:i({url:e},t)},Object.defineProperty(t.prototype,"parsedUrl",{get:function(){return this._parseUrl(this.url)},enumerable:!0,configurable:!0}),t.prototype._parseUrl=function(e){return e?u.urlToObject(e):null},t.prototype._encode=function(e,t,r){var n={};for(var o in e)if("declaredClass"!==o){var i=e[o];if(null!=i&&"function"!=typeof i)if(Array.isArray(i)){n[o]=[];for(var s=0;s<i.length;s++)n[o][s]=this._encode(i[s])}else if("object"==typeof i)if(i.toJSON){var u=i.toJSON(r&&r[o]);n[o]=t?u:JSON.stringify(u)}else n[o]=t?i:JSON.stringify(i);else n[o]=i}return n},n([a.property({readOnly:!0,dependsOn:["url"]})],t.prototype,"parsedUrl",null),n([a.property()],t.prototype,"requestOptions",void 0),n([a.property({type:String})],t.prototype,"url",void 0),n([a.subclass("esri.tasks.Task")],t)}(a.declared(s))}.apply(null,n))||(e.exports=o)},884:function(e,t,r){var n,o;n=[r.dj.c(e.i),t],void 0===(o=function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,r,n){void 0===e&&(e=null),void 0===t&&(t={}),this.geometry=e,t&&(this.attributes=t),r&&(this.centroid=r),null!=n&&(this.objectId=n)};t.default=r}.apply(null,n))||(e.exports=o)},885:function(e,t,r){var n,o;n=[r.dj.c(e.i),t,r(55)],void 0===(o=function(e,t,r){function n(e){return e&&"upperLeft"===e.originPosition}function o(e,t){var r=e.scale,n=e.translate;return Math.round((t-n[0])/r[0])}function i(e,t){var r=e.scale,n=e.translate;return Math.round((n[1]-t)/r[1])}function s(e,t,r){for(var n,s,u,a,c=[],l=0;l<r.length;l++){var d=r[l];l>0?(u=o(e,d[0]),a=i(e,d[1]),u===n&&a===s||(c.push(t(d,u-n,a-s)),n=u,s=a)):(n=o(e,d[0]),s=i(e,d[1]),c.push(t(d,n,s)))}return c.length>0?c:null}function u(e,t,r,n){return s(e,r?n?j:P:n?P:_,t)}function a(e,t,r,n){for(var o=[],i=r?n?j:P:n?P:_,u=0;u<t.length;u++){var a=s(e,i,t[u]);a&&a.length>=3&&o.push(a)}return o.length?o:null}function c(e,t,r,n){for(var o=[],i=r?n?j:P:n?P:_,u=0;u<t.length;u++){var a=s(e,i,t[u]);a&&a.length>=2&&o.push(a)}return o.length?o:null}function l(e,t){var r=e.scale,n=e.translate;return t*r[0]+n[0]}function d(e,t){var r=e.scale;return e.translate[1]-t*r[1]}function h(e,t,r){var n=new Array(r.length);if(!r.length)return n;var o=e.scale,i=o[0],s=o[1],u=l(e,r[0][0]),a=d(e,r[0][1]);n[0]=t(r[0],u,a);for(var c=1;c<r.length;c++){var h=r[c];u+=h[0]*i,a-=h[1]*s,n[c]=t(h,u,a)}return n}function f(e,t,r){for(var n=new Array(r.length),o=0;o<r.length;o++)n[o]=h(e,t,r[o]);return n}function y(e,t,r,n){return h(e,r?n?j:P:n?P:_,t)}function p(e,t,r,n){return f(e,r?n?j:P:n?P:_,t)}function m(e,t,r,n){return f(e,r?n?j:P:n?P:_,t)}function v(e,t,r){for(var n=r[0],o=n[0],i=n[1],s=Math.min(o,t[0]),u=Math.min(i,t[1]),a=Math.max(o,t[2]),c=Math.max(i,t[3]),l=1;l<r.length;l++){var d=r[l],h=d[0],f=d[1];o+=h,i+=f,h<0&&(s=Math.min(s,o)),h>0&&(a=Math.max(a,o)),f<0?u=Math.min(u,i):f>0&&(c=Math.max(c,i))}return e[0]=s,e[1]=u,e[2]=a,e[3]=c,e}function g(e,t){if(!t.length)return null;e[0]=e[1]=Number.POSITIVE_INFINITY,e[2]=e[3]=Number.NEGATIVE_INFINITY;for(var r=0;r<t.length;r++)v(e,e,t[r]);return e}function S(e,t,r,n,s){return t.xmin=o(e,r.xmin),t.ymin=i(e,r.ymin),t.xmax=o(e,r.xmax),t.ymax=i(e,r.ymax),t!==r&&(n&&(t.zmin=r.zmin,t.zmax=r.zmax),s&&(t.mmin=r.mmin,t.mmax=r.mmax)),t}function x(e,t,r,n,o){return t.points=u(e,r.points,n,o),t}function k(e,t,r,n,s){return t.x=o(e,r.x),t.y=i(e,r.y),t!==r&&(n&&(t.z=r.z),s&&(t.m=r.m)),t}function b(e,t,r,n,o){var i=a(e,r.rings,n,o);return i?(t.rings=i,t):null}function O(e,t,r,n,o){var i=c(e,r.paths,n,o);return i?(t.paths=i,t):null}Object.defineProperty(t,"__esModule",{value:!0});var _=function(e,t,r){return[t,r]},P=function(e,t,r){return[t,r,e[2]]},j=function(e,t,r){return[t,r,e[2],e[3]]};t.toQuantizationTransform=function(e){return e?{originPosition:"upperLeft",scale:[e.tolerance,e.tolerance],translate:[e.extent.xmin,e.extent.ymax]}:null},t.equals=function(e,t){return e===t||null==e&&null==t||null!=e&&null!=t&&(n(e)?(r=e.translate[0],o=e.translate[1],i=e.scale[0]):(r=e.extent.xmin,o=e.extent.ymax,i=e.tolerance),n(t)?(s=t.translate[0],u=t.translate[1],a=t.scale[0]):(s=t.extent.xmin,u=t.extent.ymax,a=t.tolerance),r===s&&o===u&&i===a);var r,o,i,s,u,a},t.quantizeX=o,t.quantizeY=i,t.quantizeBounds=function(e,t,r){return t[0]=o(e,r[0]),t[3]=i(e,r[1]),t[2]=o(e,r[2]),t[1]=i(e,r[3]),t},t.quantizePoints=u,t.quantizeRings=a,t.quantizePaths=c,t.hydrateX=l,t.hydrateY=d,t.hydrateCoordsArray=h,t.hydrateCoordsArrayArray=f,t.hydrateBounds=function(e,t,r){return r?(t[0]=l(e,r[0]),t[1]=d(e,r[3]),t[2]=l(e,r[2]),t[3]=d(e,r[1]),t):[l(e,t[0]),d(e,t[3]),l(e,t[2]),d(e,t[1])]},t.hydratePoints=y,t.hydratePaths=p,t.hydrateRings=m,t.getQuantizedBoundsCoordsArray=v,t.getQuantizedBoundsCoordsArrayArray=g,t.getQuantizedBoundsPoints=function(e){var t=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return v(t,t,e)},t.getQuantizedBoundsPaths=function(e){return g([0,0,0,0],e)},t.getQuantizedBoundsRings=function(e){return g([0,0,0,0],e)},t.quantizeExtent=S,t.quantizeMultipoint=x,t.quantizePoint=k,t.quantizePolygon=b,t.quantizePolyline=O,t.quantizeGeometry=function(e,t){return e&&t?r.isPoint(t)?k(e,{},t,!1,!1):r.isPolyline(t)?O(e,{},t,!1,!1):r.isPolygon(t)?b(e,{},t,!1,!1):r.isMultipoint(t)?x(e,{},t,!1,!1):r.isExtent(t)?S(e,{},t,!1,!1):null:null},t.hydrateExtent=function(e,t,r,n,o){return t.xmin=l(e,r.xmin),t.ymin=d(e,r.ymin),t.xmax=l(e,r.xmax),t.ymax=d(e,r.ymax),t!==r&&(n&&(t.zmin=r.zmin,t.zmax=r.zmax),o&&(t.mmin=r.mmin,t.mmax=r.mmax)),t},t.hydrateMultipoint=function(e,t,r,n,o){return t.points=y(e,r.points,n,o),t},t.hydratePoint=function(e,t,r,n,o){return t.x=l(e,r.x),t.y=d(e,r.y),t!==r&&(n&&(t.z=r.z),o&&(t.m=r.m)),t},t.hydratePolygon=function(e,t,r,n,o){return t.rings=m(e,r.rings,n,o),t},t.hydratePolyline=function(e,t,r,n,o){return t.paths=p(e,r.paths,n,o),t}}.apply(null,n))||(e.exports=o)},893:function(e,t,r){var n,o;n=[r.dj.c(e.i),t],void 0===(o=function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1};t.default=r}.apply(null,n))||(e.exports=o)},905:function(e,t,r){var n,o;n=[r.dj.c(e.i),t,r(7),r(41),r(45),r(16),r(23),r(55),r(271),r(916),r(829),r(882),r(50)],void 0===(o=function(e,t,r,n,o,i,s,u,a,c,l,d){function h(e,t){var r=e.geometry,n=e.toJSON(),o=n;if(r&&(o.geometry=JSON.stringify(r),o.geometryType=u.getJsonType(r),o.inSR=r.spatialReference.wkid||JSON.stringify(r.spatialReference)),n.groupByFieldsForStatistics&&(o.groupByFieldsForStatistics=n.groupByFieldsForStatistics.join(",")),n.objectIds&&(o.objectIds=n.objectIds.join(",")),n.orderByFields&&(o.orderByFields=n.orderByFields.join(",")),!n.outFields||t&&(t.returnCountOnly||t.returnExtentOnly||t.returnIdsOnly)?delete o.outFields:-1!==n.outFields.indexOf("*")?o.outFields="*":o.outFields=n.outFields.join(","),n.outSR?o.outSR=n.outSR.wkid||JSON.stringify(n.outSR):r&&(n.returnGeometry||n.returnCentroid)&&(o.outSR=o.inSR),n.returnGeometry&&delete n.returnGeometry,n.outStatistics&&(o.outStatistics=JSON.stringify(n.outStatistics)),n.pixelSize&&(o.pixelSize=JSON.stringify(n.pixelSize)),n.quantizationParameters&&(o.quantizationParameters=JSON.stringify(n.quantizationParameters)),n.source&&(o.layer=JSON.stringify({source:n.source}),delete n.source),n.timeExtent){var i=n.timeExtent,s=i.start,a=i.end;null==s&&null==a||(o.time=s===a?s:(null==s?"null":s)+","+(null==a?"null":a)),delete n.timeExtent}return o}function f(e,t,u,c,l){void 0===c&&(c={});var f="string"==typeof e?s.urlToObject(e):e,y=t.geometry?[t.geometry]:[];return c.responseType="pbf"===u?"array-buffer":"json",o.safeCast(a.normalizeCentralMeridian(y,null,c)).then((function(e){var o=e&&e[0];i.isSome(o)&&((t=t.clone()).geometry=o);var s=d.mapParameters(r({},f.query,{f:u},l,h(t,l)));return n(f.path+"/query",r({},c,{query:s}))}))}Object.defineProperty(t,"__esModule",{value:!0});var y,p="Layer does not support extent calculation.";t.queryToQueryStringParameters=h,t.executeQuery=function(e,t,r){return f(e,t,"json",r)},t.executeQueryPBF=function(e,t,r,n){return f(e,t,"pbf",n).then((function(e){var t=function(t){var r=e;return r.data=t,r};return r.useWorker?(null==y&&(y=new l.PBFWorker),y).parseFeatureQuery(e.data,r).then((function(e){return t(e)})):t(c.parsePBFFeatureQuery(e.data,r))}))},t.executeQueryForIds=function(e,t,r){return f(e,t,"json",r,{returnIdsOnly:!0})},t.executeQueryForCount=function(e,t,r){return f(e,t,"json",r,{returnIdsOnly:!0,returnCountOnly:!0})},t.executeQueryForExtent=function(e,t,r){return f(e,t,"json",r,{returnExtentOnly:!0,returnCountOnly:!0}).then((function(e){var t=e.data;if(t.hasOwnProperty("extent"))return e;if(t.features)throw new Error(p);if(t.hasOwnProperty("count"))throw new Error(p);return e}))}}.apply(null,n))||(e.exports=o)},926:function(e,t,r){var n,o;n=[r.dj.c(e.i),t,r(7),r(41),r(23),r(295),r(882)],void 0===(o=function(e,t,r,n,o,i,s){Object.defineProperty(t,"__esModule",{value:!0}),t.processAttachmentQueryResult=function(e,t){for(var r={},n=0,s=e;n<s.length;n++)for(var u=s[n],a=u.parentObjectId,c=0,l=u.attachmentInfos;c<l.length;c++){var d=l[c],h=d.id,f=o.addProxy(o.addTokenParameter(t+"/"+a+"/attachments/"+h)),y=i.fromJSON(d);y.set({url:f,parentObjectId:a}),r[a]?r[a].push(y):r[a]=[y]}return r},t.executeAttachmentQuery=function(e,t,o){var i={query:s.mapParameters(r({},e.query,{f:"json"},function(e){var t=e.toJSON();return t.attachmentTypes&&(t.attachmentTypes=t.attachmentTypes.join(",")),t.globalIds&&(t.globalIds=t.globalIds.join(",")),t.objectIds&&(t.objectIds=t.objectIds.join(",")),t.size&&(t.size=t.size.join(",")),t}(t)))};return o&&(i=r({},o,i)),n(e.path+"/queryAttachments",i)}}.apply(null,n))||(e.exports=o)},936:function(e,t,r){var n,o;n=[r.dj.c(e.i),t,r(1),r(0),r(72),r(7),r(20),r(2),r(883),r(905),r(926),r(937),r(292),r(171),r(272),r(293)],void 0===(o=function(e,t,r,n,o,i,s,u,a,c,l,d,h,f,y,p){return function(e){function t(t){var r=e.call(this,t)||this;return r.gdbVersion=null,r.source=null,r}return r(t,e),t.prototype.execute=function(e,t){return this.executeJSON(e,t).then((function(e){return f.fromJSON(e)}))},t.prototype.executeJSON=function(e,t){return c.executeQuery(this.parsedUrl,this._normalizeQuery(e),i({},this.requestOptions,t)).then((function(e){return e.data}))},t.prototype.executeForCount=function(e,t){return c.executeQueryForCount(this.parsedUrl,this._normalizeQuery(e),i({},this.requestOptions,t)).then((function(e){return e.data.count}))},t.prototype.executeForExtent=function(e,t){return c.executeQueryForExtent(this.parsedUrl,this._normalizeQuery(e),i({},this.requestOptions,t)).then((function(e){return{count:e.data.count,extent:s.Extent.fromJSON(e.data.extent)}}))},t.prototype.executeForIds=function(e,t){return c.executeQueryForIds(this.parsedUrl,this._normalizeQuery(e),i({},this.requestOptions,t)).then((function(e){return e.data.objectIds}))},t.prototype.executeRelationshipQuery=function(e,t){return e=p.from(e),(this.gdbVersion||this.source)&&(e=e.clone().set({gdbVersion:this.gdbVersion||e.gdbVersion,source:this.source||e.source})),d.executeRelationshipQuery(this.parsedUrl,e,i({},this.requestOptions,t)).then((function(e){var t=e.data,r={};return Object.keys(t).forEach((function(e){return r[e]=f.fromJSON(t[e])})),r}))},t.prototype.executeAttachmentQuery=function(e,t){var r=this;return l.executeAttachmentQuery(this.parsedUrl,h.from(e),i({},this.requestOptions,t)).then((function(e){return l.processAttachmentQueryResult(e.data.attachmentGroups,r.parsedUrl.path)}))},t.prototype._normalizeQuery=function(e){var t=y.from(e);return this.gdbVersion||this.source?(t===e?t.clone():t).set({gdbVersion:this.gdbVersion||e.gdbVersion,source:this.source||e.source}):t},n([u.property()],t.prototype,"gdbVersion",void 0),n([u.property()],t.prototype,"source",void 0),n([u.subclass("esri.tasks.QueryTask")],t)}(u.declared(a))}.apply(null,n))||(e.exports=o)},937:function(e,t,r){var n,o;n=[r.dj.c(e.i),t,r(7),r(41),r(882)],void 0===(o=function(e,t,r,n,o){function i(e){var t=e.toJSON();return t.objectIds&&(t.objectIds=t.objectIds.join(",")),t.outFields&&(t.outFields=t.outFields.join(",")),t.outSpatialReference&&(t.outSR=t.outSR.wkid||JSON.stringify(t.outSR.toJSON()),delete t.outSpatialReference),t.source&&(t.layer=JSON.stringify({source:t.source}),delete t.source),t}Object.defineProperty(t,"__esModule",{value:!0}),t.toQueryStringParameters=i,t.executeRelationshipQuery=function(e,t,s){var u={query:o.mapParameters(r({},e.query,{f:"json"},i(t)))};return s&&(u=r({},s,u)),n(e.path+"/queryRelatedRecords",u).then((function(e){for(var t=e.data,r=t.geometryType,n=t.spatialReference,o={},i=0,s=t.relatedRecordGroups;i<s.length;i++){var u=s[i],a={fields:void 0,objectIdFieldName:void 0,geometryType:r,spatialReference:n,features:u.relatedRecords};if(null!=u.objectId)o[u.objectId]=a;else for(var c in u)u.hasOwnProperty(c)&&"relatedRecords"!==c&&(o[u[c]]=a)}return e.data=o,e}))}}.apply(null,n))||(e.exports=o)}}]);